using System;
using System.Collections.Generic;
using System.Text;

namespace PowerCoreServer
{
    public static class Loader
    {
        public static string Data = "PGh0bWw+CjxoZWFkPgo8dGl0bGU+UG93ZXJNb25pdG9yPC90aXRsZT4KCjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4KCmdsb2JhbCA9IHt9Cgpub19zdXBwb3J0ID0gJ25vX3N1cHBvcnQnCgogIHZhciByb290ID0gJyc7CiAgdmFyIGV4YW1wbGVEb21haW4gPSAnMTkyLjE2OC4xLjE2Njo4MDgwJwogIGlmICh3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT0gJ2V4YW1wbGUuY29tJykKICAgIHJvb3QgPSAnaHR0cDovLycgKyBleGFtcGxlRG9tYWluCiAgdmFyIGNvbmZpZyA9IHt9CiAgdmFyIHZpZGVvTW9kZSA9ICdvZmYnOwogIHZhciBhdWRpb01vZGUgPSAnb2ZmJzsKCiAgdmFyIHdvcmtpbmcgPSBudWxsOwogIHZhciBzaG93aW5nID0gbnVsbDsKICB2YXIganNVcGRhdGUgPSBmYWxzZTsKICB2YXIganNTaXplT2sgPSBmYWxzZTsKICB2YXIgdmlkZW9TaXplID0gWzEsMV07CiAgdmFyIGFzcGVjdCA9IDAuMDsKCiAgdmFyIHdzQXVkaW9DdHggPSBudWxsOwogIHZhciBtaWNTdHJlYW0gPSBudWxsOwogIHZhciB0d2FXZWJzb2NrZXQgPSBudWxsOwogIHZhciB0d2FQcmVzc2VkID0gZmFsc2U7CiAgdmFyIHR3YU1pY1N0cmVhbSA9IG51bGw7CiAgCiAgdmFyIGdldF92YWwgPSBmdW5jdGlvbihpZCkgewogICAgcmV0dXJuIGZ1bmN0aW9uKCkge3JldHVybiAkKGlkKS52YWwoKX07CiAgfQoKICB2YXIgZGlzcGxheV9lcnJvciA9IGZ1bmN0aW9uKGNhdXNlLCBkZXRhaWxzKSB7CiAgICByZXR1cm4gZnVuY3Rpb24oY2F1c2UsIGRldGFpbHMpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKHhociwgdGV4dFN0YXR1cykgewogICAgICAgICQoJyN3YXJuX2Rlc2MnKS50ZXh0KGRldGFpbHMrIiwgIit0ZXh0U3RhdHVzKTsKICAgICAgICAkKCcjd2Fybl9jYXVzZScpLnRleHQoY2F1c2UpOwogICAgICAgICQoJyN3YXJuX2RpdicpLnNob3coKTsKICAgICAgfQogICAgfSAoY2F1c2UsIGRldGFpbHMpCiAgfQoKCgogIHZhciB6b29tX2hvbGRlciA9IHsKICAgIHZhbDogZ2V0X3ZhbCgnI3JhbmdlX3pvb20nKSwgCiAgICBpZDogLTk5OTksIAogICAgdXBkOiBmdW5jdGlvbih2YWwpIHsKICAgICAgJCgnI3JhbmdlX3pvb21fbGFiZWwnKS50ZXh0KChjb25maWcuYXZhaWwuem9vbVt2YWxdIC8gMTAwKSArICcgWCcpOwogICAgfSwKICAgIGNtZDogZnVuY3Rpb24odmFsKSB7JC5hamF4KHJvb3QrJy9wdHo/em9vbT0nK3ZhbCkuZmFpbChkaXNwbGF5X2Vycm9yKCdjYW5ub3Rfc2V0JywgJ3pvb20nKSk7fQogIH07CgogIHZhciBmb2NhbF9sZW5ndGhfaG9sZGVyID0gewogICAgdmFsOiBnZXRfdmFsKCcjcmFuZ2VfZm9jYWxfbGVuZ3RoJyksIAogICAgaWQ6IC05OTk5LCAKICAgIHVwZDogZnVuY3Rpb24odmFsKSB7CiAgICAgICQoJyNyYW5nZV9mb2NhbF9sZW5ndGhfbGFiZWwnKS50ZXh0KChjb25maWcuYXZhaWwuZm9jYWxfbGVuZ3RoW3ZhbF0pICsgJyBYJyk7CiAgICB9LAogICAgY21kOiBmdW5jdGlvbih2YWwpIHskLmFqYXgocm9vdCsnL3NldHRpbmdzL2ZvY2FsX2xlbmd0aD9zZXQ9Jytjb25maWcuYXZhaWwuZm9jYWxfbGVuZ3RoW3ZhbF0pLmZhaWwoZGlzcGxheV9lcnJvcignY2Fubm90X3NldCcsICdmb2NhbF9sZW5ndGgnKSk7fQogIH07CgogIHZhciBxdWFsaXR5X2hvbGRlciA9IHsKICAgIHZhbDogZ2V0X3ZhbCgnI3JhbmdlX3F1YWxpdHknKSwgCiAgICBpZDogLTk5OTksIAogICAgdXBkOiBmdW5jdGlvbih2YWwpIHsKICAgICAgJCgnI3JhbmdlX3F1YWxpdHlfbGFiZWwnKS50ZXh0KHZhbCArICclJyk7CiAgICB9LCAKICAgIGNtZDogZnVuY3Rpb24odmFsKSB7CiAgICAgIGlmICh2YWwgPT0gMCkgewogICAgICAgIHZhbCA9IDE7CiAgICAgIH0KICAgICAgJC5hamF4KHJvb3QrJy9zZXR0aW5ncy9xdWFsaXR5P3NldD0nK3ZhbCkuZmFpbChkaXNwbGF5X2Vycm9yKCdjYW5ub3Rfc2V0JywgJ3F1YWxpdHknKSk7CiAgICB9CiAgfTsKCiAgdmFyIGNyb3BzID0gWyJjcm9wX3giLCAiY3JvcF95Il0KICB2YXIgY3JvcF9ob2xkZXJzID0gW10KICBmb3IgKGkgaW4gY3JvcHMpIHsKICAgIHZhciBjb250cm9sID0gY3JvcHNbaV0KICAgIGNyb3BfaG9sZGVycy5wdXNoKHsKICAgICAgdmFsOiBnZXRfdmFsKCcjcmFuZ2VfJytjb250cm9sKSwgCiAgICAgIGlkOiAtOTk5OSwgCiAgICAgIHVwZDogZnVuY3Rpb24odmFsKSB7fSwgCiAgICAgIGNtZDogZnVuY3Rpb24oY29udHJvbCl7IHJldHVybiBmdW5jdGlvbih2YWwpIHsKICAgICAgICBpZiAodmFsID09IDApIHsKICAgICAgICAgIHZhbCA9IDE7CiAgICAgICAgfQogICAgICAgICQuYWpheChyb290Kycvc2V0dGluZ3MvJyArIGNvbnRyb2wgKyAnP3NldD0nK3ZhbCkuZmFpbChkaXNwbGF5X2Vycm9yKCdjYW5ub3Rfc2V0JywgY29udHJvbCkpOwogICAgICB9fSAoY29udHJvbCkKICAgIH0pCiAgfQoKICB2YXIgbW9saW1pdF9ob2xkZXIgPSB7CiAgICB2YWw6IGdldF92YWwoJyNyYW5nZV9tb3Rpb25fbGltaXQnKSwgCiAgICBpZDogLTk5OTksIAogICAgdXBkOiBmdW5jdGlvbih2YWwpIHsKICAgIH0sIAogICAgY21kOiBmdW5jdGlvbih2YWwpIHsKICAgICAgaWYgKHZhbCA9PSAwKSB7CiAgICAgICAgdmFsID0gMTAwOwogICAgICB9CiAgICAgICQuYWpheChyb290Kycvc2V0dGluZ3MvbW90aW9uX2xpbWl0P3NldD0nK3ZhbCkuZmFpbChkaXNwbGF5X2Vycm9yKCdjYW5ub3Rfc2V0JywgJ21vdGlvbl9saW1pdCcpKTsKICAgIH0KICB9OwoKCiAgdmFyIGV4cG9zdXJlX2hvbGRlciA9IHsKICAgIHZhbDogZ2V0X3ZhbCgnI3JhbmdlX2V4cG9zdXJlJyksIAogICAgaWQ6IC05OTk5LCAKICAgIHVwZDogZnVuY3Rpb24odmFsKSB7CiAgICAgICQoJyNyYW5nZV9leHBvc3VyZV9sYWJlbCcpLnRleHQoKGNvbmZpZy5hdmFpbC5leHBvc3VyZVt2YWxdKSk7CiAgICB9LAogICAgY21kOiBmdW5jdGlvbih2YWwpIHskLmFqYXgocm9vdCsnL3NldHRpbmdzL2V4cG9zdXJlP3NldD0nK2NvbmZpZy5hdmFpbC5leHBvc3VyZVt2YWxdKQogICAgLmZhaWwoZGlzcGxheV9lcnJvcignY2Fubm90X3NldCcsICdleHBvc3VyZScpKTt9CiAgfTsKCiAgdmFyIG52YXZnX2hvbGRlciA9IHsKICAgIHZhbDogZ2V0X3ZhbCgnI3JhbmdlX25pZ2h0dmlzaW9uX2F2ZXJhZ2UnKSwgCiAgICBpZDogLTk5OTksIAogICAgdXBkOiBmdW5jdGlvbih2YWwpIHsKICAgICAgJCgnI3JhbmdlX25pZ2h0dmlzaW9uX2F2ZXJhZ2VfbGFiZWwnKS50ZXh0KCB2YWwgKTsKICAgIH0sCiAgICBjbWQ6IGZ1bmN0aW9uKHZhbCkgewogICAgICAkLmFqYXgocm9vdCsnL3NldHRpbmdzL25pZ2h0X3Zpc2lvbl9hdmVyYWdlP3NldD0nK3ZhbCkuZmFpbChkaXNwbGF5X2Vycm9yKCdjYW5ub3Rfc2V0JywgJ25pZ2h0X3Zpc2lvbl9hdmVyYWdlJykpOwogICAgfQogIH07CgogIHZhciBudmdhaW5faG9sZGVyID0gewogICAgdmFsOiBmdW5jdGlvbigpIHsgcmV0dXJuIChnZXRfdmFsKCcjcmFuZ2VfbmlnaHR2aXNpb25fZ2FpbicpKCkgLyA0LjApLnRvRml4ZWQoMil9LCAKICAgIGlkOiAtOTk5OSwgCiAgICB1cGQ6IGZ1bmN0aW9uKHZhbCkgewogICAgICAkKCcjcmFuZ2VfbmlnaHR2aXNpb25fZ2Fpbl9sYWJlbCcpLnRleHQoIHZhbCArICcgWCcpOwogICAgfSwKICAgIGNtZDogZnVuY3Rpb24odmFsKSB7CiAgICAgICQuYWpheChyb290Kycvc2V0dGluZ3MvbmlnaHRfdmlzaW9uX2dhaW4/c2V0PScrdmFsKS5mYWlsKGRpc3BsYXlfZXJyb3IoJ2Nhbm5vdF9zZXQnLCAnbmlnaHRfdmlzaW9uX2dhaW4nKSk7CiAgICB9CiAgfTsKCiAgdmFyIGZvY3VzX2Rpc3RhbmNlX2hvbGRlciA9IHsKICAgIHZhbDogZnVuY3Rpb24oKSB7IHJldHVybiAoZ2V0X3ZhbCgnI3JhbmdlX2ZvY3VzX2Rpc3RhbmNlJykoKSAvIDEwMC4wKS50b0ZpeGVkKDIpfSwgCiAgICBpZDogLTk5OTksIAogICAgdXBkOiBmdW5jdGlvbih2YWwpIHsKICAgICAgJCgnI3JhbmdlX2ZvY3VzX2Rpc3RhbmNlX2xhYmVsJykudGV4dCggdmFsICsgJy9tJyk7CiAgICB9LAogICAgY21kOiBmdW5jdGlvbih2YWwpIHsKICAgICAgJC5hamF4KHJvb3QrJy9zZXR0aW5ncy9mb2N1c19kaXN0YW5jZT9zZXQ9Jyt2YWwpLmZhaWwoZGlzcGxheV9lcnJvcignY2Fubm90X3NldCcsICdmb2N1c19kaXN0YW5jZScpKTsKICAgIH0KICB9OwoKICB2YXIgaXNvX2hvbGRlciA9IHsKICAgIHZhbDogZnVuY3Rpb24oKSB7IHJldHVybiAoZ2V0X3ZhbCgnI3JhbmdlX2lzbycpKCkpfSwgCiAgICBpZDogLTk5OTksIAogICAgdXBkOiBmdW5jdGlvbih2YWwpIHsKICAgICAgJCgnI3JhbmdlX2lzb19sYWJlbCcpLnRleHQoIHZhbCApOwogICAgfSwKICAgIGNtZDogZnVuY3Rpb24odmFsKSB7CiAgICAgICQuYWpheChyb290Kycvc2V0dGluZ3MvaXNvP3NldD0nK3ZhbCkuZmFpbChkaXNwbGF5X2Vycm9yKCdjYW5ub3Rfc2V0JywgJ2lzbycpKTsKICAgIH0KICB9OwoKICB2YXIgZm9ybWF0X25zID0gZnVuY3Rpb24odG0pIHsKICAgIGlmICh0bSA+IDEwMDAwKSB7CiAgICAgIHRtIC89IDEwMDAuMAogICAgICBpZiAodG0gPiAxMDAwMCkgewogICAgICAgIHRtIC89IDEwMDAuMAogICAgICAgIGlmICh0bSA+IDEwMDAwKSB7CiAgICAgICAgICB0bSAvPSAxMDAwLjAKICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHRtKSArICJzIgogICAgICAgIH0KICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh0bSkgKyAibXMiCiAgICAgIH0KICAgICAgcmV0dXJuIE1hdGgucm91bmQodG0pICsgInVzIgogICAgfQogICAgcmV0dXJuIE1hdGgucm91bmQodG0pICsgIm5zIgogIH0KCiAgdmFyIGV4cG9zdXJlX25zX2hvbGRlciA9IHsKICAgIHZhbDogZnVuY3Rpb24oKSB7IHJldHVybiAoZ2V0X3ZhbCgnI3JhbmdlX2V4cG9zdXJlX25zJykoKSl9LCAKICAgIGlkOiAtOTk5OSwgCiAgICB1cGQ6IGZ1bmN0aW9uKHZhbCkgewogICAgICAkKCcjcmFuZ2VfZXhwb3N1cmVfbnNfbGFiZWwnKS50ZXh0KGZvcm1hdF9ucyh2YWwpKTsKICAgIH0sCiAgICBjbWQ6IGZ1bmN0aW9uKHZhbCkgewogICAgICAkLmFqYXgocm9vdCsnL3NldHRpbmdzL2V4cG9zdXJlX25zP3NldD0nK3ZhbCkuZmFpbChkaXNwbGF5X2Vycm9yKCdjYW5ub3Rfc2V0JywgJ2V4cG9zdXJlX25zJykpOwogICAgfQogIH07CgogIHZhciBmcmFtZV9kdXJhdGlvbl9ob2xkZXIgPSB7CiAgICB2YWw6IGZ1bmN0aW9uKCkgeyByZXR1cm4gKGdldF92YWwoJyNyYW5nZV9mcmFtZV9kdXJhdGlvbicpKCkpfSwgCiAgICBpZDogLTk5OTksIAogICAgdXBkOiBmdW5jdGlvbih2YWwpIHsKICAgICAgJCgnI3JhbmdlX2ZyYW1lX2R1cmF0aW9uX2xhYmVsJykudGV4dChmb3JtYXRfbnModmFsKSk7CiAgICB9LAogICAgY21kOiBmdW5jdGlvbih2YWwpIHsKICAgICAgJC5hamF4KHJvb3QrJy9zZXR0aW5ncy9mcmFtZV9kdXJhdGlvbj9zZXQ9Jyt2YWwpLmZhaWwoZGlzcGxheV9lcnJvcignY2Fubm90X3NldCcsICdmcmFtZV9kdXJhdGlvbicpKTsKICAgIH0KICB9OwoKCiAgdmFyIHNjaGVkdWxlVXBkYXRlID0gZnVuY3Rpb24oaG9sZGVyKSB7CiAgICB2YXIgdmFsID0gaG9sZGVyLnZhbCgpOwogICAgaG9sZGVyLnVwZCh2YWwpOwogICAgY2xlYXJUaW1lb3V0KGhvbGRlci5pZCk7CiAgICBob2xkZXIuaWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGhvbGRlci52YWwoKSA9PSB2YWwpIHsKICAgICAgICBob2xkZXIuY21kKHZhbCk7CiAgICAgIH0KICAgIH0gLDEwMCkKICB9CgogIHZhciBzY2hlZHVsZVVwZGF0ZVcgPSBmdW5jdGlvbihob2xkZXIpIHsKICAgIHJldHVybiBmdW5jdGlvbigpIHtzY2hlZHVsZVVwZGF0ZShob2xkZXIpfTsKICB9CgogIHZhciBzY2hlZHVsZVRpbWVvdXQgPSBmdW5jdGlvbihob2xkZXIpIHsKICAgIGNsZWFyVGltZW91dChob2xkZXIuaWQpOwogICAgaG9sZGVyLmlkID0gc2V0VGltZW91dChmdW5jdGlvbigpeyBob2xkZXIudGljayhob2xkZXIpIH0sIGhvbGRlci50aW1lKTsKICB9CgogIHZhciBzZXRBY3RpdmUgPSBmdW5jdGlvbihuYW1lLCBhY3RpdmUpIHsKICAgIHZhciBjYiA9ICQoJyMnK25hbWUrJ2NiJykKICAgIGNiLmF0dHIoImNoZWNrZWQiLCBhY3RpdmUpCiAgICB2YXIgYnRuID0gJCgnIycrbmFtZSsnYnRuJyk7CiAgICBpZiAoYWN0aXZlKQogICAgICBidG4uYWRkQ2xhc3MoJ2FjdGl2ZScpOwogICAgZWxzZQogICAgICBidG4ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOwogIH0KCgogIHZhciBzZXR1cFN3aXRjaCA9IGZ1bmN0aW9uKG5hbWUsIGFycmF5LCBhY3RpdmUsIHVybCwgcmF3KSB7CiAgICB2YXIgZW5hbWUgPSAnIycrbmFtZTsKICAgIHZhciBlbCA9ICQoZW5hbWUpLmVtcHR5KCkKICAgIHZhciBkb190cmFuc2xhdGlvbiA9IGZ1bmN0aW9uKHZhbCkgewogICAgICByZXR1cm4gdHJhbnNsYXRlKG5hbWUrJ18nK3ZhbCk7CiAgICB9CiAgICBpZiAocmF3KSB7CiAgICAgIGRvX3RyYW5zbGF0aW9uID0gZnVuY3Rpb24odmFsKSB7CiAgICAgICAgcmV0dXJuIHZhbDsKICAgICAgfQogICAgfQogICAgZm9yICh2YXIgaSA9IDA7IGk8YXJyYXkubGVuZ3RoOyArK2kpIHsKICAgICAgdmFyIHRyYW5zbGF0ZWRfbmFtZSA9IGRvX3RyYW5zbGF0aW9uKGFycmF5W2ldKTsKICAgICAgZWwuYXBwZW5kKCQoJzxsaSBzdHlsZT0iY3Vyc29yOiBwb2ludGVyOyI+PGE+Jyt0cmFuc2xhdGVkX25hbWUrJzwvYT48L2xpPicpCiAgICAgICAgLmNsaWNrKAogICAgICAgICAgKGZ1bmN0aW9uKGxvY2FsX3VybCwgdmFsVHJhbnMpIHsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICQuYWpheChsb2NhbF91cmwpLmZhaWwoZGlzcGxheV9lcnJvcignY2Fubm90X2ZldGNoJywgbG9jYWxfdXJsKSkKICAgICAgICAgICAgICAkKGVuYW1lKydfYnRuJykuaHRtbCh2YWxUcmFucyArICcgPGIgY2xhc3M9ImNhcmV0Ij48L2I+JykKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgICh1cmwgKyBhcnJheVtpXSwgdHJhbnNsYXRlZF9uYW1lKQogICAgICApKTsKICAgIH0KICAgICQoZW5hbWUrJ19idG4nKS5odG1sKGRvX3RyYW5zbGF0aW9uKGFjdGl2ZSkgKyAnIDxiIGNsYXNzPSJjYXJldCI+PC9iPicpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpCiAgfQoKICB2YXIgY2lyY19zZXR0ZXIgPSBmdW5jdGlvbih4KSB7CiAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICQoJyNjaXJjdWxhcl9sZW5ndGgnKS50ZXh0KG1pbnV0ZXNfdG9fcmVhZGFibGUoeCkpOwogICAgICAkLmFqYXgocm9vdCsnL3NldHRpbmdzL3ZpZGVvX2NodW5rX2xlbj9zZXQ9Jyt4KTsKICAgIH0KICB9CgogIHZhciByZWNvbmZpZ3VyZSA9IGZ1bmN0aW9uICgpIHsKICAgIGNvbmZpZy5jdXJ2YWxzID0gY29uZmlnLmN1cnZhbHMgfHwge30KICAgIGNvbmZpZy5jdXJ2YWxzLnZpZGVvX3NpemUgPSBjb25maWcuY3VydmFscy52aWRlb19zaXplIHx8ICIxeDEiCiAgICB2aWRlb1NpemUgPSBjb25maWcuY3VydmFscy52aWRlb19zaXplLnNwbGl0KCd4Jyk7CiAgICB2aWRlb1NpemVbMF0gLT0gMDsKICAgIHZpZGVvU2l6ZVsxXSAtPSAwOwogICAgYXNwZWN0ID0gKHZpZGVvU2l6ZVswXSArIDAuMCkgLyB2aWRlb1NpemVbMV07CgogICAgJCgnI2NpcmN1bGFyX2xlbmd0aCcpLnRleHQobWludXRlc190b19yZWFkYWJsZShjb25maWcuY3VydmFscy52aWRlb19jaHVua19sZW4pKTsKCiAgICAkKCcjY2lyY3VsYXJfMmgnKS5jbGljayhjaXJjX3NldHRlcigxMjApKTsKICAgICQoJyNjaXJjdWxhcl8xaCcpLmNsaWNrKGNpcmNfc2V0dGVyKDYwKSk7CiAgICAkKCcjY2lyY3VsYXJfMzBtJykuY2xpY2soY2lyY19zZXR0ZXIoMzApKTsKICAgICQoJyNjaXJjdWxhcl8xMG0nKS5jbGljayhjaXJjX3NldHRlcigxMCkpOwogICAgJCgnI2NpcmN1bGFyXzVtJykuY2xpY2soY2lyY19zZXR0ZXIoNSkpOwoKICAgIGlmIChjb25maWcuYXZhaWwuem9vbSA9PSB1bmRlZmluZWQpIHsKICAgICAgJCgnI3JhbmdlX3pvb20nKS5oaWRlKCk7CiAgICB9IGVsc2UgewogICAgICBpZiAoY29uZmlnLmN1cnZhbHMuem9vbSA9PSAtMSkKICAgICAgICBjb25maWcuY3VydmFscy56b29tID0gMDsKICAgICAgJCgnI3JhbmdlX3pvb20nKQogICAgICAgIC5hdHRyKCdtaW4nLDApCiAgICAgICAgLmF0dHIoJ21heCcsY29uZmlnLmF2YWlsLnpvb20ubGVuZ3RoLTEpCiAgICAgICAgLmF0dHIoJ3ZhbHVlJywgY29uZmlnLmF2YWlsLnpvb20uaW5kZXhPZihjb25maWcuY3VydmFscy56b29tKSkKICAgICAgICAuY2hhbmdlKHNjaGVkdWxlVXBkYXRlVyh6b29tX2hvbGRlcikpOwogICAgICB6b29tX2hvbGRlci51cGQoem9vbV9ob2xkZXIudmFsKCkpOwogICAgfQogICAgaWYgKGNvbmZpZy5hdmFpbC5mb2NhbF9sZW5ndGggPT0gdW5kZWZpbmVkIHx8IGNvbmZpZy5hdmFpbC5mb2NhbF9sZW5ndGgubGVuZ3RoIDwgMikgewogICAgICAkKCcjZm9jYWxfbGVuZ3RoX2hvc3QnKS5oaWRlKCkKICAgIH0gZWxzZSB7CiAgICAgIGlmIChjb25maWcuY3VydmFscy5mb2NhbF9sZW5ndGggPT0gLTEpCiAgICAgICAgY29uZmlnLmN1cnZhbHMuZm9jYWxfbGVuZ3RoID0gMDsKICAgICAgJCgnI3JhbmdlX2ZvY2FsX2xlbmd0aCcpCiAgICAgICAgLmF0dHIoJ21pbicsMCkKICAgICAgICAuYXR0cignbWF4Jyxjb25maWcuYXZhaWwuZm9jYWxfbGVuZ3RoLmxlbmd0aC0xKQogICAgICAgIC5hdHRyKCd2YWx1ZScsIGNvbmZpZy5hdmFpbC5mb2NhbF9sZW5ndGguaW5kZXhPZihjb25maWcuY3VydmFscy5mb2NhbF9sZW5ndGgpKQogICAgICAgIC5jaGFuZ2Uoc2NoZWR1bGVVcGRhdGVXKGZvY2FsX2xlbmd0aF9ob2xkZXIpKTsKICAgICAgZm9jYWxfbGVuZ3RoX2hvbGRlci51cGQoZm9jYWxfbGVuZ3RoX2hvbGRlci52YWwoKSk7CiAgICB9CiAgICAKCiAgICBpZiAoY29uZmlnLmF2YWlsLnRvcmNoICE9IHVuZGVmaW5lZCkgewogICAgICB2YXIgZmxhc2hjYiA9ICQoJyNmbGFzaGNiJykKICAgICAgICAuY2hhbmdlKGZ1bmN0aW9uKCkgewogICAgICAgICAgaWYgKGZsYXNoY2IuaXMoIjpjaGVja2VkIikpIHsKICAgICAgICAgICAgJC5hamF4KHJvb3QrJy9lbmFibGV0b3JjaCcpLmZhaWwoZGlzcGxheV9lcnJvcignY2Fubm90X3NldCcsICd0b3JjaCcpKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJC5hamF4KHJvb3QrJy9kaXNhYmxldG9yY2gnKS5mYWlsKGRpc3BsYXlfZXJyb3IoJ2Nhbm5vdF9zZXQnLCAndG9yY2gnKSkKICAgICAgICAgIH0KICAgICAgfSkKICAgICAgc2V0QWN0aXZlKCdmbGFzaCcsIGNvbmZpZy5jdXJ2YWxzLnRvcmNoID09ICJvbiIpOwogICAgfSBlbHNlIHsKICAgICAgJCgnI2ZsYXNoYnRuJykuaGlkZSgpOwogICAgfQogICAgdmFyIGZvY3VzY2IgPSAkKCcjZm9jdXNjYicpCiAgICAgIC5jaGFuZ2UoZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKGZvY3VzY2IuaXMoIjpjaGVja2VkIikpIHsKICAgICAgICAgICQuYWpheChyb290KycvZm9jdXMnKS5mYWlsKGRpc3BsYXlfZXJyb3IoJ2Nhbm5vdF9zZXQnLCAnZm9jdXMnKSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgJC5hamF4KHJvb3QrJy9ub2ZvY3VzJykuZmFpbChkaXNwbGF5X2Vycm9yKCdjYW5ub3Rfc2V0JywgJ2ZvY3VzJykpCiAgICAgICAgfQogICAgICB9KQogICAgc2V0QWN0aXZlKCdmb2N1cycsIGNvbmZpZy5jdXJ2YWxzLmZvY3VzID09ICJvbiIpOwogICAgCiAgICB2YXIgb3ZlcmxheWNiID0gJCgnI292ZXJsYXljYicpCiAgICAgIC5jaGFuZ2UoZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKG92ZXJsYXljYi5pcygiOmNoZWNrZWQiKSkgewogICAgICAgICAgJC5hamF4KHJvb3QrJy9zZXR0aW5ncy9vdmVybGF5P3NldD1vbicpLmZhaWwoZGlzcGxheV9lcnJvcignY2Fubm90X3NldCcsICdvdmVybGF5JykpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICQuYWpheChyb290Kycvc2V0dGluZ3Mvb3ZlcmxheT9zZXQ9b2ZmJykuZmFpbChkaXNwbGF5X2Vycm9yKCdjYW5ub3Rfc2V0JywgJ292ZXJsYXknKSkKICAgICAgICB9CiAgICAgIH0pCiAgICBzZXRBY3RpdmUoJ292ZXJsYXknLCBjb25maWcuY3VydmFscy5vdmVybGF5ID09ICJvbiIpOwoKICAgIHZhciBudmNiID0gJCgnI252Y2InKQogICAgICAuY2hhbmdlKGZ1bmN0aW9uKCkgewogICAgICAgIGlmIChudmNiLmlzKCI6Y2hlY2tlZCIpKSB7CiAgICAgICAgICAkLmFqYXgocm9vdCsnL3NldHRpbmdzL25pZ2h0X3Zpc2lvbj9zZXQ9b24nKS5mYWlsKGRpc3BsYXlfZXJyb3IoJ2Nhbm5vdF9zZXQnLCAnbmlnaHRfdmlzaW9uJykpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICQuYWpheChyb290Kycvc2V0dGluZ3MvbmlnaHRfdmlzaW9uP3NldD1vZmYnKS5mYWlsKGRpc3BsYXlfZXJyb3IoJ2Nhbm5vdF9zZXQnLCAnbmlnaHRfdmlzaW9uJykpCiAgICAgICAgfQogICAgICB9KQogICAgc2V0QWN0aXZlKCdudicsIGNvbmZpZy5jdXJ2YWxzLm5pZ2h0X3Zpc2lvbiA9PSAib24iKTsKCgogICAgaWYgKGNvbmZpZy5jdXJ2YWxzLmNyb3BfeCAhPSB1bmRlZmluZWQpIHsKICAgICAgJCgnI3JhbmdlX2Nyb3BfeCcpCiAgICAgICAgLnZhbChjb25maWcuY3VydmFscy5jcm9wX3gpCiAgICAgICAgLmNoYW5nZShzY2hlZHVsZVVwZGF0ZVcoY3JvcF9ob2xkZXJzWzBdKSk7CiAgICAgICQoJyNyYW5nZV9jcm9wX3knKQogICAgICAgIC52YWwoY29uZmlnLmN1cnZhbHMuY3JvcF95KQogICAgICAgIC5jaGFuZ2Uoc2NoZWR1bGVVcGRhdGVXKGNyb3BfaG9sZGVyc1sxXSkpOwogICAgfSBlbHNlIHsKICAgICAgJCgnI2Nyb3BfaG9zdCcpLmhpZGUoKQogICAgfQogICAgJCgnI3JhbmdlX3F1YWxpdHknKQogICAgICAudmFsKGNvbmZpZy5jdXJ2YWxzLnF1YWxpdHkpCiAgICAgIC5jaGFuZ2Uoc2NoZWR1bGVVcGRhdGVXKHF1YWxpdHlfaG9sZGVyKSk7CgogICAgaWYgKGNvbmZpZy5jdXJ2YWxzLmV4cG9zdXJlICE9IHVuZGVmaW5lZCkgewogICAgICAkKCcjcmFuZ2VfZXhwb3N1cmUnKQogICAgICAgIC5hdHRyKCdtaW4nLDApCiAgICAgICAgLmF0dHIoJ21heCcsY29uZmlnLmF2YWlsLmV4cG9zdXJlLmxlbmd0aC0xKQogICAgICAgIC52YWwoY29uZmlnLmF2YWlsLmV4cG9zdXJlLmluZGV4T2YoY29uZmlnLmN1cnZhbHMuZXhwb3N1cmUpKQogICAgICAgIC5jaGFuZ2Uoc2NoZWR1bGVVcGRhdGVXKGV4cG9zdXJlX2hvbGRlcikpCiAgICAgIGV4cG9zdXJlX2hvbGRlci51cGQoZXhwb3N1cmVfaG9sZGVyLnZhbCgpKQogICAgfSBlbHNlIHsKICAgICAgJCgnI2V4cG9zdXJlX2hvc3QnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpOwogICAgfQoKCiAgICBpZiAoY29uZmlnLmN1cnZhbHMuZm9jdXNfZGlzdGFuY2UgIT0gdW5kZWZpbmVkICYmIGNvbmZpZy5hdmFpbC5mb2N1c19kaXN0YW5jZS5sZW5ndGggPj0gMikgewogICAgICB2YXIgYXZhaWwgPSBjb25maWcuYXZhaWwuZm9jdXNfZGlzdGFuY2UKICAgICAgdmFyIG1pblZhbCA9IE1hdGguY2VpbChhdmFpbFswXSkgKiAxMDAKICAgICAgdmFyIG1heFZhbCA9IE1hdGguY2VpbChhdmFpbFthdmFpbC5sZW5ndGgtMV0pICogMTAwCiAgICAgIHZhciBjdXJWYWwgPSBNYXRoLmNlaWwoY29uZmlnLmN1cnZhbHMuZm9jdXNfZGlzdGFuY2UpICogMTAwCiAgICAgICQoJyNyYW5nZV9mb2N1c19kaXN0YW5jZScpCiAgICAgICAgLmF0dHIoJ21pbicsbWluVmFsKQogICAgICAgIC5hdHRyKCdtYXgnLG1heFZhbCkKICAgICAgICAudmFsKGN1clZhbCkKICAgICAgICAuY2hhbmdlKHNjaGVkdWxlVXBkYXRlVyhmb2N1c19kaXN0YW5jZV9ob2xkZXIpKQogICAgICBmb2N1c19kaXN0YW5jZV9ob2xkZXIudXBkKGZvY3VzX2Rpc3RhbmNlX2hvbGRlci52YWwoKSkKICAgIH0gZWxzZSB7CiAgICAgICQoJyNmb2N1c19kaXN0YW5jZV9ob3N0JykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsKICAgIH0KCiAgICBpZiAoY29uZmlnLmN1cnZhbHMuaXNvICE9IHVuZGVmaW5lZCAmJiBjb25maWcuYXZhaWwuaXNvLmxlbmd0aCA+PSAyKSB7CiAgICAgIHZhciBhdmFpbCA9IGNvbmZpZy5hdmFpbC5pc28KICAgICAgdmFyIG1pblZhbCA9IE1hdGguY2VpbChhdmFpbFswXSkKICAgICAgdmFyIG1heFZhbCA9IE1hdGguY2VpbChhdmFpbFthdmFpbC5sZW5ndGgtMV0pCiAgICAgIHZhciBjdXJWYWwgPSBNYXRoLmNlaWwoY29uZmlnLmN1cnZhbHMuaXNvKQogICAgICAkKCcjcmFuZ2VfaXNvJykKICAgICAgICAuYXR0cignbWluJyxtaW5WYWwpCiAgICAgICAgLmF0dHIoJ21heCcsbWF4VmFsKQogICAgICAgIC52YWwoY3VyVmFsKQogICAgICAgIC5jaGFuZ2Uoc2NoZWR1bGVVcGRhdGVXKGlzb19ob2xkZXIpKQogICAgICBpc29faG9sZGVyLnVwZChpc29faG9sZGVyLnZhbCgpKQogICAgfSBlbHNlIHsKICAgICAgJCgnI2lzb19ob3N0JykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsKICAgIH0KCiAgICBpZiAoY29uZmlnLmN1cnZhbHMuZXhwb3N1cmVfbnMgIT0gdW5kZWZpbmVkICYmIGNvbmZpZy5hdmFpbC5leHBvc3VyZV9ucy5sZW5ndGggPj0gMikgewogICAgICB2YXIgYXZhaWwgPSBjb25maWcuYXZhaWwuZXhwb3N1cmVfbnMKICAgICAgdmFyIG1pblZhbCA9IE1hdGguY2VpbChhdmFpbFswXSkKICAgICAgdmFyIG1heFZhbCA9IE1hdGguY2VpbChhdmFpbFthdmFpbC5sZW5ndGgtMV0pCiAgICAgIHZhciBjdXJWYWwgPSBNYXRoLmNlaWwoY29uZmlnLmN1cnZhbHMuZXhwb3N1cmVfbnMpCiAgICAgICQoJyNyYW5nZV9leHBvc3VyZV9ucycpCiAgICAgICAgLmF0dHIoJ21pbicsbWluVmFsKQogICAgICAgIC5hdHRyKCdtYXgnLG1heFZhbCkKICAgICAgICAudmFsKGN1clZhbCkKICAgICAgICAuY2hhbmdlKHNjaGVkdWxlVXBkYXRlVyhleHBvc3VyZV9uc19ob2xkZXIpKQogICAgICBleHBvc3VyZV9uc19ob2xkZXIudXBkKGV4cG9zdXJlX25zX2hvbGRlci52YWwoKSkKICAgIH0gZWxzZSB7CiAgICAgICQoJyNleHBvc3VyZV9uc19ob3N0JykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsKICAgIH0KCiAgICBpZiAoY29uZmlnLmN1cnZhbHMuZnJhbWVfZHVyYXRpb24gIT0gdW5kZWZpbmVkICYmIGNvbmZpZy5hdmFpbC5mcmFtZV9kdXJhdGlvbi5sZW5ndGggPj0gMikgewogICAgICB2YXIgYXZhaWwgPSBjb25maWcuYXZhaWwuZnJhbWVfZHVyYXRpb24KICAgICAgdmFyIG1pblZhbCA9IE1hdGguY2VpbChhdmFpbFswXSkKICAgICAgdmFyIG1heFZhbCA9IE1hdGguY2VpbChhdmFpbFthdmFpbC5sZW5ndGgtMV0pCiAgICAgIHZhciBjdXJWYWwgPSBNYXRoLmNlaWwoY29uZmlnLmN1cnZhbHMuZnJhbWVfZHVyYXRpb24pCiAgICAgICQoJyNyYW5nZV9mcmFtZV9kdXJhdGlvbicpCiAgICAgICAgLmF0dHIoJ21pbicsbWluVmFsKQogICAgICAgIC5hdHRyKCdtYXgnLG1heFZhbCkKICAgICAgICAudmFsKGN1clZhbCkKICAgICAgICAuY2hhbmdlKHNjaGVkdWxlVXBkYXRlVyhmcmFtZV9kdXJhdGlvbl9ob2xkZXIpKQogICAgICBmcmFtZV9kdXJhdGlvbl9ob2xkZXIudXBkKGZyYW1lX2R1cmF0aW9uX2hvbGRlci52YWwoKSkKICAgIH0gZWxzZSB7CiAgICAgICQoJyNmcmFtZV9kdXJhdGlvbl9ob3N0JykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsKICAgIH0KCgoKICAgICQoJyNyYW5nZV9tb3Rpb25fbGltaXQnKQogICAgICAudmFsKGNvbmZpZy5jdXJ2YWxzLm1vdGlvbl9saW1pdCkKICAgICAgLmNoYW5nZShzY2hlZHVsZVVwZGF0ZVcobW9saW1pdF9ob2xkZXIpKQogICAgCiAgICAkKCcjcmFuZ2VfbmlnaHR2aXNpb25fZ2FpbicpCiAgICAgIC52YWwoTWF0aC5yb3VuZChjb25maWcuY3VydmFscy5uaWdodF92aXNpb25fZ2FpbiAqIDQpKQogICAgICAuY2hhbmdlKHNjaGVkdWxlVXBkYXRlVyhudmdhaW5faG9sZGVyKSkKICAgIG52Z2Fpbl9ob2xkZXIudXBkKG52Z2Fpbl9ob2xkZXIudmFsKCkpCiAgICAkKCcjc2V0X252Z18xJykuY2xpY2soZnVuY3Rpb24oKSB7CiAgICAgICQoJyNyYW5nZV9uaWdodHZpc2lvbl9nYWluJykudmFsKDQpCiAgICAgIHNjaGVkdWxlVXBkYXRlKG52Z2Fpbl9ob2xkZXIpOwogICAgfSkKCgogICAgJCgnI3JhbmdlX25pZ2h0dmlzaW9uX2F2ZXJhZ2UnKQogICAgICAudmFsKGNvbmZpZy5jdXJ2YWxzLm5pZ2h0X3Zpc2lvbl9hdmVyYWdlKQogICAgICAuY2hhbmdlKHNjaGVkdWxlVXBkYXRlVyhudmF2Z19ob2xkZXIpKQogICAgbnZhdmdfaG9sZGVyLnVwZChudmF2Z19ob2xkZXIudmFsKCkpCiAgICAkKCcjc2V0X2F2Z18yJykuY2xpY2soZnVuY3Rpb24oKSB7CiAgICAgICQoJyNyYW5nZV9uaWdodHZpc2lvbl9hdmVyYWdlJykudmFsKDIpCiAgICAgIHNjaGVkdWxlVXBkYXRlKG52YXZnX2hvbGRlcik7CiAgICB9KQoKICAgIAogICAgdmFyIHNlbGVjdENmZyA9IFsncGhvdG9fc2l6ZScsICd2aWRlb19zaXplJywgJ29yaWVudGF0aW9uJywgJ21pcnJvcl9mbGlwJywgJ2ZsYXNobW9kZScsJ2ZvY3VzbW9kZScsJ3NjZW5lbW9kZScsCiAgICAnd2hpdGViYWxhbmNlJywnY29sb3JlZmZlY3QnLCdhbnRpYmFuZGluZycsICdleHBvc3VyZV9sb2NrJywgJ3doaXRlYmFsYW5jZV9sb2NrJywgJ21hbnVhbF9zZW5zb3InLCJhcGVydHVyZSIsICJmaWx0ZXJfZGVuc2l0eSJdCgogICAgZm9yICh2YXIgaSA9IDA7IGk8c2VsZWN0Q2ZnLmxlbmd0aDsgKytpKSB7CiAgICAgIHZhciB2ID0gc2VsZWN0Q2ZnW2ldOwogICAgICBpZiAoY29uZmlnLmF2YWlsW3ZdICE9IHVuZGVmaW5lZCkgewogICAgICAgIHNldHVwU3dpdGNoKHYsIGNvbmZpZy5hdmFpbFt2XSwgY29uZmlnLmN1cnZhbHNbdl0sIHJvb3QrJy9zZXR0aW5ncy8nK3YrJz9zZXQ9JywgWydwaG90b19zaXplJywgJ3ZpZGVvX3NpemUnLCAiYXBlcnR1cmUiLCAiZmlsdGVyX2RlbnNpdHkiXS5pbmRleE9mKHYpICE9IC0xKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAkKCcjJyt2KydfaG9sZGVyJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsKICAgICAgfQogICAgfQogICAgCiAgICAkKCIjbW9kZXRfdG9nZ2xlIikuY2xpY2soZnVuY3Rpb24oKSB7CiAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdhY3RpdmUnKSkgewogICAgICAgICQuYWpheChyb290Kycvc2V0dGluZ3MvbW90aW9uX2RldGVjdD9zZXQ9b2ZmJykKICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKQogICAgICB9IGVsc2UgewogICAgICAgICQuYWpheChyb290Kycvc2V0dGluZ3MvbW90aW9uX2RldGVjdD9zZXQ9b24nKQogICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpCiAgICAgIH0KICAgIH0pCiAgICBpZiAoY29uZmlnLmN1cnZhbHMubW90aW9uX2RldGVjdCA9PSAnb24nKSB7CiAgICAgICQoIiNtb2RldF90b2dnbGUiKS5hZGRDbGFzcygnYWN0aXZlJykKICAgIH0KCiAgICAkKCIjbW90aW9uX2Rpc3BsYXkiKS5jbGljayhmdW5jdGlvbigpIHsKICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7CiAgICAgICAgJC5hamF4KHJvb3QrJy9zZXR0aW5ncy9tb3Rpb25fZGlzcGxheT9zZXQ9b2ZmJykKICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKQogICAgICB9IGVsc2UgewogICAgICAgICQuYWpheChyb290Kycvc2V0dGluZ3MvbW90aW9uX2Rpc3BsYXk/c2V0PW9uJykKICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKQogICAgICB9CiAgICB9KQogICAgaWYgKGNvbmZpZy5jdXJ2YWxzLm1vdGlvbl9kaXNwbGF5ID09ICdvbicpIHsKICAgICAgJCgiI21vdGlvbl9kaXNwbGF5IikuYWRkQ2xhc3MoJ2FjdGl2ZScpCiAgICB9CgoKICAgIGlmIChjb25maWcuYXZhaWwuZmZjICE9IHVuZGVmaW5lZCkgewogICAgICBpZiAoY29uZmlnLmF2YWlsLmZmY1swXSA9PSBub19zdXBwb3J0KSB7CiAgICAgICAgJCgnI2ZmY19mb3JtJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChjb25maWcuYXZhaWwuZmZjLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAkKCcjZmZjX3Jlc191bnN1cHBvcnRlZCcpLmNzcygnZGlzcGxheScsICcnKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBnbG9iYWwuZmZjX2VuYWJsZWQgPSAoY29uZmlnLmN1cnZhbHMuZmZjID09ICdvbicpCiAgICAgICAgICB1cGRhdGVGZmNQaWNzKGdsb2JhbC5mZmNfZW5hYmxlZCk7CiAgICAgICAgICAkKCcjZmZjYnRuJykuY3NzKCdkaXNwbGF5JywgJycpCiAgICAgICAgICAkKCcjZmZjYnRuJykKICAgICAgICAgICAgLmNsaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIGdsb2JhbC5mZmNfZW5hYmxlZCA9ICFnbG9iYWwuZmZjX2VuYWJsZWQ7CiAgICAgICAgICAgICAgdXBkYXRlRmZjUGljcyhnbG9iYWwuZmZjX2VuYWJsZWQpCiAgICAgICAgICAgICAgJC5hamF4KHJvb3QrJy9zZXR0aW5ncy9mZmM/c2V0PScgKyAoZ2xvYmFsLmZmY19lbmFibGVkID8gIm9uIiA6ICJvZmYiKSkKICAgICAgICAgICAgICAgLmZhaWwoZGlzcGxheV9lcnJvcignY2Fubm90X3NldCcsICdmZmMnKSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcXVhbGl0eV9ob2xkZXIudXBkKHF1YWxpdHlfaG9sZGVyLnZhbCgpKTsKCiAgICB1cGRhdGVWaWRlb0luZm8oY29uZmlnLnZpZGVvX3N0YXR1cyk7CiAgICBzY2hlZHVsZVRpbWVvdXQodmlkZW9UaW1lb3V0KTsKCiAgICAvLyQoJyNmb2N1c2J0bicpLmhpZGUoKQogIH0KCiAgZnVuY3Rpb24gd3JpdGVVVEZCeXRlcyh2aWV3LCBvZmZzZXQsIHN0cmluZyl7IAogICAgdmFyIGxuZyA9IHN0cmluZy5sZW5ndGg7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxuZzsgaSsrKSB7CiAgICAgIHZpZXcuc2V0VWludDgob2Zmc2V0ICsgaSwgc3RyaW5nLmNoYXJDb2RlQXQoaSkpOwogICAgfQogIH0KCiAgdmFyIHdhdkhlYWRlciA9IGZ1bmN0aW9uKHNhbXBsZVJhdGUpIHsKCiAgICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoNDQpOwogICAgICB2YXIgdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpOwogICAgICB3cml0ZVVURkJ5dGVzKHZpZXcsIDAsICdSSUZGJyk7CiAgICAgIHZpZXcuc2V0VWludDMyKDQsIDB4ZmZmZmZmZmYsIHRydWUpOwogICAgICB3cml0ZVVURkJ5dGVzKHZpZXcsIDgsICdXQVZFJyk7CiAgICAgIHdyaXRlVVRGQnl0ZXModmlldywgMTIsICdmbXQgJyk7CiAgICAgIHZpZXcuc2V0VWludDMyKDE2LCAxNiwgdHJ1ZSk7CiAgICAgIHZpZXcuc2V0VWludDE2KDIwLCAxLCB0cnVlKTsKICAgICAgdmlldy5zZXRVaW50MTYoMjIsIDEsIHRydWUpOwogICAgICB2aWV3LnNldFVpbnQzMigyNCwgc2FtcGxlUmF0ZSwgdHJ1ZSk7CiAgICAgIHZpZXcuc2V0VWludDMyKDI4LCBzYW1wbGVSYXRlICogMiwgdHJ1ZSk7CiAgICAgIHZpZXcuc2V0VWludDE2KDMyLCAyLCB0cnVlKTsKICAgICAgdmlldy5zZXRVaW50MTYoMzQsIDE2LCB0cnVlKTsKICAgICAgd3JpdGVVVEZCeXRlcyh2aWV3LCAzNiwgJ2RhdGEnKTsKICAgICAgdmlldy5zZXRVaW50MzIoNDAsIDB4ZmZmZmZmZmYsIHRydWUpOwogICAgICByZXR1cm4gYnVmZmVyCiAgfQoKICB2YXIgdHdhQ29ubmVjdFdlYnNvY2tldCA9IGZ1bmN0aW9uKCkgewogICAgICBpZiAodHdhV2Vic29ja2V0KSB7CiAgICAgICAgICBpZiAodHdhV2Vic29ja2V0LnJlYWR5U3RhdGUgPT0gMSkgewogICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgfQogICAgICAgICAgdHdhV2Vic29ja2V0Lm9uY2xvc2UgPSB1bmRlZmluZWQKICAgICAgICAgIHR3YVdlYnNvY2tldC5jbG9zZSgpCiAgICAgICAgICB0d2FXZWJzb2NrZXQgPSBudWxsCiAgICAgIH0KICAgICAgdmFyIHdlYnNvY2tldEhvc3QgPSB3aW5kb3cubG9jYXRpb24uaG9zdCArIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKCJncmVldC5odG1sIiwnJykuc3Vic3RyKDEpCiAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT0gImV4YW1wbGUuY29tIikgewogICAgICAgIHdlYnNvY2tldEhvc3QgPSBleGFtcGxlRG9tYWluCiAgICAgIH0KICAgICAgdmFyIHdzUHJvdG8gPSAnd3M6Ly8nCiAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wudG9Mb3dlckNhc2UoKSA9PSAnaHR0cHM6JykgewogICAgICAgIHdzUHJvdG8gPSAnd3NzOi8vJwogICAgICB9CiAgICAgIHR3YVdlYnNvY2tldCA9IG5ldyBXZWJTb2NrZXQod3NQcm90byt3ZWJzb2NrZXRIb3N0KycvYXVkaW9pbi53YXYnKQogICAgICB0d2FXZWJzb2NrZXQud3JvdGVXYXZIZWFkZXIgPSBmYWxzZQogICAgICB0d2FXZWJzb2NrZXQub25vcGVuID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICB0d2FJbml0KCkKICAgICAgfQogICAgICB0d2FXZWJzb2NrZXQub25jbG9zZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgdHdhV2Vic29ja2V0ID0gbnVsbAogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgJCgnI3R3YVN3aXRjaCcpLmF0dHIoJ2NoZWNrZWQnLCBmYWxzZSkKICAgICAgICAgIH0sIDUwMCkKICAgICAgICAgICQoJyN3YXJuX2Rlc2MnKS50ZXh0KCJXZWJzb2NrZXQgZGlzY29ubmVjdGVkIik7CiAgICAgICAgICAkKCcjd2Fybl9jYXVzZScpLnRleHQoIlR3by13YXkgYXVkaW8gZXJyb3IiKTsKICAgICAgICAgICQoJyN3YXJuX2RpdicpLnNob3coKTsKICAgICAgfQogIH0KICB2YXIgdHdhU291bmRBbGxvd2VkID0gZnVuY3Rpb24gKHN0cmVhbSkgewogICAgICB0d2FNaWNTdHJlYW0gPSBzdHJlYW07CiAgICAgIHdpbmRvdy5wZXJzaXN0QXVkaW9TdHJlYW0gPSBzdHJlYW07CiAgICAgIHdzQXVkaW9DdHggPSBuZXcgQXVkaW9Db250ZXh0KCk7CgogICAgICBtaWNTdHJlYW0gPSB3c0F1ZGlvQ3R4LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKHN0cmVhbSk7CiAgICAgIHZhciBzY3JpcHROb2RlID0gd3NBdWRpb0N0eC5jcmVhdGVTY3JpcHRQcm9jZXNzb3IoNDA5NiwgMSwgMSk7CiAgICAgIHNjcmlwdE5vZGUub25hdWRpb3Byb2Nlc3MgPSBmdW5jdGlvbihhdWRpb1Byb2Nlc3NpbmdFdmVudCkgewogICAgICAgICAgaWYgKCF0d2FQcmVzc2VkKSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCF0d2FXZWJzb2NrZXQpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgaW5wdXRCdWZmZXIgPSBhdWRpb1Byb2Nlc3NpbmdFdmVudC5pbnB1dEJ1ZmZlcjsKICAgICAgICAgIHZhciBpbkRhdGEgPSBpbnB1dEJ1ZmZlci5nZXRDaGFubmVsRGF0YSgwKTsKICAgICAgICAgIGlmICghdHdhV2Vic29ja2V0Lndyb3RlV2F2SGVhZGVyKSB7CiAgICAgICAgICAgICAgdHdhV2Vic29ja2V0Lndyb3RlV2F2SGVhZGVyID0gdHJ1ZTsKICAgICAgICAgICAgICB0d2FXZWJzb2NrZXQuc2VuZCh3YXZIZWFkZXIod3NBdWRpb0N0eC5zYW1wbGVSYXRlKSkKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0d2FXZWJzb2NrZXQgJiYgdHdhV2Vic29ja2V0LnJlYWR5U3RhdGUgPT0gMSkgewogICAgICAgICAgICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoaW5EYXRhLmxlbmd0aCAqIDIpOwogICAgICAgICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7CgogICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpPGluRGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICB2aWV3LnNldEludDE2KGkgKiAyLCAweDdmZmUgKiBpbkRhdGFbaV0sIHRydWUpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHR3YVdlYnNvY2tldC5zZW5kKGJ1ZmZlcikKICAgICAgICAgIH0KICAgICAgfQogICAgICBtaWNTdHJlYW0uY29ubmVjdChzY3JpcHROb2RlKQogICAgICBzY3JpcHROb2RlLmNvbm5lY3Qod3NBdWRpb0N0eC5kZXN0aW5hdGlvbik7CiAgICAgICQoJyN0d2FCbGluaycpLnNob3coKTsKICAgICAgaWYgKCF0d2FQcmVzc2VkKSB7CiAgICAgICAgICB0d2FTdG9wKCk7CiAgICAgIH0KICB9CiAgdmFyIHR3YUluaXQgPSBmdW5jdGlvbihzdWNjZXNzRnVuYykgewogICAgICAidXNlIHN0cmljdCI7CiAgICAgIC8qaWYgKHR3YU1pY1N0cmVhbSkgewogICAgICAgICAgcmV0dXJuIHR3YVNvdW5kQWxsb3dlZCh0d2FNaWNTdHJlYW0pCiAgICAgIH0qLwoKICAgICAgdmFyIHNvdW5kTm90QWxsb3dlZCA9IGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgJCgnI2Jsb2NrZWRfbWljX2V4cGxhaW4nKS5zaG93KCk7CiAgICAgICAgICAkKCcjdHJ5X2h0dHBzJykuc2hvdygpOwogICAgICAgICAgJCgnI3RyeV9odHRwcycpLmNsaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgbXlfdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWYudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCJodHRwOiIsImh0dHBzOiIpCiAgICAgICAgICAgICQoJyNodHRwc190YXJnZXQnKS5hdHRyKCdocmVmJywgbXlfdXJsKS50ZXh0KG15X3VybCkKICAgICAgICAgICAgJCgnI2V4cGxhaW5faHR0cHMnKS5tb2RhbCgpOwogICAgICAgICAgfSk7CiAgICAgICAgICAkKCcjdHdhQmxpbmsnKS5oaWRlKCk7CiAgICAgICAgICAkKCcjdHdhU3dpdGNoJykuYXR0cignY2hlY2tlZCcsIGZhbHNlKQogICAgICB9CgogICAgICB2YXIgbmF2aWdhdG9yID0gbmF2aWdhdG9yIHx8IHdpbmRvdy5uYXZpZ2F0b3I7CiAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSAgICAgICB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhICAgIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsOwogICAgICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhKHthdWRpbzp0cnVlfSwgdHdhU291bmRBbGxvd2VkLCBzb3VuZE5vdEFsbG93ZWQpOwogIH0KICB2YXIgdHdhU3RhcnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghdHdhV2Vic29ja2V0KSB7CiAgICAgICAgICByZXR1cm4gdHdhQ29ubmVjdFdlYnNvY2tldCgpCiAgICAgIH0KICAgICAgaWYgKHR3YVdlYnNvY2tldC5yZWFkeVN0YXRlID09IDEpIHsKICAgICAgICAgIHR3YUluaXQoKQogICAgICB9CiAgfTsKCiAgdmFyIHR3YVN0b3AgPSBmdW5jdGlvbigpIHsKICAgICAgJCgnI3R3YUJsaW5rJykuaGlkZSgpOwogICAgICAkKCcjdHdhU3dpdGNoJykuYXR0cignY2hlY2tlZCcsIGZhbHNlKQogICAgICBpZiAodHdhV2Vic29ja2V0KSB7CiAgICAgICAgdHdhV2Vic29ja2V0Lm9uY2xvc2UgPSB1bmRlZmluZWQKICAgICAgICB0d2FXZWJzb2NrZXQuY2xvc2UoKQogICAgICAgIHR3YVdlYnNvY2tldCA9IG51bGwKICAgICAgfQogICAgICBpZiAod3NBdWRpb0N0eCkgewogICAgICAgICAgd3NBdWRpb0N0eC5zdXNwZW5kKCkKICAgICAgICAgIHR3YU1pY1N0cmVhbS5nZXRUcmFja3MoKVswXS5zdG9wKCkKICAgICAgfQogIH0KCgoKICB2YXIgdXBkYXRlRmZjUGljcyA9IGZ1bmN0aW9uKGZmY19lbmFibGVkKSB7CiAgICB2YXIgcGljMSA9ICdpY19zd2l0Y2hfY2FtZXJhX2JhY2tfbm9ybWFsLnBuZyc7CiAgICB2YXIgcGljMiA9ICdpY19zd2l0Y2hfY2FtZXJhX2Zyb250X25vcm1hbC5wbmcnOwogICAgaWYgKGZmY19lbmFibGVkKSB7CiAgICAgIHZhciBwaWMzID0gcGljMjsKICAgICAgcGljMiA9IHBpYzE7CiAgICAgIHBpYzEgPSBwaWMzOwogICAgfQogICAgJCgnI2ltZ19mZmNfY3VycmVudCcpLmF0dHIoJ3NyYycsIHBpYzEpCiAgICAkKCcjaW1nX2ZmY19hbHQnKS5hdHRyKCdzcmMnLCBwaWMyKQogIH0KICAKICB2YXIgb25BdWRpb01vZGVDaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgIHZhciBtb2RlID0gJCh0aGlzKS52YWwoKQogICAgaWYgKG1vZGUgIT0gYXVkaW9Nb2RlKSB7CiAgICAgIGF1ZGlvRGVzdHJveSgpOwogICAgICBhdWRpb01vZGUgPSBtb2RlOwogICAgICBhdWRpb0NyZWF0ZSgpOwogICAgfQogIH0KCiAgdmFyIGF1ZGlvQ3JlYXRlID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoYXVkaW9Nb2RlID09ICdvZmYnKSB7CgogICAgfSBlbHNlIGlmIChhdWRpb01vZGUgPT0gJ2ZsYXNoJykgewogICAgICB2YXIgdXJsID0gJy92aWRlbyc7CiAgICAgIHZhciBzd2ZWZXJzaW9uU3RyID0gIjExLjEuMCI7CiAgICAgIHZhciB4aVN3ZlVybFN0ciA9ICJwbGF5ZXJQcm9kdWN0SW5zdGFsbC5zd2YiOwogICAgICB2YXIgbW9kZSA9ICJBYXQiCiAgICAgICQoJyNhdWRpb19wYW5lJykuYXBwZW5kKCQoJzxkaXYgaWQ9ImZsYXNoX2F1ZGlvIiBjbGFzcz0iZmxhc2gtYXVkaW8iPjwvZGl2PicpKQogICAgICB2YXIgd3dpZHRoID0gJCgnI2ZsYXNoX2F1ZGlvJykud2lkdGgoKTsKICAgICAgdmFyIHdoZWlnaHQgPSAkKCcjZmxhc2hfYXVkaW8nKS5oZWlnaHQoKTsKICAgICAgdmFyIGZsYXNodmFycyA9IHsnY3ZpZGVvJzogdXJsLCAndmlkZW8nOihteV91cmwoKSArICcvdmlkZW80Zmxhc2gnKSwgJ2F1ZGlvJzoobXlfdXJsKCkgKyAnL2F1ZGlvLndhdicpLCAndHdhJzoobXlfdXJsKCkgKyAnL2F1ZGlvaW4uYWxhdycpLCAnbW9kZSc6bW9kZSwgJ3d3aWR0aCc6IHd3aWR0aCwgJ3doZWlnaHQnOiB3aGVpZ2h0LCAnZGVidWcnOnRydWV9OwogICAgICB2YXIgcGFyYW1zID0ge307CiAgICAgIHBhcmFtcy5xdWFsaXR5ID0gImhpZ2giOwogICAgICBwYXJhbXMuYmdjb2xvciA9ICIjY2NjY2NjIjsKICAgICAgcGFyYW1zLmFsbG93c2NyaXB0YWNjZXNzID0gImFsd2F5cyI7CiAgICAgIHBhcmFtcy5hbGxvd2Z1bGxzY3JlZW4gPSAidHJ1ZSI7CiAgICAgIHZhciBhdHRyaWJ1dGVzID0ge307CiAgICAgIGF0dHJpYnV0ZXMuaWQgPSAiZmxhc2hfYXVkaW9fb2JqIjsKICAgICAgYXR0cmlidXRlcy5uYW1lID0gImZsYXNoX2F1ZGlvX29iaiI7CiAgICAgIC8qaWYgKCFhbHRyZW5kZXJlcikgewogICAgICAgIGF0dHJpYnV0ZXMuYWxpZ24gPSAibWlkZGxlIjsKICAgICAgfSBlbHNlIHsKICAgICAgICBhdHRyaWJ1dGVzLnN0eWxlID0gInBvc2l0aW9uOiBhYnNvbHV0ZTsiOwogICAgICB9Ki8KICAgICAgdmFyIGVtYmVkSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7IGZsYXNoX3JlbmRlcmVyID0gZS5yZWY7IH0KICAgICAgc3dmb2JqZWN0LmVtYmVkU1dGKAogICAgICAgICJtanAuc3dmIiwgImZsYXNoX2F1ZGlvIiwgCiAgICAgICAgd3dpZHRoLCB3aGVpZ2h0LCAKICAgICAgICBzd2ZWZXJzaW9uU3RyLCB4aVN3ZlVybFN0ciwgCiAgICAgICAgZmxhc2h2YXJzLCBwYXJhbXMsIGF0dHJpYnV0ZXMsIGVtYmVkSGFuZGxlcik7CiAgICAgIC8vIEphdmFTY3JpcHQgZW5hYmxlZCBzbyBkaXNwbGF5IHRoZSBmbGFzaF9hdWRpbyBkaXYgaW4gY2FzZSBpdCBpcyBub3QgcmVwbGFjZWQgd2l0aCBhIHN3ZiBvYmplY3QuCiAgICAgIHN3Zm9iamVjdC5jcmVhdGVDU1MoIiNmbGFzaF9hdWRpbyIsICJkaXNwbGF5OmJsb2NrO3RleHQtYWxpZ246bGVmdDsiKTsKICAgIH0gZWxzZSBpZiAoYXVkaW9Nb2RlID09ICdodG1sNV93YXYnKSB7CiAgICAgICQoJyNhdWRpb19wYW5lJykuYXBwZW5kKCQoJzxhdWRpbyBpZD0iaHRtbDVfYXVkaW8iIGNvbnRyb2xzPjxzb3VyY2Ugc3JjPSInK3Jvb3QrJy9hdWRpby53YXYiIHR5cGU9ImF1ZGlvL3dhdiIvPjwvYXVkaW8+JykpOwogICAgICAkKCcjaHRtbDVfYXVkaW8nKVswXS5wbGF5KCk7CiAgICB9IGVsc2UgaWYgKGF1ZGlvTW9kZSA9PSAnaHRtbDVfb3B1cycpIHsKICAgICAgJCgnI2F1ZGlvX3BhbmUnKS5hcHBlbmQoJCgnPGF1ZGlvIGlkPSJodG1sNV9hdWRpbyIgY29udHJvbHM+PHNvdXJjZSBzcmM9Iicrcm9vdCsnL2F1ZGlvLm9wdXMiIHR5cGU9XCdhdWRpby9vZ2c7IGNvZGVjcz0ib3B1cyJcJy8+PC9hdWRpbz4nKSk7CiAgICAgICQoJyNodG1sNV9hdWRpbycpWzBdLnBsYXkoKTsKICAgIH0KICB9CgogIHZhciBhdWRpb0Rlc3Ryb3kgPSBmdW5jdGlvbigpIHsKICAgIGlmIChhdWRpb01vZGUgPT0gJ29mZicpIHsKICAgICAgLy8gRG8gbm90aGluZwogICAgfSBlbHNlIGlmIChhdWRpb01vZGUgPT0gJ2ZsYXNoJykgewogICAgICAkKCcjZmxhc2hfYXVkaW8nKS5yZW1vdmUoKTsKICAgICAgJCgnI2ZsYXNoX2F1ZGlvX29iaicpLnJlbW92ZSgpOwogICAgfSBlbHNlIGlmIChhdWRpb01vZGUgPT0gJ2h0bWw1X3dhdicpIHsKICAgICAgJCgnI2h0bWw1X2F1ZGlvJykucmVtb3ZlKCk7CiAgICB9IGVsc2UgaWYgKGF1ZGlvTW9kZSA9PSAnaHRtbDVfb3B1cycpIHsKICAgICAgJCgnI2h0bWw1X2F1ZGlvJykucmVtb3ZlKCk7CiAgICB9CiAgfQoKICB2YXIgdmlkZW9EZXN0cm95ID0gZnVuY3Rpb24gKCkgewogICAgaWYgKHZpZGVvTW9kZSA9PSAnb2ZmJykgewogICAgICAvLyBEbyBub3RoaW5nCiAgICB9IGVsc2UgaWYgKHZpZGVvTW9kZSA9PSAiZmxhc2giKSB7CiAgICAgICQoJyNmbGFzaF92aWRlbycpLnJlbW92ZSgpOwogICAgICAkKCcjZmxhc2hfdmlkZW9fb2JqJykucmVtb3ZlKCk7CiAgICB9IGVsc2UgaWYgKHZpZGVvTW9kZSA9PSAiYnJvd3NlciIpIHsKICAgICAgJCgnI2Jyb3dzZXJfdmlkZW8nKS5hdHRyKCdzcmMnLCcnKQogICAgICAkKCcjYnJvd3Nlcl92aWRlbycpLnJlbW92ZSgpOwogICAgfSBlbHNlIGlmICh2aWRlb01vZGUgPT0gImphdmEiKSB7CiAgICAgICQoJyNqYXZhX3ZpZGVvJykucmVtb3ZlKCk7CiAgICB9IGVsc2UgaWYgKHZpZGVvTW9kZSA9PSAianMiKSB7CiAgICAgICQoJyNpbWcxJykucmVtb3ZlKCkKICAgICAgJCgnI2ltZzInKS5yZW1vdmUoKQogICAgICBqc1VwZGF0ZSA9IGZhbHNlOwogICAgICB3b3JraW5nID0gbnVsbDsKICAgICAgc2hvd2luZyA9IG51bGw7CiAgICB9CiAgfQoKICB2YXIgbXlfdXJsID0gZnVuY3Rpb24gKCkgewogICAgaWYgKHJvb3QgIT0gIiIpCiAgICAgIHJldHVybiByb290OwogICAgdmFyIHBvcnRfcGFydCA9ICI6IiArIHdpbmRvdy5sb2NhdGlvbi5wb3J0OwogICAgaWYgKHBvcnRfcGFydCA9PSAiOjgwIikgewogICAgICAgIHBvcnRfcGFydCA9ICIiOwogICAgfQogICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICIvLyIgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyBwb3J0X3BhcnQ7CiAgfQoKICB2YXIganNMb2FkSW1hZ2UgPSBmdW5jdGlvbigpIHsKICAgIGlmICghanNVcGRhdGUpCiAgICAgIHJldHVybjsKCiAgICB2YXIgb2xkc2hvd2luZyA9IHNob3dpbmc7CiAgICBzaG93aW5nID0gd29ya2luZzsKICAgIHdvcmtpbmcgPSBvbGRzaG93aW5nOwogICAgc2hvd2luZy5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpCiAgICB3b3JraW5nLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKQoKICAgIHNob3dpbmcudW5iaW5kKCkKICAgIHdvcmtpbmcubG9hZChqc0xvYWRJbWFnZSk7CiAgICB3b3JraW5nLmF0dHIoInNyYyIsIHJvb3QgKyAiL2dldD9ybmQ9IitNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwMDAwMCkpOwogICAgaWYgKCFqc1NpemVPaykgewogICAgICBqc1NpemVPayA9IHRydWU7CiAgICAgICQoIiNpbWcyIikuY3NzKCdtYXJnaW4tdG9wJywgJy0nK3Nob3dpbmcuaGVpZ2h0KCkrJ3B4JykuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7CiAgICB9CiAgfQoKCiAgdmFyIHZpZGVvVGltZW91dCA9IHsKICAgIGlkOiAtMSwKICAgIHRpbWU6IDQwMDAsCiAgICB0aWNrOiBmdW5jdGlvbigpIHsKICAgICAgJC5hamF4KHJvb3QrJy92aWRlb3N0YXR1cycpCiAgICAgICAuZG9uZShmdW5jdGlvbiAoaW5mbykgewogICAgICAgICB1cGRhdGVWaWRlb0luZm8oaW5mbyk7CiAgICAgICAgIHNjaGVkdWxlVGltZW91dCh2aWRlb1RpbWVvdXQpCiAgICAgICB9KQogICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7CiAgICAgICAgIHNjaGVkdWxlVGltZW91dCh2aWRlb1RpbWVvdXQpCiAgICAgICB9KQogICAgfQogIH0KCiAgdmFyIHVwZGF0ZVZpZGVvSW5mbyA9IGZ1bmN0aW9uKGluZm8pIHsKCiAgICBpZiAoaW5mby5tb2RlID09ICJub25lIikgewogICAgICAkKCcjdmlkZW9fcmVjJykuY3NzKCdkaXNwbGF5Jywnbm9uZScpOwogICAgfSBlbHNlIGlmIChpbmZvLm1vZGUgPT0gIm5vdF9zdXBwb3J0ZWQiKSB7CiAgICAgICQoJyN2aWRlb19ob3N0MScpLmNzcygnZGlzcGxheScsJ25vbmUnKTsKICAgICAgJCgnI3ZpZGVvX2hvc3QyJykuY3NzKCdkaXNwbGF5Jywnbm9uZScpOwogICAgfSBlbHNlIHsKICAgICAgJCgnI3JlY19sb2NhdGlvbicpLnRleHQoaW5mby5mbmFtZSk7CiAgICAgICQoJyN2aWRlb19yZWMnKS5zaG93KCk7CiAgICB9CiAgfQoKICB2YXIgdmlkZW9DcmVhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAodmlkZW9Nb2RlID09ICdvZmYnKSB7CiAgICAgICQoIiN2aWRlb19wYW5lIikuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgJCgiI3ZpZGVvX3BhbmUiKS5jc3MoJ2Rpc3BsYXknLCAndGFibGUnKTsKICAgIGlmICh2aWRlb01vZGUgPT0gImZsYXNoIikgewogICAgICB2YXIgdXJsID0gJy92aWRlbyc7CiAgICAgIHZhciBzd2ZWZXJzaW9uU3RyID0gIjExLjEuMCI7CiAgICAgIHZhciB4aVN3ZlVybFN0ciA9ICJwbGF5ZXJQcm9kdWN0SW5zdGFsbC5zd2YiOwogICAgICB2YXIgbW9kZSA9ICJWYXQiCiAgICAgICQoJyN2aWRlb19wYW5lJykuYXBwZW5kKCQoJzxkaXYgaWQ9ImZsYXNoX3ZpZGVvIiBjbGFzcz0idmlkZW8tZGlzcGxheSI+PC9kaXY+JykpCiAgICAgIHZhciB3d2lkdGggPSAkKCcjZmxhc2hfdmlkZW8nKS53aWR0aCgpOwogICAgICB2YXIgd2hlaWdodCA9ICQoJyNmbGFzaF92aWRlbycpLmhlaWdodCgpOwogICAgICB2YXIgZmxhc2h2YXJzID0geydjdmlkZW8nOiB1cmwsICd2aWRlbyc6KG15X3VybCgpICsgJy92aWRlbzRmbGFzaCcpLCAnYXVkaW8nOihteV91cmwoKSArICcvYXVkaW8ud2F2JyksICd0d2EnOihteV91cmwoKSArICcvYXVkaW9pbi5hbGF3JyksICdtb2RlJzptb2RlLCAnd3dpZHRoJzogd3dpZHRoLCAnd2hlaWdodCc6IHdoZWlnaHQsICdkZWJ1Zyc6dHJ1ZX07CiAgICAgIHZhciBwYXJhbXMgPSB7fTsKICAgICAgcGFyYW1zLnF1YWxpdHkgPSAiaGlnaCI7CiAgICAgIHBhcmFtcy5iZ2NvbG9yID0gIiNjY2NjY2MiOwogICAgICBwYXJhbXMuYWxsb3dzY3JpcHRhY2Nlc3MgPSAiYWx3YXlzIjsKICAgICAgcGFyYW1zLmFsbG93ZnVsbHNjcmVlbiA9ICJ0cnVlIjsKICAgICAgdmFyIGF0dHJpYnV0ZXMgPSB7fTsKICAgICAgYXR0cmlidXRlcy5pZCA9ICJmbGFzaF92aWRlb19vYmoiOwogICAgICBhdHRyaWJ1dGVzLm5hbWUgPSAiZmxhc2hfdmlkZW9fb2JqIjsKICAgICAgYXR0cmlidXRlc1snY2xhc3MnXSA9ICJ2aWRlby1kaXNwbGF5IgogICAgICAvKmlmICghYWx0cmVuZGVyZXIpIHsKICAgICAgICBhdHRyaWJ1dGVzLmFsaWduID0gIm1pZGRsZSI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXR0cmlidXRlcy5zdHlsZSA9ICJwb3NpdGlvbjogYWJzb2x1dGU7IjsKICAgICAgfSovCiAgICAgIHZhciBlbWJlZEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkgeyBmbGFzaF9yZW5kZXJlciA9IGUucmVmOyB9CiAgICAgIHN3Zm9iamVjdC5lbWJlZFNXRigKICAgICAgICAibWpwLnN3ZiIsICJmbGFzaF92aWRlbyIsIAogICAgICAgIHd3aWR0aCwgd2hlaWdodCwgCiAgICAgICAgc3dmVmVyc2lvblN0ciwgeGlTd2ZVcmxTdHIsIAogICAgICAgIGZsYXNodmFycywgcGFyYW1zLCBhdHRyaWJ1dGVzLCBlbWJlZEhhbmRsZXIpOwogICAgICAvLyBKYXZhU2NyaXB0IGVuYWJsZWQgc28gZGlzcGxheSB0aGUgZmxhc2hfdmlkZW8gZGl2IGluIGNhc2UgaXQgaXMgbm90IHJlcGxhY2VkIHdpdGggYSBzd2Ygb2JqZWN0LgogICAgICBzd2ZvYmplY3QuY3JlYXRlQ1NTKCIjZmxhc2hfdmlkZW8iLCAiZGlzcGxheTpibG9jazt0ZXh0LWFsaWduOmxlZnQ7Iik7CiAgICB9IGVsc2UgaWYgKHZpZGVvTW9kZSA9PSAiYnJvd3NlciIpIHsKICAgICAgJCgnI3ZpZGVvX3BhbmUnKS5hcHBlbmQoJCgnPGltZyBpZD0iYnJvd3Nlcl92aWRlbyIgY2xhc3M9InZpZGVvLWltYWdlIiBhbHQ9InZpZGVvIiBzcmM9Iicrcm9vdCsnL3ZpZGVvIi8+JykpCiAgICB9IGVsc2UgaWYgKHZpZGVvTW9kZSA9PSAiamF2YSIpIHsKICAgICAgLy8gSmF2YQogICAgICAkKCcjdmlkZW9fcGFuZScpLmFwcGVuZCgkKCc8YXBwbGV0IGlkPSJqYXZhX3ZpZGVvIiBjb2RlPSJjb20uY2hhcmxpZW1vdXNlLmNhbWJvem9sYS5WaWV3ZXIiIGFyY2hpdmU9ImNhbWJvem9sYS5qYXIiIGNsYXNzPSJ2aWRlby1kaXNwbGF5Ij48cGFyYW0gbmFtZT0idXJsIiB2YWx1ZT0idmlkZW8iLz48L2FwcGxldD4nKSk7CiAgICB9IGVsc2UgaWYgKHZpZGVvTW9kZSA9PSAianMiKSB7CiAgICAgICQoJyN2aWRlb19wYW5lJykuYXBwZW5kKCQoJzxpbWcgaWQ9ImltZzEiIGNsYXNzPSJ2aWRlby1pbWFnZSIgYWx0PSJ2aWRlbyIgc3JjPSInK3Jvb3QrJy9nZXQ/MSIvPicpKQogICAgICAkKCcjdmlkZW9fcGFuZScpLmFwcGVuZCgkKCc8aW1nIGlkPSJpbWcyIiBjbGFzcz0idmlkZW8taW1hZ2UiIHN0eWxlPSJkaXNwbGF5OiBub25lOyIgYWx0PSJ2aWRlbyIgc3JjPSInK3Jvb3QrJy9nZXQ/MiIvPicpKQogICAgICB3b3JraW5nID0gJCgiI2ltZzIiKTsKICAgICAgc2hvd2luZyA9ICQoIiNpbWcxIik7CiAgICAgIHdvcmtpbmcuY3NzKCJ6SW5kZXgiLCAtMSk7CiAgICAgIGpzU2l6ZU9rID0gZmFsc2U7CiAgICAgIGpzVXBkYXRlID0gdHJ1ZTsKICAgICAgd29ya2luZy5sb2FkKGpzTG9hZEltYWdlKTsKICAgICAgd29ya2luZy5hdHRyKCJzcmMiLCByb290ICsgIi9nZXQ/cm5kPSIrTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMDAwMDApKTsKICAgIH0KICB9CgogIHZhciBvblZpZGVvTW9kZUNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBtb2RlID0gJCh0aGlzKS52YWwoKQogICAgaWYgKG1vZGUgIT0gdmlkZW9Nb2RlKSB7CiAgICAgIHZpZGVvRGVzdHJveSgpOwogICAgICB2aWRlb01vZGUgPSBtb2RlOwogICAgICB2aWRlb0NyZWF0ZSgpOwogICAgfQogIH0KCiAgdmFyIGZ1bGxzY3JlZW4gPSBmdW5jdGlvbihlbCkgewogICAgaWYgKGVsLnJlcXVlc3RGdWxsc2NyZWVuKSB7CiAgICAgIGVsLnJlcXVlc3RGdWxsc2NyZWVuKCk7CiAgICB9IGVsc2UgaWYgKGVsLm1zUmVxdWVzdEZ1bGxzY3JlZW4pIHsKICAgICAgZWwubXNSZXF1ZXN0RnVsbHNjcmVlbigpOwogICAgfSBlbHNlIGlmIChlbC5tb3pSZXF1ZXN0RnVsbFNjcmVlbikgewogICAgICBlbC5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpOwogICAgfSBlbHNlIGlmIChlbC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbikgewogICAgICBlbC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbigpOwogICAgfQogIH07CgoKdmFyIGdyZWV0SW5pdCA9IGZ1bmN0aW9uKCkgewogIHsKICAgIHZhciB0b29sdGlwRWxlbWVudHMgPSAkKCcuaGFzLXRvb2x0aXAnKQogICAgaWYgKHRvb2x0aXBFbGVtZW50cy5sZW5ndGgpIHsKICAgICAgdG9vbHRpcEVsZW1lbnRzLnRvb2x0aXAoeydjb250YWluZXInOiAnYm9keSd9KTsKICAgIH0KICB9CiAgCiAgJC5hamF4KHJvb3QrJy9zdGF0dXMuanNvbj9zaG93X2F2YWlsPTEnKQogICAuZG9uZShmdW5jdGlvbiAoZGF0YSkgewogICAgIGNvbmZpZyA9IGRhdGE7CiAgICAgcmVjb25maWd1cmUoKTsKICAgfSkKICAgLmZhaWwoZnVuY3Rpb24gKHhociwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHsKICAgICAkKCcjaW5pdF9lcnJvcicpLnRleHQoJyInK3RleHRTdGF0dXMrJyInKTsKICAgICAkKCcjaW5pdF9hbGVydCcpLnNob3coKQogICB9KQogICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkgewogICAgIGpzU2l6ZU9rID0gZmFsc2U7CiAgIH0pCgogIHZhciB0d2FTd2l0Y2ggPSAkKCcjdHdhU3dpdGNoJykKICAgIC5jaGFuZ2UoZnVuY3Rpb24oKSB7CiAgICAgIHR3YVByZXNzZWQgPSB0d2FTd2l0Y2guaXMoIjpjaGVja2VkIik7CiAgICAgIGlmICh0d2FQcmVzc2VkKSB7CiAgICAgICAgdHdhU3RhcnQoKQogICAgICB9IGVsc2UgewogICAgICAgIHR3YVN0b3AoKQogICAgICB9CiAgICB9KQoKICAkLmFqYXgocm9vdCsnL21vZGV0X2FyZWFzLmpzb24nKQogICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkgewogICAgICBmb3IgKHZhciBpID0gMDsgaTw4OyBpKyspIHsKICAgICAgICBmb3IgKHZhciBqID0gMDsgajw4OyBqKyspIHsKICAgICAgICAgIGlmIChkYXRhW2ldW2pdID09IDEpIHsKICAgICAgICAgICAgJCgnI21hJytqK2kpLmFkZENsYXNzKCdhY3RpdmUnKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJCgnI21hJytqK2kpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKQogICAgICAgICAgfQogICAgICAgICAgJCgnI21hJytqK2kpLmNsaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBwYWlyID0gJCh0aGlzKS5hdHRyKCdkYXRhLW51bScpLnNwbGl0KCcsJykKICAgICAgICAgICAgdmFyIHByZWZpeCA9IHJvb3QrJy9zZXR0aW5ncy9tb2RldF9hcmVhcz94PScrcGFpclswXSsnJnk9JytwYWlyWzFdCiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdhY3RpdmUnKSkgewogICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpCiAgICAgICAgICAgICAgdmFyIHdoaWNoID0gdGhpczsKICAgICAgICAgICAgICAkLmFqYXgocHJlZml4ICsgJyZlbmFibGVkPTAnKQogICAgICAgICAgICAgICAuZmFpbChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICQod2hpY2gpLmFkZENsYXNzKCdhY3RpdmUnKQogICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpCiAgICAgICAgICAgICAgdmFyIHdoaWNoID0gdGhpczsKICAgICAgICAgICAgICAkLmFqYXgocHJlZml4ICsgJyZlbmFibGVkPTEnKQogICAgICAgICAgICAgICAuZmFpbChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICQod2hpY2gpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKQogICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfQogICAgfSkKICAgIC5mYWlsKGZ1bmN0aW9uICh4aHIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7CiAgICAgICQoJyNpbml0X2Vycm9yJykudGV4dCgnIicrdGV4dFN0YXR1cysnIicpOwogICAgICAkKCcjaW5pdF9hbGVydCcpLnNob3coKQogICAgfSkKCiAgJCgnI2J0bl93aHlfbGFnJykuY2xpY2soZnVuY3Rpb24oKSB7CiAgICAkKCcjZXhwbGFpbl9hdWRpbycpLm1vZGFsKCk7CiAgIH0pCiAgICQoJyNidG5fZXhwbGFpbl90YXNrZXInKS5jbGljayhmdW5jdGlvbigpIHsKICAgICQoJyNleHBsYWluX3Rhc2tlcicpLm1vZGFsKCk7CiAgIH0pCgogICAkKCcudGJ0bicpLmNsaWNrKGZ1bmN0aW9uKCkgewogICAgJC5hamF4KHJvb3QrJy9nZW4/ZXZlbnQ9JyskKHRoaXMpLmF0dHIoJ2RhdGEtbnVtJykpCiAgIH0pCgogICQoJyNyZWNfc3RvcCcpLmNsaWNrKGZ1bmN0aW9uKCkgewogICAgJC5hamF4KHJvb3QrJy9zdG9wdmlkZW8/Zm9yY2U9MScpCiAgICAuZG9uZShmdW5jdGlvbigpeyQoJyN2aWRlb19yZWMnKS5oaWRlKCk7ICQoJyNyZWNfc3RvcCcpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO30pCiAgICAuZmFpbChmdW5jdGlvbih4aHIsIHR4dCl7IGRpc3BsYXlfZXJyb3IoInN0YXJ0X3ZpZGVvX2Vycm9yIiwgIiIpKHhociwgdHh0KTsgJCgnI3JlY19zdG9wJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7IH0pCgogICAgJCgnI3JlY19zdG9wJykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7CiAgIH0pCgogICQoJyNyZWNfYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7CiAgICBpZiAoJCgnI3ZpZGVvX3RhZycpLnZhbCgpID09ICcnKSB7CiAgICAgICQoJyN2aWRlb190YWcnKS52YWwoJ3JlYycpOwogICAgfQogICAgJC5hamF4KHJvb3QrJy9zdGFydHZpZGVvP2ZvcmNlPTEmdGFnPScrZW5jb2RlVVJJQ29tcG9uZW50KCQoJyN2aWRlb190YWcnKS52YWwoKSkpCiAgICAuZG9uZShmdW5jdGlvbihkYXRhKXsgJCgnI3JlY19idXR0b24nKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTsgdXBkYXRlVmlkZW9JbmZvKGRhdGEpOyB9KQogICAgLmZhaWwoZnVuY3Rpb24oeGhyLCB0eHQpeyBkaXNwbGF5X2Vycm9yKCJzdGFydF92aWRlb19lcnJvciIsICIiKSh4aHIsIHR4dCk7ICQoJyNyZWNfYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7IH0pCgogICAgJCgnI3JlY19idXR0b24nKS5hZGRDbGFzcygnZGlzYWJsZWQnKTsKICB9KTsKCiAgJCgnI2J0bl9mdWxsc2NyZWVuJykuY2xpY2soZnVuY3Rpb24oKSB7CiAgICB2YXIgbW9kZSA9ICQodGhpcykudmFsKCkKICAgIGlmICh2aWRlb01vZGUgPT0gJ29mZicpIHsKICAgICAgd2luZG93LmFsZXJ0KHRyYW5zbGF0ZSgnc2VsZWN0X3ZpZGVvX21vZGVfZmlyc3QnKSkKICAgIH0gZWxzZSB7CiAgICAgIGlmICh2aWRlb01vZGUgPT0gJ2ZsYXNoJykgewogICAgICAgIHdpbmRvdy5vcGVuKCdmbGFzaC5odG1sJyk7CiAgICAgIH0gZWxzZSBpZiAodmlkZW9Nb2RlID09ICdqcycpIHsKICAgICAgICB3aW5kb3cub3BlbignanNmcy5odG1sJyk7CiAgICAgIH0gZWxzZSBpZiAodmlkZW9Nb2RlID09ICdicm93c2VyJykgewogICAgICAgIHdpbmRvdy5vcGVuKCdicm93c2VyZnMuaHRtbCcpOwogICAgICB9IGVsc2UgaWYgKHZpZGVvTW9kZSA9PSAnamF2YScpIHsKICAgICAgICB3aW5kb3cub3BlbignamF2YWZzLmh0bWwnKTsKICAgICAgfQogICAgICAkKCcjdmlkZW9fbW9kZScpLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAkKCcjdmlkZW9fcmFkaW9fbm9uZScpLmFkZENsYXNzKCdhY3RpdmUnKTsKICAgICAgdmlkZW9EZXN0cm95KCk7CiAgICAgIHZpZGVvTW9kZSA9ICdvZmYnOwogICAgICB2aWRlb0NyZWF0ZSgpOwogICAgfQogIH0pCgogIHZhciBwaG90b191cmwgPSBmdW5jdGlvbih1cmwpIHsKICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgJC5hamF4KHJvb3QgKyB1cmwpCiAgICAgIC5hbHdheXMoZnVuY3Rpb24oKSB7CiAgICAgICAgICQoJyNwaG90b19zcGlubmVyJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKQogICAgICB9KQogICAgICAuZG9uZShmdW5jdGlvbigpIHsKICAgICAgICAgJCgnI3Bob3RvX29rJykuZmFkZUluKCdzbG93JywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAkKCcjcGhvdG9fb2snKS5mYWRlT3V0KCdzbG93JykKICAgICAgICAgfSkKICAgICAgfSkKICAgICAgJCgnI3Bob3RvX3NwaW5uZXInKS5mYWRlSW4oJ2Zhc3QnKQogICAgfQogIH0KCiAgJCgnI2J0bl9waG90b19zdG9yYWdlJykuY2xpY2socGhvdG9fdXJsKCcvcGhvdG9fc2F2ZV9vbmx5LmpwZycpKTsKICAkKCcjYnRuX3Bob3RvYWZfc3RvcmFnZScpLmNsaWNrKHBob3RvX3VybCgnL3Bob3RvYWZfc2F2ZV9vbmx5LmpwZycpKTsKICAgCiAgJCgnI3JlY19jaXJjdWxhcicpLmNsaWNrKGZ1bmN0aW9uKCkgewogICAgJC5hamF4KHJvb3QrJy9zdGFydHZpZGVvP2ZvcmNlPTEmbW9kZT1jaXJjdWxhciZ0YWc9JytlbmNvZGVVUklDb21wb25lbnQoJCgnI3ZpZGVvX3RhZycpLnZhbCgpKSkKICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpeyAkKCcjcmVjX2NpcmN1bGFyJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7IHVwZGF0ZVZpZGVvSW5mbyhkYXRhKTsgfSkKICAgIC5mYWlsKGZ1bmN0aW9uKHhociwgdHh0KXsgZGlzcGxheV9lcnJvcigic3RhcnRfdmlkZW9fZXJyb3IiLCAiIikoeGhyLCB0eHQpOyAkKCcjcmVjX2NpcmN1bGFyJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7IH0pCgogICAgJCgnI3JlY19jaXJjdWxhcicpLmFkZENsYXNzKCdkaXNhYmxlZCcpOwogIH0pOwoKICAkKCdbbmFtZT12aWRlb19tb2RlX3NlbF0nKS5jaGFuZ2Uob25WaWRlb01vZGVDaGFuZ2UpOwogICQoJ1tuYW1lPWF1ZGlvX21vZGVfc2VsXScpLmNoYW5nZShvbkF1ZGlvTW9kZUNoYW5nZSk7Cn0gLy8gZ3JlZXRJbml0CgoKLy97bmFtZTogIm5hbWUiLCBjb250ZW50czogW10sIG5ld2VzdDogdW5kZWZpbmVkLCBuZXdkYXRlfQoKdmFyIGRpcnMgPSB7fQoKCnZhciBoYXNoQ29kZSA9IGZ1bmN0aW9uKHgpewogICAgdmFyIGhhc2ggPSAwLCBpLCBjaGFyOwogICAgaWYgKHgubGVuZ3RoID09IDApIHJldHVybiBoYXNoOwogICAgZm9yIChpID0gMCwgbCA9IHgubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgY2hhciAgPSB4LmNoYXJDb2RlQXQoaSk7CiAgICAgICAgaGFzaCAgPSAoKGhhc2g8PDUpLWhhc2gpK2NoYXI7CiAgICAgICAgaGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXIKICAgIH0KICAgIHJldHVybiBNYXRoLmFicyhoYXNoKTsKfTsKCnZhciBleHBhbmRDYXRXID0gZnVuY3Rpb24oY2F0KSB7CiAgcmV0dXJuIGZ1bmN0aW9uKCkgeyBleHBhbmRDYXQoY2F0KSB9Cn0KCnZhciBjYXROYW1lID0gZnVuY3Rpb24obmFtZSkgewogIHJldHVybiAnY2F0XycgKyBoYXNoQ29kZShuYW1lKTsKfQoKdmFyICRjYXQgPSBmdW5jdGlvbihjYXQpIHsKICByZXR1cm4gJCgnIycrY2F0TmFtZShjYXQpKQp9Cgp2YXIgZXhwYW5kQ2F0ID0gZnVuY3Rpb24oY2F0LCBzdGF0ZSkgewogIHZhciBlID0gJGNhdChjYXQpOwogIHZhciBkaXNwID0gKHN0YXRlID09IHVuZGVmaW5lZCkgPyAoZS5jc3MoJ2Rpc3BsYXknKSA9PSAnbm9uZScpIDogc3RhdGU7CiAgaWYgKGRpc3ApIHsKICAgICRjYXQoY2F0KS5jc3MoJ2Rpc3BsYXknLCcnKQogIH0gZWxzZSB7CiAgICAkY2F0KGNhdCkuY3NzKCdkaXNwbGF5Jywnbm9uZScpCiAgfQp9CgoKdmFyIG1ha2VMaW5rID0gZnVuY3Rpb24oZGlyLCBuYW1lKSB7CiAgcmV0dXJuIHJvb3QrIi92IitkaXIrIi8iK25hbWU7Cn0KCnZhciBtYWtlVGh1bWIgPSBmdW5jdGlvbihkaXIsIG5hbWUpIHsKICBpZiAobmFtZS5sZW5ndGggPCA1IHx8IG5hbWUuc3Vic3RyKG5hbWUubGVuZ3RoLTQpID09ICcuanBnJykgewogICAgLy8gQ3JlZGl0OiB1ZGFuYSBla2FuYXlha2UKICAgIHJldHVybiByb290KycvY2FtZXJhX2ljb24ucG5nJwogIH0KICByZXR1cm4gcm9vdCsiL3QiK2RpcisiLyIrbmFtZQp9Cgp2YXIgc29ydE10aW1lID0gZnVuY3Rpb24oYSxiKSB7CiAgcmV0dXJuIChiLm10aW1lIHwgMCkgLSAoYS5tdGltZSB8IDApOwp9Cgp2YXIgb25WaWRlb05hdmlnYXRlID0gZnVuY3Rpb24oKSB7CiAgJCgnLmRpcmVjdG9yeScpLmVhY2goZnVuY3Rpb24oaSx4KSB7CiAgICAgICQoeCkuaGlkZSgpOwogIH0pCiAgaWYgKHdpbmRvdy5sb2NhdGlvbi5oYXNoICE9ICIiKSB7CiAgICBleHBhbmRDYXQod2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyKDEpLCB0cnVlKTsKICB9Cn0KCnZhciBleHBsYWluV2ViTSA9IGZ1bmN0aW9uKCkgewogICQoJyNleHBsYWluX3dlYm0nKS5tb2RhbCgpOwp9Cgp2YXIgc2VsZWN0ZWRGaWxlID0ge30KdmFyIHNlbGVjdGVkRmlkID0gIm5vbmUiCnZhciBjYW5jZWxSZW1vdmFsID0gZmFsc2UKCnZhciBybWZpbGV3ID0gZnVuY3Rpb24oZmlkLG9iaikgewogIHJldHVybiBmdW5jdGlvbigpIHsKICAgIGNhbmNlbFJlbW92YWwgPSBmYWxzZQogICAgJCgnI3JlbW92ZV92aWRlb19idG4nKS5wcm9wKCdkaXNhYmxlZCcsZmFsc2UpCiAgICAkKCcjZmlsZW5hbWUnKS50ZXh0KG9iai5uYW1lKS5hdHRyKCdocmVmJywgbWFrZUxpbmsob2JqLnBhdGgsIG9iai5uYW1lKSk7CiAgICAkKCcjcmVtb3ZlX21vZGFsJykubW9kYWwoeydrZXlib2FyZCc6IHRydWV9KTsKICAgIHNlbGVjdGVkRmlsZSA9IG9iajsKICAgIHNlbGVjdGVkRmlkID0gZmlkOwogIH0KfQoKdmFyIHJtZGlydyA9IGZ1bmN0aW9uKGZpZCxvYmopIHsKICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICBjYW5jZWxSZW1vdmFsID0gZmFsc2UKICAgICQoJyNyZW1vdmVfdmlkZW9fYnRuJykucHJvcCgnZGlzYWJsZWQnLGZhbHNlKQogICAgJCgnI2ZpbGVuYW1lJykudGV4dChvYmoubmFtZSkuYXR0cignaHJlZicsICcjJyk7CiAgICAkKCcjcmVtb3ZlX21vZGFsJykubW9kYWwoeydrZXlib2FyZCc6IHRydWV9KTsKICAgIHNlbGVjdGVkRmlsZSA9IG9iajsKICAgIHNlbGVjdGVkRmlkID0gZmlkOwogIH0KfQoKdmFyIGxvYWRWaWRlb3MgPSBmdW5jdGlvbihkYXRhKSB7CiAgJCgiI2NhdF9wYW5lIikuZW1wdHkoKTsKICBmb3IgKHZhciBpID0gMDsgaTxkYXRhLmxlbmd0aDsgKytpKSB7CiAgICB2ID0gZGF0YVtpXTsKICAgIHZhciBjYXQ7CiAgICBpZiAodi5wYXRoID09ICIiKSB7CiAgICAgIGNhdCA9ICIvIjsKICAgIH0gZWxzZSB7CiAgICAgIGNhdCA9IHYucGF0aDsKICAgIH0KICAgIGlmIChkaXJzW2NhdF0gPT0gdW5kZWZpbmVkKSB7CiAgICAgIHZhciBuYW1lID0gY2F0LnN1YnN0cigxKTsKICAgICAgaWYgKGNhdCA9PSAnLycpIHsKICAgICAgICBuYW1lID0gdHJhbnNsYXRlKCd1bnNvcnRlZCcpOwogICAgICB9CiAgICAgIGRpcnNbY2F0XSA9IHtuYW1lOiBuYW1lLCBjb250ZW50czogW10sIG5ld2VzdDogdW5kZWZpbmVkLCBuZXdkYXRlOiB1bmRlZmluZWR9OwogICAgfQogICAgdmFyIGQgPSBkaXJzW2NhdF0KICAgIGQuY29udGVudHMucHVzaCh2KTsKICAgIHYubXRpbWUgLT0gMAogICAgaWYgKGQubmV3ZGF0ZSA9PSB1bmRlZmluZWQgfHwgZC5uZXdkYXRlIDwgdi5tdGltZSkgewogICAgICBkLm5ld2VzdCA9IHYKICAgICAgZC5uZXdkYXRlID0gdi5tdGltZQogICAgfQogIH0KICBmb3IgKHZhciBkaSBpbiBkaXJzKSB7CiAgICB2YXIgZCA9IGRpcnNbZGldCiAgICBkLmNvbnRlbnRzLnNvcnQoc29ydE10aW1lKTsKICAgIAogICAgdmFyIG1lZGlhX2JvZHkgPSAKICAgICAgJCgnPGRpdiBjbGFzcz0ibWVkaWEtYm9keSBkaXJoZWFkZXIiPicpCiAgICAgIC5hcHBlbmQoJCgnPGg0IGNsYXNzPSJtZWRpYS1oZWFkaW5nIj4nKS5hcHBlbmQoJCgnPGEgaHJlZj0iIycrZGkrJyI+JykudGV4dChkLm5hbWUpKS5jbGljayhleHBhbmRDYXRXKGRpKSkpCiAgICAgIC5hcHBlbmQoCiAgICAgICAgJCgnPHA+JykudGV4dCh0cmFuc2xhdGUoJ3ZpZGVvc19jb3VudCcsIGQuY29udGVudHMubGVuZ3RoKSkuYXBwZW5kKCQoJzxzcGFuIGNsYXNzPSJnbHlwaGljb24gZ2x5cGhpY29uLXRyYXNoIHJtX2RpciI+JykuY2xpY2socm1kaXJ3KGhhc2hDb2RlKGRpKSwgZCkpKQogICAgICAgICkKICAgICAgLmFwcGVuZCgKICAgICAgICAkKCc8cD4nKQogICAgICAgICAgLmFwcGVuZCgnPHNwYW4+JykudGV4dCh0cmFuc2xhdGUoJ2xhc3RfZW50cnknKSkKICAgICAgICAgIC5hcHBlbmQoJCgnPGE+JykuYXR0cignaHJlZicsIG1ha2VMaW5rKGRpLCBkLm5ld2VzdC5uYW1lKSkudGV4dChuZXcgRGF0ZShkLm5ld2RhdGUgKiAxMDAwKS50b0xvY2FsZVN0cmluZygpKSkKICAgICAgKTsKICAgIHZhciBtZWRpYV9saXN0ID0gJCgnPGRpdiBjbGFzcz0ibWVkaWEtbGlzdCBkaXJlY3RvcnkiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+JykuYXR0cignaWQnLCBjYXROYW1lKGRpKSkKICAgIG1lZGlhX2JvZHkuYXBwZW5kKG1lZGlhX2xpc3QpOwoKICAgIGZvciAodmFyIGNpID0gMDsgY2k8ZC5jb250ZW50cy5sZW5ndGg7ICsrY2kpIHsKICAgICAgYyA9IGQuY29udGVudHNbY2ldCiAgICAgIHZhciBmaWQgPSAnZmlkXycgKyBoYXNoQ29kZShkaSsnLycrYy5uYW1lKTsKICAgICAgbWVkaWFfbGlzdC5hcHBlbmQoCiAgICAgICAgJCgnPGRpdiBjbGFzcz0ibWVkaWEgZmlsZSI+JykuYXR0cignaWQnLCBmaWQpCiAgICAgICAgICAgICAgLmFwcGVuZCgKICAgICAgICAgICAgICAgICQoJzxhIGNsYXNzPSJwdWxsLWxlZnQiPicpLmF0dHIoJ2hyZWYnLCByb290KyIvdiIrZGkrIi8iK2MubmFtZSkKICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGltZyBzdHlsZT0id2lkdGg6IDEyOHB4OyBoZWlnaHQ6IGF1dG87IiAvPicpLmF0dHIoJ3NyYycsIG1ha2VUaHVtYihkaSwgYy5uYW1lKSApKQogICAgICAgICAgICAgICkKICAgICAgICAgICAgICAuYXBwZW5kKAogICAgICAgICAgICAgICAgJCgnPGRpdiBjbGFzcz0ibWVkaWEtYm9keSI+JykKICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGg0IGNsYXNzPSJtZWRpYS1oZWFkaW5nIj4nKS5hcHBlbmQoJCgnPGE+JykuYXR0cignaHJlZicscm9vdCsiL3YiK2RpKyIvIitjLm5hbWUpLnRleHQoYy5uYW1lKSkpCiAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxwPicpLnRleHQodHJhbnNsYXRlKCdjaGFuZ2VkJywgbmV3IERhdGUoYy5tdGltZSAqIDEwMDApLnRvTG9jYWxlU3RyaW5nKCkpKSkKICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHA+JykKICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8c3Bhbj4nKS50ZXh0KHRyYW5zbGF0ZSgnZmlsZV9zaXplJywgKGMuc2l6ZSAvICgxMDI0LjAgKiAxMDI0LjApKS50b0ZpeGVkKDIpICkpKQogICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxzcGFuIGNsYXNzPSJnbHlwaGljb24gZ2x5cGhpY29uLXRyYXNoIHJtX2ZpbGUiPicpLmNsaWNrKHJtZmlsZXcoZmlkLCBjKSkpCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgKQogICAgICApCiAgICB9CgogICAgJCgnI2NhdF9wYW5lJykKICAgICAgLmFwcGVuZCgKICAgICAgICAkKCc8ZGl2IGNsYXNzPSJtZWRpYSI+JykuYXR0cignaWQnLCBoYXNoQ29kZShkaSkpCiAgICAgICAgICAuYXBwZW5kKAogICAgICAgICAgICAkKCc8YSBocmVmPSIjJytkaSsnIiBjbGFzcz0icHVsbC1sZWZ0Ij4nKQogICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGltZyBzdHlsZT0id2lkdGg6IDEyOHB4OyBoZWlnaHQ6IGF1dG87IiAvPicpLmF0dHIoJ3NyYycsIG1ha2VUaHVtYihkaSwgZC5uZXdlc3QubmFtZSkgKSkKICAgICAgICAgICAgICAuY2xpY2soZXhwYW5kQ2F0VyhkaSkpCiAgICAgICAgICApCiAgICAgICAgICAuYXBwZW5kKG1lZGlhX2JvZHkpCiAgICAgICk7CiAgfQogICQod2luZG93KS5vbignaGFzaGNoYW5nZScsIG9uVmlkZW9OYXZpZ2F0ZSk7CiAgb25WaWRlb05hdmlnYXRlKCkKICAkKCcjY2FuY2VsX3JlbW92ZV92aWRlb19idG4nKS5jbGljayhmdW5jdGlvbigpIHsKICAgIGNhbmNlbFJlbW92YWwgPSB0cnVlOwogIH0pCiAgJCgnI3JlbW92ZV92aWRlb19idG4nKS5jbGljayhmdW5jdGlvbigpIHsKICAgIGlmIChzZWxlY3RlZEZpbGUuY29udGVudHMpIHsKICAgICAgLy8gUmVtb3ZlIHRoZSB3aG9sZSBkaXJlY3RvcnkKICAgICAgJCgnI3JlbW92ZV92aWRlb19idG4nKS5wcm9wKCdkaXNhYmxlZCcsdHJ1ZSkKICAgICAgdmFyIGpvYnMgPSBbXQogICAgICAkLmVhY2goc2VsZWN0ZWRGaWxlLmNvbnRlbnRzLCBmdW5jdGlvbihpLHNlbGVjdGVkRmlsZSkgewogICAgICAgIGpvYnMucHVzaChmdW5jdGlvbihzZWxlY3RlZEZpbGUpIHsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgJC5wb3N0KHJvb3QrJy9yZW1vdmUnK3NlbGVjdGVkRmlsZS5wYXRoKycvJytzZWxlY3RlZEZpbGUubmFtZSkKICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gam9icy5wb3AoKQogICAgICAgICAgICAgICAgaWYgKG5leHQpIHsKICAgICAgICAgICAgICAgICAgbmV4dCgpCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAkKCcjcmVtb3ZlX21vZGFsJykubW9kYWwoJ2hpZGUnKTsKICAgICAgICAgICAgICAgICAgJCgnIycrc2VsZWN0ZWRGaWQpLnNsaWRlVXAoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KHRyYW5zbGF0ZSgiY2Fubm90X3JlbW92ZV9maWxlIikpCiAgICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9KHNlbGVjdGVkRmlsZSkpCiAgICAgIH0pOwogICAgICBqb2JzLnBvcCgpKCkKICAgIH0gZWxzZSB7CiAgICAgICQucG9zdChyb290KycvcmVtb3ZlJytzZWxlY3RlZEZpbGUucGF0aCsnLycrc2VsZWN0ZWRGaWxlLm5hbWUpCiAgICAgIC5kb25lKGZ1bmN0aW9uKCkgewogICAgICAgICQoJyNyZW1vdmVfbW9kYWwnKS5tb2RhbCgnaGlkZScpOwogICAgICAgICQoJyMnK3NlbGVjdGVkRmlkKS5zbGlkZVVwKCkKICAgICAgfSkKICAgICAgLmVycm9yKGZ1bmN0aW9uKCkgewogICAgICAgIHdpbmRvdy5hbGVydCh0cmFuc2xhdGUoImNhbm5vdF9yZW1vdmVfZmlsZSIpKQogICAgICB9KQogICAgfQogIH0pCn0KCnZhciB2aWRlb01nckluaXQgPSBmdW5jdGlvbigpIHsKICAkLmFqYXgocm9vdCsnL2xpc3RfdmlkZW9zJykKICAgIC5lcnJvcihmdW5jdGlvbih4aHIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7CiAgICAgICQoJyNpbml0X2Vycm9yJykudGV4dCgnIicrdGV4dFN0YXR1cysnIicpOwogICAgICAkKCcjaW5pdF9hbGVydCcpLnNob3coKTsKICAgIH0pCiAgICAuZG9uZShsb2FkVmlkZW9zKQp9Cgp2YXIgbWludXRlc190b19yZWFkYWJsZSA9IGZ1bmN0aW9uKG1pbnV0ZXMpIHsKICBtaW51dGVzIHw9IDA7CiAgaWYgKHRpbWVfbWFwW21pbnV0ZXNdICE9IHVuZGVmaW5lZCkgewogICAgcmV0dXJuIHRpbWVfbWFwW21pbnV0ZXNdOwogIH0KICByZXR1cm4gbWludXRlc190ZW1wbGF0ZS5yZXBsYWNlKCckVkFMJywgbWludXRlcysnJykKfQoKdmFyIHNlbnNvcnNNYWluID0gZnVuY3Rpb24oKSB7CiAgdmFyIGRhdGEgPSB7fTsKICB2YXIgcmV0ZW50aW9uTXMgPSAxMDAwMDsKICB2YXIgcmVtb3RlTm93ID0gLTE7CiAgdmFyIG9sZFJlbW90ZU5vdyA9IHJlbW90ZU5vdzsKCiAgdmFyIHJlbW90ZUNoZWNrUG9pbnQgPSAtMTsKCiAgdmFyIHRpbWVQYXNzZWRGcm9tQ2hlY2sgPSAwOwogIHZhciBjaGVja1BvaW50T2Zmc2V0ID0gLTE7CgogIHZhciByZWRyYXdQbG90SGFuZGxlID0gMDsKICB2YXIgZGFxSGFuZGxlID0gMDsKCiAgdmFyIHBsb3QgPSAwOwoKICB2YXIgYXhpc01pbiA9IDA7CiAgdmFyIGF4aXNNYXggPSAxMDAwOwoKICB2YXIgYXZhaWxTZW5zb3JzID0gW10KICB2YXIgYWN0aXZlU2Vuc29ycyA9IFtdCiAgLyokLnBsb3QoJyNwbGFjZWhvbGRlcicsIFt7bGFiZWw6J3BlcHBlcicsIGRhdGE6W1swLDBdLCBbMSwxXV19XSwgewogICAgICBzZXJpZXM6IHsKICAgICAgICBzaGFkb3dTaXplOiAwIC8vIERyYXdpbmcgaXMgZmFzdGVyIHdpdGhvdXQgc2hhZG93cwogICAgICB9LAogICAgICB5YXhpczogewogICAgICAgIG1pbjogMCwKICAgICAgICBtYXg6IDEwMAogICAgICB9LAogICAgICB4YXhpczogewogICAgICAgIHNob3c6IGZhbHNlCiAgICAgIH0KICAgIH0pOyovCgogIHZhciBtaW5tYXggPSB7CiAgICAnYWNjZWwnOiBbLTUwLCA1MF0sCiAgICAnbWFnJzogWy02MCwgNjBdLAogICAgJ2d5cm8nOiBbLTIwLCAyMF0sCiAgICAnbGlnaHQnOiBbMCwgOTBdLAogICAgJ3ByZXNzdXJlJzogWzgwMCwgMTEwMF0sCiAgICAndGVtcCc6IFstNTAsIDUwXSwKICAgICdwcm94aW1pdHknOiBbMCwgNTBdLAogICAgJ2dyYXZpdHknOiBbLTEwLCAxMF0sCiAgICAnbGluX2FjY2VsJzogWy00MCwgNDBdLAogICAgJ3JvdF92ZWN0b3InOiBbLTEsIDFdLAogICAgJ2h1bWlkaXR5JzogWy01MCwgNTBdLAogICAgJ2FtYmllbnRfdGVtcCc6IFstNTAsIDUwXSwKICAgICdtb3Rpb24nOiBbMCwgMTAwMF0sCiAgICAnbW90aW9uX2V2ZW50JzogWy0wLjEsIDEuMV0sCiAgICAnbW90aW9uX2FjdGl2ZSc6IFstMC4xLCAxLjFdLAogICAgJ2JhdHRlcnlfbGV2ZWwnOiBbMCwgMTAwXSwKICAgICdiYXR0ZXJ5X3ZvbHRhZ2UnOiBbMCwgMTBdLAogICAgJ2JhdHRlcnlfdGVtcCc6IFstMjAsIDcwXSwKICAgICdzb3VuZCc6IFswLCAzMDBdLAogICAgJ3NvdW5kX2V2ZW50JzogWy0wLjEsIDEuMV0sCiAgICAnc291bmRfdGltZW91dCc6IFstMC4xLCAxLjFdCiAgfQoKICB2YXIgc2hpZnREYXRhID0gZnVuY3Rpb24ocGRhdGEsIHRpbWUpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpPHBkYXRhLmxlbmd0aDsgKytpKSB7CiAgICAgIHBkYXRhW2ldWzBdIC09IHRpbWU7CiAgICB9CiAgICByZXR1cm4gcGRhdGE7CiAgfQoKCiAgdmFyIGNvbnZlcnRUb1Bsb3QgPSBmdW5jdGlvbihuZXdkYXRhKSB7CiAgICB2YXIgcmV0ID0gW107CiAgICBpZiAobmV3ZGF0YVswXSA9PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIHJldDsKICAgIH0KICAgIHZhciBsZW4gPSBuZXdkYXRhWzBdWzFdLmxlbmd0aDsKICAgIGZvciAodmFyIGkgPSAwOyBpPGxlbjsgKytpKSB7CiAgICAgIHJldC5wdXNoKFtdKTsKICAgIH0KICAgIGZvciAodmFyIGo9MDsgajxuZXdkYXRhLmxlbmd0aDsgKytqKSB7CiAgICAgIHZhciBjZWxsID0gbmV3ZGF0YVtqXTsKICAgICAgdmFyIGQgPSBjZWxsWzFdOwogICAgICB2YXIgc3RhbXAgPSBjZWxsWzBdOwogICAgICBmb3IgKHZhciBpID0gMDsgaTxsZW47ICsraSkgewogICAgICAgIHJldFtpXS5wdXNoKFtzdGFtcCwgZFtpXV0pOwogICAgICB9CiAgICAgIHJlbW90ZU5vdyA9IE1hdGgubWF4KHJlbW90ZU5vdywgc3RhbXApOwogICAgfQogICAgcmV0dXJuIHJldDsKICB9OwoKCiAgdmFyIG9sZFJlZHJhd1RpbWUgPSAtMTsKCgogIHZhciBnZXRQbG90RGF0YSA9IGZ1bmN0aW9uKCkgewogICAgdmFyIG5vdyA9IERhdGUubm93KCk7CiAgICB2YXIgc2hpZnQgPSBub3cgLSBvbGRSZWRyYXdUaW1lOwogICAgaWYgKG9sZFJlZHJhd1RpbWUgPT0gLTEpCiAgICAgIHNoaWZ0ID0gMDsKICAgIG9sZFJlZHJhd1RpbWUgPSBub3c7CgogICAgCiAgICB0aW1lUGFzc2VkRnJvbUNoZWNrICs9IHNoaWZ0OwogICAgZm9yICh2YXIgcyBpbiBkYXRhKSB7CiAgICAgIHZhciBnID0gZGF0YVtzXTsKICAgICAgc2hpZnREYXRhKGcuZGF0YSwgc2hpZnQpOwogICAgfQogICAgdmFyIHBhcnIgPSBbXTsKICAgIGZvciAodmFyIHMgaW4gZGF0YSkgewogICAgICBmb3IgKHZhciBhcyA9IDA7IGFzPGFjdGl2ZVNlbnNvcnMubGVuZ3RoOyArK2FzKSB7CiAgICAgICAgdmFyIGogPSBhY3RpdmVTZW5zb3JzW2FzXTsKICAgICAgICBpZiAocy5zdWJzdHIoMCxqLmxlbmd0aCkgPT0gaikKICAgICAgICAgIHBhcnIucHVzaChkYXRhW3NdKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHBhcnI7CiAgfQoKICB2YXIgcmVkcmF3UGxvdCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIHBhcnIgPSBnZXRQbG90RGF0YSgpCiAgICBwbG90LnNldERhdGEocGFycik7CiAgICBwbG90LmRyYXcoKTsKICAgIHJlZHJhd1Bsb3RIYW5kbGUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmVkcmF3UGxvdCgpfSwgMjApOwogIH0KCiAgdmFyIGFwcGVuZERhdGEgPSBmdW5jdGlvbihuZXdkYXRhKSB7CiAgICB2YXIgY2FjaGUgPSB7fTsKICAgIGZvciAodmFyIHMgaW4gbmV3ZGF0YSkgewogICAgICBjYWNoZVtzXSA9IGNvbnZlcnRUb1Bsb3QobmV3ZGF0YVtzXS5kYXRhKTsKICAgIH0KICAgIC8vJCgiI2RlYnVnMSIpLnRleHQoRGF0ZS5ub3coKSAtIHJlbW90ZU5vdyk7CiAgICAvL3ZhciBhZGRpdGlvbmFsU2hpZnQgPSByZW1vdGVOb3cgLSBvbGRSZW1vdGVOb3cgLSBlc3RpbWF0ZWRTaGlmdDsKICAgIHZhciBjcFNoaWZ0ID0gcmVtb3RlQ2hlY2tQb2ludCArIGNoZWNrUG9pbnRPZmZzZXQgKyB0aW1lUGFzc2VkRnJvbUNoZWNrOwogICAgLy8kKCcjZGVidWcxJykudGV4dChhZGRpdGlvbmFsU2hpZnQpOwogICAgZXN0aW1hdGVkU2hpZnQgPSAwOwogICAgZm9yICh2YXIgcyBpbiBuZXdkYXRhKSB7CiAgICAgIHZhciBwZGF0YSA9IGNhY2hlW3NdOwogICAgICBmb3IgKHZhciBpID0gMDsgaTxwZGF0YS5sZW5ndGg7ICsraSkgewogICAgICAgIHZhciBnID0gZGF0YVtzKycuJytpXTsKCiAgICAgICAgLy9zaGlmdERhdGEoZy5kYXRhLCBhZGRpdGlvbmFsU2hpZnQpOwogICAgICAgIGZvciAodmFyIHNoaWZ0ID0gMDsgc2hpZnQ8Zy5kYXRhLmxlbmd0aDsgKytzaGlmdCkgewogICAgICAgICAgaWYgKGcuZGF0YVtzaGlmdF1bMF0gPiAxKSB7CiAgICAgICAgICAgIGlmIChzaGlmdCAhPSAwKQogICAgICAgICAgICAgIGcuZGF0YSA9IGcuZGF0YS5zbGljZShzaGlmdC0xKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGcuZGF0YSA9IGcuZGF0YS5jb25jYXQoc2hpZnREYXRhKHBkYXRhW2ldLCBjcFNoaWZ0KSk7CiAgICAgIH0KICAgIH0KICAgIG9sZFJlbW90ZU5vdyA9IHJlbW90ZU5vdzsKICAgIC8qdmFyIHBhcnIgPSBbXTsKICAgIGZvciAodmFyIHMgaW4gZGF0YSkgewogICAgICBwYXJyLnB1c2goZGF0YVtzXSk7CiAgICB9CiAgICBwbG90LnNldERhdGEocGFycik7CiAgICBwbG90LmRyYXcoKTsqLwogIH0KCiAgdmFyIGNoZWNrQm94Q2hhbmdlID0gZnVuY3Rpb24oKSB7CiAgICBhY3RpdmVTZW5zb3JzID0gW10KICAgIHZhciBuZXdNaW4gPSA5OTk5OTk7CiAgICB2YXIgbmV3TWF4ID0gLTk5OTk5OTsKICAgIGZvciAodmFyIGkgaW4gYXZhaWxTZW5zb3JzKSB7CiAgICAgIHZhciBzID0gYXZhaWxTZW5zb3JzW2ldOwogICAgICBpZiAoJCgnI2lkJytzKS5pcygnOmNoZWNrZWQnKSkgewogICAgICAgIGFjdGl2ZVNlbnNvcnMucHVzaChzKTsKICAgICAgICBpZiAobWlubWF4W3NdICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgbmV3TWluID0gTWF0aC5taW4obmV3TWluLCBtaW5tYXhbc11bMF0pOwogICAgICAgICAgbmV3TWF4ID0gTWF0aC5tYXgobmV3TWF4LCBtaW5tYXhbc11bMV0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgaWYgKG5ld01heCA+IDAgJiYgKGF4aXNNaW4gIT0gbmV3TWluIHx8IGF4aXNNYXggIT0gbmV3TWF4KSkgewogICAgICBheGlzTWluID0gbmV3TWluOwogICAgICBheGlzTWF4ID0gbmV3TWF4OwogICAgfQogICAgcmVkcmF3UGxvdEF4aXMoKTsKICB9CgogIHZhciByZWRyYXdQbG90QXhpcyA9IGZ1bmN0aW9uKCkgewogICAgLy8gW2RhdGFbJ2FjY2VsLjAnXS5kYXRhXQoKICAgIHZhciBwYXJyID0gZ2V0UGxvdERhdGEoKTsKCiAgICBwbG90ID0gJC5wbG90KCcjcGxhY2Vob2xkZXInLCAKICAgICAgcGFyciwKICAgICAgewogICAgICAgIHNlcmllczogewogICAgICAgICAgc2hhZG93U2l6ZTogMCAvLyBEcmF3aW5nIGlzIGZhc3RlciB3aXRob3V0IHNoYWRvd3MKICAgICAgICB9LAogICAgICAgIHlheGlzOiB7CiAgICAgICAgICBtaW46IGF4aXNNaW4sCiAgICAgICAgICBtYXg6IGF4aXNNYXgKICAgICAgICB9LAogICAgICAgIHhheGlzOiB7CiAgICAgICAgICAvL3Nob3c6IGZhbHNlLAogICAgICAgICAgbWluOiAwLAogICAgICAgICAgbWF4OiByZXRlbnRpb25NcwogICAgICAgIH0KICAgICAgfQogICAgKTsKCiAgICBwbG90LnNldHVwR3JpZCgpOwogICAgcGxvdC5kcmF3KCkKICB9CgoKICB2YXIgdXBkYXRlU2VsZWN0aW9uID0gZnVuY3Rpb24obmV3ZGF0YSkgewogICAgLy9hbGVydChKU09OLnN0cmluZ2lmeShuZXdkYXRhKSkKICAgIHZhciBjaG9pY2VDb250YWluZXIgPSAkKCIjY2hlY2tib3hlcyIpOwogICAgCiAgICB2YXIgY2FjaGUgPSB7fTsKICAgIGF2YWlsU2Vuc29ycyA9IFtdCiAgICBmb3IgKHZhciBzIGluIG5ld2RhdGEpIHsKICAgICAgY2hvaWNlQ29udGFpbmVyLmFwcGVuZCgKICAgICAgICAiPGRpdiBjbGFzcz0nY2hlY2tib3gnPjxsYWJlbCBmb3I9J2lkIiArIHMgKyAiJz48aW5wdXQgdHlwZT0nY2hlY2tib3gnIG5hbWU9JyIgKyBzICsKICAgICAgICAiJyBjaGVja2VkPSdjaGVja2VkJyBpZD0naWQiICsgcyArICInPjwvaW5wdXQ+IgogICAgICAgICsgdHJhbnNsYXRlKCdzZW5zb3JfJytzKSArICI8L2xhYmVsPjwvZGl2PiIpOwogICAgICBhdmFpbFNlbnNvcnMucHVzaChzKTsKICAgICAgJCgnI2lkJytzKS5jaGFuZ2UoY2hlY2tCb3hDaGFuZ2UpOwogICAgICB2YXIgcGRhdGEgPSBjb252ZXJ0VG9QbG90KG5ld2RhdGFbc10uZGF0YSk7CiAgICAgIGNhY2hlW3NdID0gcGRhdGE7CiAgICB9CiAgICBjaGVja0JveENoYW5nZSgpOwoKICAgICQoIiNkZWJ1ZzEiKS50ZXh0KERhdGUubm93KCkgLSByZW1vdGVOb3cpOwogICAgY2hlY2tQb2ludE9mZnNldCA9IC1yZXRlbnRpb25NczsKICAgIHJlbW90ZUNoZWNrUG9pbnQgPSByZW1vdGVOb3c7CgogICAgZm9yICh2YXIgcyBpbiBuZXdkYXRhKSB7CiAgICAgIHZhciBwZGF0YSA9IGNhY2hlW3NdOwogICAgICBmb3IgKHZhciBpID0gMDsgaTxwZGF0YS5sZW5ndGg7ICsraSkgewogICAgICAgIGRhdGFbcysnLicraV0gPSB7CiAgICAgICAgICBsYWJlbDogKChuZXdkYXRhW3NdLmRlc2MgPT0gdW5kZWZpbmVkID8gcyA6IG5ld2RhdGFbc10uZGVzY1tpXSkrIiwgIit0cmFuc2xhdGUoJ3NlbnNvcl91bml0XycrbmV3ZGF0YVtzXS51bml0KSksIAogICAgICAgICAgZGF0YTogc2hpZnREYXRhKHBkYXRhW2ldLCByZW1vdGVDaGVja1BvaW50ICsgY2hlY2tQb2ludE9mZnNldCkKICAgICAgICB9OwogICAgICB9CiAgICB9CiAgICByZWRyYXdQbG90QXhpcygpOwogICAgb2xkUmVtb3RlTm93ID0gcmVtb3RlTm93OwogIH0KCiAgdmFyIHVwZGF0ZVBsb3QgPSBmdW5jdGlvbigpIHsKICAgIGlmIChhY3RpdmVTZW5zb3JzLmxlbmd0aCA9PSAwKQogICAgewogICAgICBkYXFIYW5kbGUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dXBkYXRlUGxvdCgpfSwgIDEwMCk7CiAgICB9IGVsc2UgewogICAgICAkLmFqYXgocm9vdCArICcvc2Vuc29ycy5qc29uP2Zyb209JyArIG9sZFJlbW90ZU5vdyArICcmc2Vuc2U9JyArIGFjdGl2ZVNlbnNvcnMuam9pbigpKQogICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgYXBwZW5kRGF0YShkYXRhKTsKICAgICAgICAgIGRhcUhhbmRsZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXt1cGRhdGVQbG90KCl9LCAgMTAwKTsKICAgICAgIH0pOwogICAgIH0KICB9CgogIHZhciBncHNIYW5kbGUgPSAtMTsKCiAgdmFyIGhpZGVHcHMgPSBmdW5jdGlvbiAoKSB7CiAgICAkKCIubG9jLW9wdCIpLmhpZGUoKQogICAgY2xlYXJUaW1lb3V0KGdwc0hhbmRsZSkKICB9CgogIHZhciBzaG93R3BzID0gZnVuY3Rpb24gKCkgewogICAgJCgiLmxvYy1vcHQiKS5zaG93KCkKICAgIGdwc0hhbmRsZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAkLmFqYXgocm9vdCArICcvZ3BzLmpzb24nKQogICAgICAuZG9uZShmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIGlmIChkYXRhLmdwcykgewogICAgICAgICAgJCgnI2xhdCcpLnRleHQoZGF0YS5ncHMubGF0aXR1ZGUpCiAgICAgICAgICAkKCcjbG9uZycpLnRleHQoZGF0YS5ncHMubG9uZ2l0dWRlKQogICAgICAgICAgJCgnI2dtYXBzX2xpbmsnKS5hdHRyKCJocmVmIiwgImh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vbWFwcy9wcmV2aWV3P3E9IitkYXRhLmdwcy5sYXRpdHVkZSsiLCIrZGF0YS5ncHMubG9uZ2l0dWRlKTsKICAgICAgICB9CiAgICAgIH0pCiAgICB9LCAyMDAwKQogIH0KCiAgJC5hamF4KHJvb3QgKyAnL3N0YXR1cy5qc29uJykKICAuZG9uZShmdW5jdGlvbihkYXRhKSB7CiAgICAkKCcjbW90aW9uX2xpbWl0JykudmFsKGRhdGEuY3VydmFscy5tb3Rpb25fbGltaXQpCiAgICAkKCcjYWRldF9saW1pdCcpLnZhbChkYXRhLmN1cnZhbHMuYWRldF9saW1pdCkKICAgIHZhciBncHNfYWN0aXZlID0gKGRhdGEuY3VydmFscy5ncHNfYWN0aXZlID09ICJvbiIpCiAgICBpZiAoZ3BzX2FjdGl2ZSkgewogICAgICBzaG93R3BzKCkKICAgIH0KCiAgICB2YXIgZ3BzY2IgPSAkKCcjZ3BzY2InKQogICAgICAuYXR0cigiY2hlY2tlZCIsIGdwc19hY3RpdmUpCiAgICAgIC5jaGFuZ2UoZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKGdwc2NiLmlzKCI6Y2hlY2tlZCIpKSB7CiAgICAgICAgICAkLmFqYXgocm9vdCsnL3NldHRpbmdzL2dwc19hY3RpdmU/c2V0PW9uJykuZmFpbChkaXNwbGF5X2Vycm9yKCdjYW5ub3Rfc2V0JywgJ2dwcycpKS5kb25lKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgc2hvd0dwcygpOwogICAgICAgICAgfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgJC5hamF4KHJvb3QrJy9zZXR0aW5ncy9ncHNfYWN0aXZlP3NldD1vZmYnKS5mYWlsKGRpc3BsYXlfZXJyb3IoJ2Nhbm5vdF9zZXQnLCAnZ3BzJykpCiAgICAgICAgICBoaWRlR3BzKCk7CiAgICAgICAgfQogICAgICB9KQogIH0pCiAgdmFyIHNlbnNpdGl2aXR5X2FwcGx5ID0gZnVuY3Rpb24gKGJ0bl9pZCwgdXJsLCB2YWx1ZV9pZCkgewogICAgJChidG5faWQpLmNsaWNrKGZ1bmN0aW9uKCkgewogICAgICAkLmFqYXgocm9vdCArICcvc2V0dGluZ3MvJyArIHVybCArICc/c2V0PScgKyAkKHZhbHVlX2lkKS52YWwoKSkKICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uKCkgewogICAgICAgICAgICQoJyNwaG90b19zcGlubmVyJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKQogICAgICAgIH0pCiAgICAgICAgLmRvbmUoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgJCgnI3Bob3RvX29rJykuZmFkZUluKCdzbG93JywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICQoJyNwaG90b19vaycpLmZhZGVPdXQoJ3Nsb3cnKQogICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgICAkKCcjcGhvdG9fc3Bpbm5lcicpLmZhZGVJbignZmFzdCcpCiAgICB9KQogIH0KCiAgc2Vuc2l0aXZpdHlfYXBwbHkoJyNtb3Rpb25fYXBwbHknLCAnbW90aW9uX2xpbWl0JywgJyNtb3Rpb25fbGltaXQnKTsKICBzZW5zaXRpdml0eV9hcHBseSgnI2FkZXRfYXBwbHknLCAnYWRldF9saW1pdCcsICcjYWRldF9saW1pdCcpOwogIAoKICAkLmFqYXgocm9vdCArICcvc2Vuc29ycy5qc29uJykgLy8gP2Zyb209ODk5OTk5OTk5OTk5OTk5OTk5OQogICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkgewogICAgICB2YXIgaGFzS2V5cyA9IGZhbHNlOwoKICAgICAgZm9yICh2YXIgayBpbiBkYXRhKSB7CiAgICAgICAgaGFzS2V5cyA9IHRydWU7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYgKGhhc0tleXMpIHsKICAgICAgICB1cGRhdGVTZWxlY3Rpb24oZGF0YSk7CiAgICAgICAgZGFxSGFuZGxlID0gc2V0VGltZW91dChmdW5jdGlvbigpe3VwZGF0ZVBsb3QoKX0sIDEwMCk7CiAgICAgICAgcmVkcmF3UGxvdEhhbmRsZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZWRyYXdQbG90KCl9LCAxMDApOwogICAgICB9IGVsc2UgewogICAgICAgICQoJyNpbml0X3dhcm5pbmcnKS5zaG93KCk7CiAgICAgIH0KICAgIH0pCiAgICAuZXJyb3IoZnVuY3Rpb24oeGhyLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikgewogICAgICAkKCcjaW5pdF9lcnJvcicpLnRleHQoJyInK3RleHRTdGF0dXMrJyInKTsKICAgICAgJCgnI2luaXRfYWxlcnQnKS5zaG93KCk7CiAgICB9KTsKICAgIC8vIEVuZCBpbml0Cn0KCgoKCnZhciByc3pPbkFxID0gdHJ1ZTsKdmFyIHN3aXRjaEFzcGVjdCA9IGZhbHNlOwoKZnVuY3Rpb24gbG9hZEltYWdlKGUpIHsKICB2YXIgb2xkc2hvd2luZyA9IHNob3dpbmc7CiAgc2hvd2luZyA9IHdvcmtpbmc7CiAgd29ya2luZyA9IG9sZHNob3dpbmc7CiAgc2hvd2luZy51bmJpbmQoKQogIHNob3dpbmcuY3NzKCJ6SW5kZXgiLCAxKTsKICBpZiAocnN6T25BcSkKICB7CiAgICByc3pPbkFxID0gZmFsc2U7CiAgICBvbkpzUmVzaXplKCk7CiAgfQogIGxvYWRGZWVkKCk7Cn0KCmZ1bmN0aW9uIGxvYWRKc1dpbmRvd2VkKCkKewogIHJzek9uQXEgPSBmYWxzZTsKICBpbml0SnNBcSgpOwp9CgpmdW5jdGlvbiBpbml0SnNBcSgpCnsKICB3b3JraW5nID0gJCgiI2ltZzEiKTsKICBzaG93aW5nID0gJCgiI2ltZzIiKTsKICBsb2FkRmVlZCgpOwp9CgpmdW5jdGlvbiBsb2FkRmVlZCgpIHsKICB3b3JraW5nLmNzcygiekluZGV4IiwgLTEpOwogIHdvcmtpbmcubG9hZChsb2FkSW1hZ2UpOwogIHdvcmtpbmcuYXR0cigic3JjIiwiL2dldD9ybmQ9IitNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwMDAwMCkpOwp9CgpmdW5jdGlvbiBvbkpzUmVzaXplKCkgewogICAgaWYgKHNob3dpbmcgPT0gbnVsbCkKICAgICAgICByZXR1cm47CiAgICB2YXIgd2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTsKICAgIHZhciBoZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7CiAgICB2YXIgcGFzcGVjdCA9IChzaG93aW5nLndpZHRoKCkrMC4wKS9zaG93aW5nLmhlaWdodCgpOwogICAgdmFyIHdhc3BlY3QgPSAoJCh3aW5kb3cpLndpZHRoKCkrMC4wKS8kKHdpbmRvdykuaGVpZ2h0KCk7CiAgICB2YXIgYXNwZWN0RGVwID0gKHBhc3BlY3QgPiB3YXNwZWN0KQogICAgdmFyIHBpYzEgPSAkKCIjaW1nMSIpOwogICAgdmFyIHBpYzIgPSAkKCIjaW1nMiIpOwogICAgaWYgKHN3aXRjaEFzcGVjdCkKICAgICAgICBhc3BlY3REZXAgPSAhYXNwZWN0RGVwOwogICAgaWYgKGFzcGVjdERlcCkKICAgIHsKICAgICAgICBwaWMxLmNzcygnd2lkdGgnLCB3aWR0aCkKICAgICAgICBwaWMyLmNzcygnd2lkdGgnLCB3aWR0aCkKICAgICAgICBwaWMxLmNzcygnaGVpZ2h0JywgJycpCiAgICAgICAgcGljMi5jc3MoJ2hlaWdodCcsICcnKQogICAgfQogICAgZWxzZQogICAgewogICAgICAgIHBpYzEuY3NzKCdoZWlnaHQnLCBoZWlnaHQpCiAgICAgICAgcGljMi5jc3MoJ2hlaWdodCcsIGhlaWdodCkKICAgICAgICBwaWMxLmNzcygnd2lkdGgnLCAnJykKICAgICAgICBwaWMyLmNzcygnd2lkdGgnLCAnJykKICAgIH0KfQoKZnVuY3Rpb24gc3dBc3BlY3QoKQp7CiAgICBzd2l0Y2hBc3BlY3QgPSAhc3dpdGNoQXNwZWN0OwogICAgb25Kc1Jlc2l6ZSgpOwp9CgpmdW5jdGlvbiBzd0JBc3BlY3QoKQp7CiAgICBzd2l0Y2hBc3BlY3QgPSAhc3dpdGNoQXNwZWN0OwogICAgb25Ccm93c2VyUmVzaXplKCk7Cn0KCmZ1bmN0aW9uIGxvYWRKc0Z1bGxzY3JlZW4oKQp7CiAgICAkKHdpbmRvdykucmVzaXplKG9uSnNSZXNpemUpOwogICAgaW5pdEpzQXEoKTsKfQoKZnVuY3Rpb24gb25Ccm93c2VyUmVzaXplKCkgewogICAgdmFyIHdpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7CiAgICB2YXIgaGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpOwogICAgdmFyIHNob3dpbmcgPSAkKCcjaW1nMScpCiAgICB2YXIgcGFzcGVjdCA9IChzaG93aW5nLndpZHRoKCkrMC4wKS9zaG93aW5nLmhlaWdodCgpOwogICAgdmFyIHdhc3BlY3QgPSAoJCh3aW5kb3cpLndpZHRoKCkrMC4wKS8kKHdpbmRvdykuaGVpZ2h0KCk7CiAgICB2YXIgYXNwZWN0RGVwID0gKHBhc3BlY3QgPiB3YXNwZWN0KQogICAgaWYgKHN3aXRjaEFzcGVjdCkKICAgICAgICBhc3BlY3REZXAgPSAhYXNwZWN0RGVwOwogICAgaWYgKGFzcGVjdERlcCkKICAgIHsKICAgICAgICBzaG93aW5nLmNzcygnd2lkdGgnLCB3aWR0aCkKICAgICAgICBzaG93aW5nLmNzcygnaGVpZ2h0JywgJycpCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgc2hvd2luZy5jc3MoJ2hlaWdodCcsIGhlaWdodCkKICAgICAgICBzaG93aW5nLmNzcygnd2lkdGgnLCAnJykKICAgIH0KfQoKZnVuY3Rpb24gbG9hZEJyb3dzZXJGdWxsc2NyZWVuKCkKewogICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7IG9uQnJvd3NlclJlc2l6ZSgpOyB9LCAxMDAwKTsKICAgICQod2luZG93KS5yZXNpemUob25Ccm93c2VyUmVzaXplKTsKfQoKCgpmdW5jdGlvbiBteV91cmwgKCkgewogICAgdmFyIHBvcnRfcGFydCA9ICI6IiArIHdpbmRvdy5sb2NhdGlvbi5wb3J0OwogICAgaWYgKHBvcnRfcGFydCA9PSAiOjgwIikgewogICAgICAgIHBvcnRfcGFydCA9ICIiOwogICAgfQogICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICIvLyIgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyBwb3J0X3BhcnQ7Cn0KCnNob3dIYXNoID0gZnVuY3Rpb24oKSB7CiAgJCgnLnBhbmVsLWNvbGxhcHNlJykuY29sbGFwc2UoJ2hpZGUnKQogIGlmICh3aW5kb3cubG9jYXRpb24uaGFzaCAhPSAiIikgewogICAgJCh3aW5kb3cubG9jYXRpb24uaGFzaCkuY29sbGFwc2UoJ3Nob3cnKTsKICB9Cn0KCmZ1bmN0aW9uIGluaXRWaWRlb0NoYXQoKSB7CiAgJCgnLnBhbmVsLWNvbGxhcHNlJykuY29sbGFwc2Uoeyd0b2dnbGUnOiBmYWxzZX0pCiAgJCgnLnJlcGwnKS5lYWNoKGZ1bmN0aW9uIChpLGVsKQogIHsKICAgIHZhciBzID0gJChlbCkudGV4dCgpOwogICAgcyA9IHMucmVwbGFjZSgvXCRVUkxcJC9nLCBteV91cmwoKSk7CiAgICBzID0gcy5yZXBsYWNlKC9cJElQXCQvZywgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lKTsKICAgIHMgPSBzLnJlcGxhY2UoL1wkUE9SVFwkL2csIHdpbmRvdy5sb2NhdGlvbi5wb3J0KTsKICAgICQoZWwpLnRleHQocykKICB9KQogICQoJy5oYXNoLWNoYW5nZScpLmNsaWNrKGZ1bmN0aW9uKCkgeyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IHNob3dIYXNoKCk7IH0sIDEwMCkgfSk7CiAgc2hvd0hhc2goKQogIAp9CgoKPC9zY3JpcHQ+Cgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ci8qIQogKiBqUXVlcnkgSmF2YVNjcmlwdCBMaWJyYXJ5IHYxLjQuNAogKiBodHRwOi8vanF1ZXJ5LmNvbS8KICoKICogQ29weXJpZ2h0IDIwMTAsIEpvaG4gUmVzaWcKICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIG9yIEdQTCBWZXJzaW9uIDIgbGljZW5zZXMuCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogSW5jbHVkZXMgU2l6emxlLmpzCiAqIGh0dHA6Ly9zaXp6bGVqcy5jb20vCiAqIENvcHlyaWdodCAyMDEwLCBUaGUgRG9qbyBGb3VuZGF0aW9uCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQsIEJTRCwgYW5kIEdQTCBMaWNlbnNlcy4KICoKICogRGF0ZTogVGh1IE5vdiAxMSAxOTowNDo1MyAyMDEwIC0wNTAwCiAqLwooZnVuY3Rpb24oRSxCKXtmdW5jdGlvbiBrYShhLGIsZCl7aWYoZD09PUImJmEubm9kZVR5cGU9PT0xKXtkPWEuZ2V0QXR0cmlidXRlKCJkYXRhLSIrYik7aWYodHlwZW9mIGQ9PT0ic3RyaW5nIil7dHJ5e2Q9ZD09PSJ0cnVlIj90cnVlOmQ9PT0iZmFsc2UiP2ZhbHNlOmQ9PT0ibnVsbCI/bnVsbDohYy5pc05hTihkKT9wYXJzZUZsb2F0KGQpOkphLnRlc3QoZCk/Yy5wYXJzZUpTT04oZCk6ZH1jYXRjaChlKXt9Yy5kYXRhKGEsYixkKX1lbHNlIGQ9Qn1yZXR1cm4gZH1mdW5jdGlvbiBVKCl7cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIGNhKCl7cmV0dXJuIHRydWV9ZnVuY3Rpb24gbGEoYSxiLGQpe2RbMF0udHlwZT1hO3JldHVybiBjLmV2ZW50LmhhbmRsZS5hcHBseShiLGQpfWZ1bmN0aW9uIEthKGEpe3ZhciBiLGQsZSxmLGgsbCxrLG8seCxyLEEsQz1bXTtmPVtdO2g9Yy5kYXRhKHRoaXMsdGhpcy5ub2RlVHlwZT8iZXZlbnRzIjoiX19ldmVudHNfXyIpO2lmKHR5cGVvZiBoPT09ImZ1bmN0aW9uIiloPQpoLmV2ZW50cztpZighKGEubGl2ZUZpcmVkPT09dGhpc3x8IWh8fCFoLmxpdmV8fGEuYnV0dG9uJiZhLnR5cGU9PT0iY2xpY2siKSl7aWYoYS5uYW1lc3BhY2UpQT1SZWdFeHAoIihefFxcLikiK2EubmFtZXNwYWNlLnNwbGl0KCIuIikuam9pbigiXFwuKD86LipcXC4pPyIpKyIoXFwufCQpIik7YS5saXZlRmlyZWQ9dGhpczt2YXIgSj1oLmxpdmUuc2xpY2UoMCk7Zm9yKGs9MDtrPEoubGVuZ3RoO2srKyl7aD1KW2tdO2gub3JpZ1R5cGUucmVwbGFjZShYLCIiKT09PWEudHlwZT9mLnB1c2goaC5zZWxlY3Rvcik6Si5zcGxpY2Uoay0tLDEpfWY9YyhhLnRhcmdldCkuY2xvc2VzdChmLGEuY3VycmVudFRhcmdldCk7bz0wO2Zvcih4PWYubGVuZ3RoO288eDtvKyspe3I9ZltvXTtmb3Ioaz0wO2s8Si5sZW5ndGg7aysrKXtoPUpba107aWYoci5zZWxlY3Rvcj09PWguc2VsZWN0b3ImJighQXx8QS50ZXN0KGgubmFtZXNwYWNlKSkpe2w9ci5lbGVtO2U9bnVsbDtpZihoLnByZVR5cGU9PT0ibW91c2VlbnRlciJ8fApoLnByZVR5cGU9PT0ibW91c2VsZWF2ZSIpe2EudHlwZT1oLnByZVR5cGU7ZT1jKGEucmVsYXRlZFRhcmdldCkuY2xvc2VzdChoLnNlbGVjdG9yKVswXX1pZighZXx8ZSE9PWwpQy5wdXNoKHtlbGVtOmwsaGFuZGxlT2JqOmgsbGV2ZWw6ci5sZXZlbH0pfX19bz0wO2Zvcih4PUMubGVuZ3RoO288eDtvKyspe2Y9Q1tvXTtpZihkJiZmLmxldmVsPmQpYnJlYWs7YS5jdXJyZW50VGFyZ2V0PWYuZWxlbTthLmRhdGE9Zi5oYW5kbGVPYmouZGF0YTthLmhhbmRsZU9iaj1mLmhhbmRsZU9iajtBPWYuaGFuZGxlT2JqLm9yaWdIYW5kbGVyLmFwcGx5KGYuZWxlbSxhcmd1bWVudHMpO2lmKEE9PT1mYWxzZXx8YS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXtkPWYubGV2ZWw7aWYoQT09PWZhbHNlKWI9ZmFsc2U7aWYoYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKWJyZWFrfX1yZXR1cm4gYn19ZnVuY3Rpb24gWShhLGIpe3JldHVybihhJiZhIT09IioiP2ErIi4iOiIiKStiLnJlcGxhY2UoTGEsCiJgIikucmVwbGFjZShNYSwiJiIpfWZ1bmN0aW9uIG1hKGEsYixkKXtpZihjLmlzRnVuY3Rpb24oYikpcmV0dXJuIGMuZ3JlcChhLGZ1bmN0aW9uKGYsaCl7cmV0dXJuISFiLmNhbGwoZixoLGYpPT09ZH0pO2Vsc2UgaWYoYi5ub2RlVHlwZSlyZXR1cm4gYy5ncmVwKGEsZnVuY3Rpb24oZil7cmV0dXJuIGY9PT1iPT09ZH0pO2Vsc2UgaWYodHlwZW9mIGI9PT0ic3RyaW5nIil7dmFyIGU9Yy5ncmVwKGEsZnVuY3Rpb24oZil7cmV0dXJuIGYubm9kZVR5cGU9PT0xfSk7aWYoTmEudGVzdChiKSlyZXR1cm4gYy5maWx0ZXIoYixlLCFkKTtlbHNlIGI9Yy5maWx0ZXIoYixlKX1yZXR1cm4gYy5ncmVwKGEsZnVuY3Rpb24oZil7cmV0dXJuIGMuaW5BcnJheShmLGIpPj0wPT09ZH0pfWZ1bmN0aW9uIG5hKGEsYil7dmFyIGQ9MDtiLmVhY2goZnVuY3Rpb24oKXtpZih0aGlzLm5vZGVOYW1lPT09KGFbZF0mJmFbZF0ubm9kZU5hbWUpKXt2YXIgZT1jLmRhdGEoYVtkKytdKSxmPWMuZGF0YSh0aGlzLAplKTtpZihlPWUmJmUuZXZlbnRzKXtkZWxldGUgZi5oYW5kbGU7Zi5ldmVudHM9e307Zm9yKHZhciBoIGluIGUpZm9yKHZhciBsIGluIGVbaF0pYy5ldmVudC5hZGQodGhpcyxoLGVbaF1bbF0sZVtoXVtsXS5kYXRhKX19fSl9ZnVuY3Rpb24gT2EoYSxiKXtiLnNyYz9jLmFqYXgoe3VybDpiLnNyYyxhc3luYzpmYWxzZSxkYXRhVHlwZToic2NyaXB0In0pOmMuZ2xvYmFsRXZhbChiLnRleHR8fGIudGV4dENvbnRlbnR8fGIuaW5uZXJIVE1MfHwiIik7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYil9ZnVuY3Rpb24gb2EoYSxiLGQpe3ZhciBlPWI9PT0id2lkdGgiP2Eub2Zmc2V0V2lkdGg6YS5vZmZzZXRIZWlnaHQ7aWYoZD09PSJib3JkZXIiKXJldHVybiBlO2MuZWFjaChiPT09IndpZHRoIj9QYTpRYSxmdW5jdGlvbigpe2R8fChlLT1wYXJzZUZsb2F0KGMuY3NzKGEsInBhZGRpbmciK3RoaXMpKXx8MCk7aWYoZD09PSJtYXJnaW4iKWUrPXBhcnNlRmxvYXQoYy5jc3MoYSwKIm1hcmdpbiIrdGhpcykpfHwwO2Vsc2UgZS09cGFyc2VGbG9hdChjLmNzcyhhLCJib3JkZXIiK3RoaXMrIldpZHRoIikpfHwwfSk7cmV0dXJuIGV9ZnVuY3Rpb24gZGEoYSxiLGQsZSl7aWYoYy5pc0FycmF5KGIpJiZiLmxlbmd0aCljLmVhY2goYixmdW5jdGlvbihmLGgpe2R8fFJhLnRlc3QoYSk/ZShhLGgpOmRhKGErIlsiKyh0eXBlb2YgaD09PSJvYmplY3QifHxjLmlzQXJyYXkoaCk/ZjoiIikrIl0iLGgsZCxlKX0pO2Vsc2UgaWYoIWQmJmIhPW51bGwmJnR5cGVvZiBiPT09Im9iamVjdCIpYy5pc0VtcHR5T2JqZWN0KGIpP2UoYSwiIik6Yy5lYWNoKGIsZnVuY3Rpb24oZixoKXtkYShhKyJbIitmKyJdIixoLGQsZSl9KTtlbHNlIGUoYSxiKX1mdW5jdGlvbiBTKGEsYil7dmFyIGQ9e307Yy5lYWNoKHBhLmNvbmNhdC5hcHBseShbXSxwYS5zbGljZSgwLGIpKSxmdW5jdGlvbigpe2RbdGhpc109YX0pO3JldHVybiBkfWZ1bmN0aW9uIHFhKGEpe2lmKCFlYVthXSl7dmFyIGI9YygiPCIrCmErIj4iKS5hcHBlbmRUbygiYm9keSIpLGQ9Yi5jc3MoImRpc3BsYXkiKTtiLnJlbW92ZSgpO2lmKGQ9PT0ibm9uZSJ8fGQ9PT0iIilkPSJibG9jayI7ZWFbYV09ZH1yZXR1cm4gZWFbYV19ZnVuY3Rpb24gZmEoYSl7cmV0dXJuIGMuaXNXaW5kb3coYSk/YTphLm5vZGVUeXBlPT09OT9hLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvdzpmYWxzZX12YXIgdD1FLmRvY3VtZW50LGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7aWYoIWIuaXNSZWFkeSl7dHJ5e3QuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsKCJsZWZ0Iil9Y2F0Y2goail7c2V0VGltZW91dChhLDEpO3JldHVybn1iLnJlYWR5KCl9fXZhciBiPWZ1bmN0aW9uKGoscyl7cmV0dXJuIG5ldyBiLmZuLmluaXQoaixzKX0sZD1FLmpRdWVyeSxlPUUuJCxmLGg9L14oPzpbXjxdKig8W1x3XFddKz4pW14+XSokfCMoW1x3XC1dKykkKS8sbD0vXFMvLGs9L15ccysvLG89L1xzKyQvLHg9L1xXLyxyPS9cZC8sQT0vXjwoXHcrKVxzKlwvPz4oPzo8XC9cMT4pPyQvLApDPS9eW1xdLDp7fVxzXSokLyxKPS9cXCg/OlsiXFxcL2JmbnJ0XXx1WzAtOWEtZkEtRl17NH0pL2csdz0vIlteIlxcXG5ccl0qInx0cnVlfGZhbHNlfG51bGx8LT9cZCsoPzpcLlxkKik/KD86W2VFXVsrXC1dP1xkKyk/L2csST0vKD86Xnw6fCwpKD86XHMqXFspKy9nLEw9Lyh3ZWJraXQpWyBcL10oW1x3Ll0rKS8sZz0vKG9wZXJhKSg/Oi4qdmVyc2lvbik/WyBcL10oW1x3Ll0rKS8saT0vKG1zaWUpIChbXHcuXSspLyxuPS8obW96aWxsYSkoPzouKj8gcnY6KFtcdy5dKykpPy8sbT1uYXZpZ2F0b3IudXNlckFnZW50LHA9ZmFsc2UscT1bXSx1LHk9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxGPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksTT1BcnJheS5wcm90b3R5cGUucHVzaCxOPUFycmF5LnByb3RvdHlwZS5zbGljZSxPPVN0cmluZy5wcm90b3R5cGUudHJpbSxEPUFycmF5LnByb3RvdHlwZS5pbmRleE9mLFI9e307Yi5mbj1iLnByb3RvdHlwZT17aW5pdDpmdW5jdGlvbihqLApzKXt2YXIgdix6LEg7aWYoIWopcmV0dXJuIHRoaXM7aWYoai5ub2RlVHlwZSl7dGhpcy5jb250ZXh0PXRoaXNbMF09ajt0aGlzLmxlbmd0aD0xO3JldHVybiB0aGlzfWlmKGo9PT0iYm9keSImJiFzJiZ0LmJvZHkpe3RoaXMuY29udGV4dD10O3RoaXNbMF09dC5ib2R5O3RoaXMuc2VsZWN0b3I9ImJvZHkiO3RoaXMubGVuZ3RoPTE7cmV0dXJuIHRoaXN9aWYodHlwZW9mIGo9PT0ic3RyaW5nIilpZigodj1oLmV4ZWMoaikpJiYodlsxXXx8IXMpKWlmKHZbMV0pe0g9cz9zLm93bmVyRG9jdW1lbnR8fHM6dDtpZih6PUEuZXhlYyhqKSlpZihiLmlzUGxhaW5PYmplY3Qocykpe2o9W3QuY3JlYXRlRWxlbWVudCh6WzFdKV07Yi5mbi5hdHRyLmNhbGwoaixzLHRydWUpfWVsc2Ugaj1bSC5jcmVhdGVFbGVtZW50KHpbMV0pXTtlbHNle3o9Yi5idWlsZEZyYWdtZW50KFt2WzFdXSxbSF0pO2o9KHouY2FjaGVhYmxlP3ouZnJhZ21lbnQuY2xvbmVOb2RlKHRydWUpOnouZnJhZ21lbnQpLmNoaWxkTm9kZXN9cmV0dXJuIGIubWVyZ2UodGhpcywKail9ZWxzZXtpZigoej10LmdldEVsZW1lbnRCeUlkKHZbMl0pKSYmei5wYXJlbnROb2RlKXtpZih6LmlkIT09dlsyXSlyZXR1cm4gZi5maW5kKGopO3RoaXMubGVuZ3RoPTE7dGhpc1swXT16fXRoaXMuY29udGV4dD10O3RoaXMuc2VsZWN0b3I9ajtyZXR1cm4gdGhpc31lbHNlIGlmKCFzJiYheC50ZXN0KGopKXt0aGlzLnNlbGVjdG9yPWo7dGhpcy5jb250ZXh0PXQ7aj10LmdldEVsZW1lbnRzQnlUYWdOYW1lKGopO3JldHVybiBiLm1lcmdlKHRoaXMsail9ZWxzZSByZXR1cm4hc3x8cy5qcXVlcnk/KHN8fGYpLmZpbmQoaik6YihzKS5maW5kKGopO2Vsc2UgaWYoYi5pc0Z1bmN0aW9uKGopKXJldHVybiBmLnJlYWR5KGopO2lmKGouc2VsZWN0b3IhPT1CKXt0aGlzLnNlbGVjdG9yPWouc2VsZWN0b3I7dGhpcy5jb250ZXh0PWouY29udGV4dH1yZXR1cm4gYi5tYWtlQXJyYXkoaix0aGlzKX0sc2VsZWN0b3I6IiIsanF1ZXJ5OiIxLjQuNCIsbGVuZ3RoOjAsc2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sCnRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gTi5jYWxsKHRoaXMsMCl9LGdldDpmdW5jdGlvbihqKXtyZXR1cm4gaj09bnVsbD90aGlzLnRvQXJyYXkoKTpqPDA/dGhpcy5zbGljZShqKVswXTp0aGlzW2pdfSxwdXNoU3RhY2s6ZnVuY3Rpb24oaixzLHYpe3ZhciB6PWIoKTtiLmlzQXJyYXkoaik/TS5hcHBseSh6LGopOmIubWVyZ2UoeixqKTt6LnByZXZPYmplY3Q9dGhpczt6LmNvbnRleHQ9dGhpcy5jb250ZXh0O2lmKHM9PT0iZmluZCIpei5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yKyh0aGlzLnNlbGVjdG9yPyIgIjoiIikrdjtlbHNlIGlmKHMpei5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yKyIuIitzKyIoIit2KyIpIjtyZXR1cm4gen0sZWFjaDpmdW5jdGlvbihqLHMpe3JldHVybiBiLmVhY2godGhpcyxqLHMpfSxyZWFkeTpmdW5jdGlvbihqKXtiLmJpbmRSZWFkeSgpO2lmKGIuaXNSZWFkeSlqLmNhbGwodCxiKTtlbHNlIHEmJnEucHVzaChqKTtyZXR1cm4gdGhpc30sZXE6ZnVuY3Rpb24oail7cmV0dXJuIGo9PT0KLTE/dGhpcy5zbGljZShqKTp0aGlzLnNsaWNlKGosK2orMSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKE4uYXBwbHkodGhpcyxhcmd1bWVudHMpLCJzbGljZSIsTi5jYWxsKGFyZ3VtZW50cykuam9pbigiLCIpKX0sbWFwOmZ1bmN0aW9uKGope3JldHVybiB0aGlzLnB1c2hTdGFjayhiLm1hcCh0aGlzLGZ1bmN0aW9uKHMsdil7cmV0dXJuIGouY2FsbChzLHYscyl9KSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fGIobnVsbCl9LHB1c2g6TSxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX07Yi5mbi5pbml0LnByb3RvdHlwZT1iLmZuO2IuZXh0ZW5kPWIuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGoscyx2LHosSCxHPWFyZ3VtZW50c1swXXx8e30sSz0xLFE9YXJndW1lbnRzLmxlbmd0aCxnYT1mYWxzZTsKaWYodHlwZW9mIEc9PT0iYm9vbGVhbiIpe2dhPUc7Rz1hcmd1bWVudHNbMV18fHt9O0s9Mn1pZih0eXBlb2YgRyE9PSJvYmplY3QiJiYhYi5pc0Z1bmN0aW9uKEcpKUc9e307aWYoUT09PUspe0c9dGhpczstLUt9Zm9yKDtLPFE7SysrKWlmKChqPWFyZ3VtZW50c1tLXSkhPW51bGwpZm9yKHMgaW4gail7dj1HW3NdO3o9altzXTtpZihHIT09eilpZihnYSYmeiYmKGIuaXNQbGFpbk9iamVjdCh6KXx8KEg9Yi5pc0FycmF5KHopKSkpe2lmKEgpe0g9ZmFsc2U7dj12JiZiLmlzQXJyYXkodik/djpbXX1lbHNlIHY9diYmYi5pc1BsYWluT2JqZWN0KHYpP3Y6e307R1tzXT1iLmV4dGVuZChnYSx2LHopfWVsc2UgaWYoeiE9PUIpR1tzXT16fXJldHVybiBHfTtiLmV4dGVuZCh7bm9Db25mbGljdDpmdW5jdGlvbihqKXtFLiQ9ZTtpZihqKUUualF1ZXJ5PWQ7cmV0dXJuIGJ9LGlzUmVhZHk6ZmFsc2UscmVhZHlXYWl0OjEscmVhZHk6ZnVuY3Rpb24oail7aj09PXRydWUmJmIucmVhZHlXYWl0LS07CmlmKCFiLnJlYWR5V2FpdHx8aiE9PXRydWUmJiFiLmlzUmVhZHkpe2lmKCF0LmJvZHkpcmV0dXJuIHNldFRpbWVvdXQoYi5yZWFkeSwxKTtiLmlzUmVhZHk9dHJ1ZTtpZighKGohPT10cnVlJiYtLWIucmVhZHlXYWl0PjApKWlmKHEpe3ZhciBzPTAsdj1xO2ZvcihxPW51bGw7aj12W3MrK107KWouY2FsbCh0LGIpO2IuZm4udHJpZ2dlciYmYih0KS50cmlnZ2VyKCJyZWFkeSIpLnVuYmluZCgicmVhZHkiKX19fSxiaW5kUmVhZHk6ZnVuY3Rpb24oKXtpZighcCl7cD10cnVlO2lmKHQucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSIpcmV0dXJuIHNldFRpbWVvdXQoYi5yZWFkeSwxKTtpZih0LmFkZEV2ZW50TGlzdGVuZXIpe3QuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsdSxmYWxzZSk7RS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixiLnJlYWR5LGZhbHNlKX1lbHNlIGlmKHQuYXR0YWNoRXZlbnQpe3QuYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsdSk7RS5hdHRhY2hFdmVudCgib25sb2FkIiwKYi5yZWFkeSk7dmFyIGo9ZmFsc2U7dHJ5e2o9RS5mcmFtZUVsZW1lbnQ9PW51bGx9Y2F0Y2gocyl7fXQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsJiZqJiZhKCl9fX0saXNGdW5jdGlvbjpmdW5jdGlvbihqKXtyZXR1cm4gYi50eXBlKGopPT09ImZ1bmN0aW9uIn0saXNBcnJheTpBcnJheS5pc0FycmF5fHxmdW5jdGlvbihqKXtyZXR1cm4gYi50eXBlKGopPT09ImFycmF5In0saXNXaW5kb3c6ZnVuY3Rpb24oail7cmV0dXJuIGomJnR5cGVvZiBqPT09Im9iamVjdCImJiJzZXRJbnRlcnZhbCJpbiBqfSxpc05hTjpmdW5jdGlvbihqKXtyZXR1cm4gaj09bnVsbHx8IXIudGVzdChqKXx8aXNOYU4oail9LHR5cGU6ZnVuY3Rpb24oail7cmV0dXJuIGo9PW51bGw/U3RyaW5nKGopOlJbeS5jYWxsKGopXXx8Im9iamVjdCJ9LGlzUGxhaW5PYmplY3Q6ZnVuY3Rpb24oail7aWYoIWp8fGIudHlwZShqKSE9PSJvYmplY3QifHxqLm5vZGVUeXBlfHxiLmlzV2luZG93KGopKXJldHVybiBmYWxzZTtpZihqLmNvbnN0cnVjdG9yJiYKIUYuY2FsbChqLCJjb25zdHJ1Y3RvciIpJiYhRi5jYWxsKGouY29uc3RydWN0b3IucHJvdG90eXBlLCJpc1Byb3RvdHlwZU9mIikpcmV0dXJuIGZhbHNlO2Zvcih2YXIgcyBpbiBqKTtyZXR1cm4gcz09PUJ8fEYuY2FsbChqLHMpfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGope2Zvcih2YXIgcyBpbiBqKXJldHVybiBmYWxzZTtyZXR1cm4gdHJ1ZX0sZXJyb3I6ZnVuY3Rpb24oail7dGhyb3cgajt9LHBhcnNlSlNPTjpmdW5jdGlvbihqKXtpZih0eXBlb2YgaiE9PSJzdHJpbmcifHwhailyZXR1cm4gbnVsbDtqPWIudHJpbShqKTtpZihDLnRlc3Qoai5yZXBsYWNlKEosIkAiKS5yZXBsYWNlKHcsIl0iKS5yZXBsYWNlKEksIiIpKSlyZXR1cm4gRS5KU09OJiZFLkpTT04ucGFyc2U/RS5KU09OLnBhcnNlKGopOihuZXcgRnVuY3Rpb24oInJldHVybiAiK2opKSgpO2Vsc2UgYi5lcnJvcigiSW52YWxpZCBKU09OOiAiK2opfSxub29wOmZ1bmN0aW9uKCl7fSxnbG9iYWxFdmFsOmZ1bmN0aW9uKGope2lmKGomJgpsLnRlc3Qoaikpe3ZhciBzPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXXx8dC5kb2N1bWVudEVsZW1lbnQsdj10LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO3YudHlwZT0idGV4dC9qYXZhc2NyaXB0IjtpZihiLnN1cHBvcnQuc2NyaXB0RXZhbCl2LmFwcGVuZENoaWxkKHQuY3JlYXRlVGV4dE5vZGUoaikpO2Vsc2Ugdi50ZXh0PWo7cy5pbnNlcnRCZWZvcmUodixzLmZpcnN0Q2hpbGQpO3MucmVtb3ZlQ2hpbGQodil9fSxub2RlTmFtZTpmdW5jdGlvbihqLHMpe3JldHVybiBqLm5vZGVOYW1lJiZqLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk9PT1zLnRvVXBwZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oaixzLHYpe3ZhciB6LEg9MCxHPWoubGVuZ3RoLEs9Rz09PUJ8fGIuaXNGdW5jdGlvbihqKTtpZih2KWlmKEspZm9yKHogaW4gail7aWYocy5hcHBseShqW3pdLHYpPT09ZmFsc2UpYnJlYWt9ZWxzZSBmb3IoO0g8Rzspe2lmKHMuYXBwbHkoaltIKytdLHYpPT09ZmFsc2UpYnJlYWt9ZWxzZSBpZihLKWZvcih6IGluIGope2lmKHMuY2FsbChqW3pdLAp6LGpbel0pPT09ZmFsc2UpYnJlYWt9ZWxzZSBmb3Iodj1qWzBdO0g8RyYmcy5jYWxsKHYsSCx2KSE9PWZhbHNlO3Y9alsrK0hdKTtyZXR1cm4gan0sdHJpbTpPP2Z1bmN0aW9uKGope3JldHVybiBqPT1udWxsPyIiOk8uY2FsbChqKX06ZnVuY3Rpb24oail7cmV0dXJuIGo9PW51bGw/IiI6ai50b1N0cmluZygpLnJlcGxhY2UoaywiIikucmVwbGFjZShvLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGoscyl7dmFyIHY9c3x8W107aWYoaiE9bnVsbCl7dmFyIHo9Yi50eXBlKGopO2oubGVuZ3RoPT1udWxsfHx6PT09InN0cmluZyJ8fHo9PT0iZnVuY3Rpb24ifHx6PT09InJlZ2V4cCJ8fGIuaXNXaW5kb3coaik/TS5jYWxsKHYsaik6Yi5tZXJnZSh2LGopfXJldHVybiB2fSxpbkFycmF5OmZ1bmN0aW9uKGoscyl7aWYocy5pbmRleE9mKXJldHVybiBzLmluZGV4T2Yoaik7Zm9yKHZhciB2PTAsej1zLmxlbmd0aDt2PHo7disrKWlmKHNbdl09PT1qKXJldHVybiB2O3JldHVybi0xfSxtZXJnZTpmdW5jdGlvbihqLApzKXt2YXIgdj1qLmxlbmd0aCx6PTA7aWYodHlwZW9mIHMubGVuZ3RoPT09Im51bWJlciIpZm9yKHZhciBIPXMubGVuZ3RoO3o8SDt6Kyspalt2KytdPXNbel07ZWxzZSBmb3IoO3Nbel0hPT1COylqW3YrK109c1t6KytdO2oubGVuZ3RoPXY7cmV0dXJuIGp9LGdyZXA6ZnVuY3Rpb24oaixzLHYpe3ZhciB6PVtdLEg7dj0hIXY7Zm9yKHZhciBHPTAsSz1qLmxlbmd0aDtHPEs7RysrKXtIPSEhcyhqW0ddLEcpO3YhPT1IJiZ6LnB1c2goaltHXSl9cmV0dXJuIHp9LG1hcDpmdW5jdGlvbihqLHMsdil7Zm9yKHZhciB6PVtdLEgsRz0wLEs9ai5sZW5ndGg7RzxLO0crKyl7SD1zKGpbR10sRyx2KTtpZihIIT1udWxsKXpbei5sZW5ndGhdPUh9cmV0dXJuIHouY29uY2F0LmFwcGx5KFtdLHopfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oaixzLHYpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0yKWlmKHR5cGVvZiBzPT09InN0cmluZyIpe3Y9ajtqPXZbc107cz1CfWVsc2UgaWYocyYmIWIuaXNGdW5jdGlvbihzKSl7dj0KcztzPUJ9aWYoIXMmJmopcz1mdW5jdGlvbigpe3JldHVybiBqLmFwcGx5KHZ8fHRoaXMsYXJndW1lbnRzKX07aWYoailzLmd1aWQ9ai5ndWlkPWouZ3VpZHx8cy5ndWlkfHxiLmd1aWQrKztyZXR1cm4gc30sYWNjZXNzOmZ1bmN0aW9uKGoscyx2LHosSCxHKXt2YXIgSz1qLmxlbmd0aDtpZih0eXBlb2Ygcz09PSJvYmplY3QiKXtmb3IodmFyIFEgaW4gcyliLmFjY2VzcyhqLFEsc1tRXSx6LEgsdik7cmV0dXJuIGp9aWYodiE9PUIpe3o9IUcmJnomJmIuaXNGdW5jdGlvbih2KTtmb3IoUT0wO1E8SztRKyspSChqW1FdLHMsej92LmNhbGwoaltRXSxRLEgoaltRXSxzKSk6dixHKTtyZXR1cm4gan1yZXR1cm4gSz9IKGpbMF0scyk6Qn0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9LHVhTWF0Y2g6ZnVuY3Rpb24oail7aj1qLnRvTG93ZXJDYXNlKCk7aj1MLmV4ZWMoail8fGcuZXhlYyhqKXx8aS5leGVjKGopfHxqLmluZGV4T2YoImNvbXBhdGlibGUiKTwwJiZuLmV4ZWMoail8fApbXTtyZXR1cm57YnJvd3NlcjpqWzFdfHwiIix2ZXJzaW9uOmpbMl18fCIwIn19LGJyb3dzZXI6e319KTtiLmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QiLnNwbGl0KCIgIiksZnVuY3Rpb24oaixzKXtSWyJbb2JqZWN0ICIrcysiXSJdPXMudG9Mb3dlckNhc2UoKX0pO209Yi51YU1hdGNoKG0pO2lmKG0uYnJvd3Nlcil7Yi5icm93c2VyW20uYnJvd3Nlcl09dHJ1ZTtiLmJyb3dzZXIudmVyc2lvbj1tLnZlcnNpb259aWYoYi5icm93c2VyLndlYmtpdCliLmJyb3dzZXIuc2FmYXJpPXRydWU7aWYoRCliLmluQXJyYXk9ZnVuY3Rpb24oaixzKXtyZXR1cm4gRC5jYWxsKHMsail9O2lmKCEvXHMvLnRlc3QoIlx1MDBhMCIpKXtrPS9eW1xzXHhBMF0rLztvPS9bXHNceEEwXSskL31mPWIodCk7aWYodC5hZGRFdmVudExpc3RlbmVyKXU9ZnVuY3Rpb24oKXt0LnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLHUsCmZhbHNlKTtiLnJlYWR5KCl9O2Vsc2UgaWYodC5hdHRhY2hFdmVudCl1PWZ1bmN0aW9uKCl7aWYodC5yZWFkeVN0YXRlPT09ImNvbXBsZXRlIil7dC5kZXRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIix1KTtiLnJlYWR5KCl9fTtyZXR1cm4gRS5qUXVlcnk9RS4kPWJ9KCk7KGZ1bmN0aW9uKCl7Yy5zdXBwb3J0PXt9O3ZhciBhPXQuZG9jdW1lbnRFbGVtZW50LGI9dC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxkPXQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT0ic2NyaXB0IitjLm5vdygpO2Quc3R5bGUuZGlzcGxheT0ibm9uZSI7ZC5pbm5lckhUTUw9IiAgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYScgc3R5bGU9J2NvbG9yOnJlZDtmbG9hdDpsZWZ0O29wYWNpdHk6LjU1Oyc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz4iO3ZhciBmPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSxoPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSxsPXQuY3JlYXRlRWxlbWVudCgic2VsZWN0IiksCms9bC5hcHBlbmRDaGlsZCh0LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtpZighKCFmfHwhZi5sZW5ndGh8fCFoKSl7Yy5zdXBwb3J0PXtsZWFkaW5nV2hpdGVzcGFjZTpkLmZpcnN0Q2hpbGQubm9kZVR5cGU9PT0zLHRib2R5OiFkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpLmxlbmd0aCxodG1sU2VyaWFsaXplOiEhZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLmxlbmd0aCxzdHlsZTovcmVkLy50ZXN0KGguZ2V0QXR0cmlidXRlKCJzdHlsZSIpKSxocmVmTm9ybWFsaXplZDpoLmdldEF0dHJpYnV0ZSgiaHJlZiIpPT09Ii9hIixvcGFjaXR5Oi9eMC41NSQvLnRlc3QoaC5zdHlsZS5vcGFjaXR5KSxjc3NGbG9hdDohIWguc3R5bGUuY3NzRmxvYXQsY2hlY2tPbjpkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpWzBdLnZhbHVlPT09Im9uIixvcHRTZWxlY3RlZDprLnNlbGVjdGVkLGRlbGV0ZUV4cGFuZG86dHJ1ZSxvcHREaXNhYmxlZDpmYWxzZSxjaGVja0Nsb25lOmZhbHNlLApzY3JpcHRFdmFsOmZhbHNlLG5vQ2xvbmVFdmVudDp0cnVlLGJveE1vZGVsOm51bGwsaW5saW5lQmxvY2tOZWVkc0xheW91dDpmYWxzZSxzaHJpbmtXcmFwQmxvY2tzOmZhbHNlLHJlbGlhYmxlSGlkZGVuT2Zmc2V0czp0cnVlfTtsLmRpc2FibGVkPXRydWU7Yy5zdXBwb3J0Lm9wdERpc2FibGVkPSFrLmRpc2FibGVkO2IudHlwZT0idGV4dC9qYXZhc2NyaXB0Ijt0cnl7Yi5hcHBlbmRDaGlsZCh0LmNyZWF0ZVRleHROb2RlKCJ3aW5kb3cuIitlKyI9MTsiKSl9Y2F0Y2gobyl7fWEuaW5zZXJ0QmVmb3JlKGIsYS5maXJzdENoaWxkKTtpZihFW2VdKXtjLnN1cHBvcnQuc2NyaXB0RXZhbD10cnVlO2RlbGV0ZSBFW2VdfXRyeXtkZWxldGUgYi50ZXN0fWNhdGNoKHgpe2Muc3VwcG9ydC5kZWxldGVFeHBhbmRvPWZhbHNlfWEucmVtb3ZlQ2hpbGQoYik7aWYoZC5hdHRhY2hFdmVudCYmZC5maXJlRXZlbnQpe2QuYXR0YWNoRXZlbnQoIm9uY2xpY2siLGZ1bmN0aW9uIHIoKXtjLnN1cHBvcnQubm9DbG9uZUV2ZW50PQpmYWxzZTtkLmRldGFjaEV2ZW50KCJvbmNsaWNrIixyKX0pO2QuY2xvbmVOb2RlKHRydWUpLmZpcmVFdmVudCgib25jbGljayIpfWQ9dC5jcmVhdGVFbGVtZW50KCJkaXYiKTtkLmlubmVySFRNTD0iPGlucHV0IHR5cGU9J3JhZGlvJyBuYW1lPSdyYWRpb3Rlc3QnIGNoZWNrZWQ9J2NoZWNrZWQnLz4iO2E9dC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7YS5hcHBlbmRDaGlsZChkLmZpcnN0Q2hpbGQpO2Muc3VwcG9ydC5jaGVja0Nsb25lPWEuY2xvbmVOb2RlKHRydWUpLmNsb25lTm9kZSh0cnVlKS5sYXN0Q2hpbGQuY2hlY2tlZDtjKGZ1bmN0aW9uKCl7dmFyIHI9dC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyLnN0eWxlLndpZHRoPXIuc3R5bGUucGFkZGluZ0xlZnQ9IjFweCI7dC5ib2R5LmFwcGVuZENoaWxkKHIpO2MuYm94TW9kZWw9Yy5zdXBwb3J0LmJveE1vZGVsPXIub2Zmc2V0V2lkdGg9PT0yO2lmKCJ6b29tImluIHIuc3R5bGUpe3Iuc3R5bGUuZGlzcGxheT0iaW5saW5lIjtyLnN0eWxlLnpvb209CjE7Yy5zdXBwb3J0LmlubGluZUJsb2NrTmVlZHNMYXlvdXQ9ci5vZmZzZXRXaWR0aD09PTI7ci5zdHlsZS5kaXNwbGF5PSIiO3IuaW5uZXJIVE1MPSI8ZGl2IHN0eWxlPSd3aWR0aDo0cHg7Jz48L2Rpdj4iO2Muc3VwcG9ydC5zaHJpbmtXcmFwQmxvY2tzPXIub2Zmc2V0V2lkdGghPT0yfXIuaW5uZXJIVE1MPSI8dGFibGU+PHRyPjx0ZCBzdHlsZT0ncGFkZGluZzowO2Rpc3BsYXk6bm9uZSc+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPiI7dmFyIEE9ci5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGQiKTtjLnN1cHBvcnQucmVsaWFibGVIaWRkZW5PZmZzZXRzPUFbMF0ub2Zmc2V0SGVpZ2h0PT09MDtBWzBdLnN0eWxlLmRpc3BsYXk9IiI7QVsxXS5zdHlsZS5kaXNwbGF5PSJub25lIjtjLnN1cHBvcnQucmVsaWFibGVIaWRkZW5PZmZzZXRzPWMuc3VwcG9ydC5yZWxpYWJsZUhpZGRlbk9mZnNldHMmJkFbMF0ub2Zmc2V0SGVpZ2h0PT09MDtyLmlubmVySFRNTD0iIjt0LmJvZHkucmVtb3ZlQ2hpbGQocikuc3R5bGUuZGlzcGxheT0KIm5vbmUifSk7YT1mdW5jdGlvbihyKXt2YXIgQT10LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3I9Im9uIityO3ZhciBDPXIgaW4gQTtpZighQyl7QS5zZXRBdHRyaWJ1dGUociwicmV0dXJuOyIpO0M9dHlwZW9mIEFbcl09PT0iZnVuY3Rpb24ifXJldHVybiBDfTtjLnN1cHBvcnQuc3VibWl0QnViYmxlcz1hKCJzdWJtaXQiKTtjLnN1cHBvcnQuY2hhbmdlQnViYmxlcz1hKCJjaGFuZ2UiKTthPWI9ZD1mPWg9bnVsbH19KSgpO3ZhciByYT17fSxKYT0vXig/Olx7LipcfXxcWy4qXF0pJC87Yy5leHRlbmQoe2NhY2hlOnt9LHV1aWQ6MCxleHBhbmRvOiJqUXVlcnkiK2Mubm93KCksbm9EYXRhOntlbWJlZDp0cnVlLG9iamVjdDoiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIixhcHBsZXQ6dHJ1ZX0sZGF0YTpmdW5jdGlvbihhLGIsZCl7aWYoYy5hY2NlcHREYXRhKGEpKXthPWE9PUU/cmE6YTt2YXIgZT1hLm5vZGVUeXBlLGY9ZT9hW2MuZXhwYW5kb106bnVsbCxoPQpjLmNhY2hlO2lmKCEoZSYmIWYmJnR5cGVvZiBiPT09InN0cmluZyImJmQ9PT1CKSl7aWYoZSlmfHwoYVtjLmV4cGFuZG9dPWY9KytjLnV1aWQpO2Vsc2UgaD1hO2lmKHR5cGVvZiBiPT09Im9iamVjdCIpaWYoZSloW2ZdPWMuZXh0ZW5kKGhbZl0sYik7ZWxzZSBjLmV4dGVuZChoLGIpO2Vsc2UgaWYoZSYmIWhbZl0paFtmXT17fTthPWU/aFtmXTpoO2lmKGQhPT1CKWFbYl09ZDtyZXR1cm4gdHlwZW9mIGI9PT0ic3RyaW5nIj9hW2JdOmF9fX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe2lmKGMuYWNjZXB0RGF0YShhKSl7YT1hPT1FP3JhOmE7dmFyIGQ9YS5ub2RlVHlwZSxlPWQ/YVtjLmV4cGFuZG9dOmEsZj1jLmNhY2hlLGg9ZD9mW2VdOmU7aWYoYil7aWYoaCl7ZGVsZXRlIGhbYl07ZCYmYy5pc0VtcHR5T2JqZWN0KGgpJiZjLnJlbW92ZURhdGEoYSl9fWVsc2UgaWYoZCYmYy5zdXBwb3J0LmRlbGV0ZUV4cGFuZG8pZGVsZXRlIGFbYy5leHBhbmRvXTtlbHNlIGlmKGEucmVtb3ZlQXR0cmlidXRlKWEucmVtb3ZlQXR0cmlidXRlKGMuZXhwYW5kbyk7CmVsc2UgaWYoZClkZWxldGUgZltlXTtlbHNlIGZvcih2YXIgbCBpbiBhKWRlbGV0ZSBhW2xdfX0sYWNjZXB0RGF0YTpmdW5jdGlvbihhKXtpZihhLm5vZGVOYW1lKXt2YXIgYj1jLm5vRGF0YVthLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldO2lmKGIpcmV0dXJuIShiPT09dHJ1ZXx8YS5nZXRBdHRyaWJ1dGUoImNsYXNzaWQiKSE9PWIpfXJldHVybiB0cnVlfX0pO2MuZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGQ9bnVsbDtpZih0eXBlb2YgYT09PSJ1bmRlZmluZWQiKXtpZih0aGlzLmxlbmd0aCl7dmFyIGU9dGhpc1swXS5hdHRyaWJ1dGVzLGY7ZD1jLmRhdGEodGhpc1swXSk7Zm9yKHZhciBoPTAsbD1lLmxlbmd0aDtoPGw7aCsrKXtmPWVbaF0ubmFtZTtpZihmLmluZGV4T2YoImRhdGEtIik9PT0wKXtmPWYuc3Vic3RyKDUpO2thKHRoaXNbMF0sZixkW2ZdKX19fXJldHVybiBkfWVsc2UgaWYodHlwZW9mIGE9PT0ib2JqZWN0IilyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yy5kYXRhKHRoaXMsCmEpfSk7dmFyIGs9YS5zcGxpdCgiLiIpO2tbMV09a1sxXT8iLiIra1sxXToiIjtpZihiPT09Qil7ZD10aGlzLnRyaWdnZXJIYW5kbGVyKCJnZXREYXRhIitrWzFdKyIhIixba1swXV0pO2lmKGQ9PT1CJiZ0aGlzLmxlbmd0aCl7ZD1jLmRhdGEodGhpc1swXSxhKTtkPWthKHRoaXNbMF0sYSxkKX1yZXR1cm4gZD09PUImJmtbMV0/dGhpcy5kYXRhKGtbMF0pOmR9ZWxzZSByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG89Yyh0aGlzKSx4PVtrWzBdLGJdO28udHJpZ2dlckhhbmRsZXIoInNldERhdGEiK2tbMV0rIiEiLHgpO2MuZGF0YSh0aGlzLGEsYik7by50cmlnZ2VySGFuZGxlcigiY2hhbmdlRGF0YSIra1sxXSsiISIseCl9KX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yy5yZW1vdmVEYXRhKHRoaXMsYSl9KX19KTtjLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiLGQpe2lmKGEpe2I9KGJ8fCJmeCIpKyJxdWV1ZSI7dmFyIGU9CmMuZGF0YShhLGIpO2lmKCFkKXJldHVybiBlfHxbXTtpZighZXx8Yy5pc0FycmF5KGQpKWU9Yy5kYXRhKGEsYixjLm1ha2VBcnJheShkKSk7ZWxzZSBlLnB1c2goZCk7cmV0dXJuIGV9fSxkZXF1ZXVlOmZ1bmN0aW9uKGEsYil7Yj1ifHwiZngiO3ZhciBkPWMucXVldWUoYSxiKSxlPWQuc2hpZnQoKTtpZihlPT09ImlucHJvZ3Jlc3MiKWU9ZC5zaGlmdCgpO2lmKGUpe2I9PT0iZngiJiZkLnVuc2hpZnQoImlucHJvZ3Jlc3MiKTtlLmNhbGwoYSxmdW5jdGlvbigpe2MuZGVxdWV1ZShhLGIpfSl9fX0pO2MuZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIpe2lmKHR5cGVvZiBhIT09InN0cmluZyIpe2I9YTthPSJmeCJ9aWYoYj09PUIpcmV0dXJuIGMucXVldWUodGhpc1swXSxhKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9Yy5xdWV1ZSh0aGlzLGEsYik7YT09PSJmeCImJmRbMF0hPT0iaW5wcm9ncmVzcyImJmMuZGVxdWV1ZSh0aGlzLGEpfSl9LGRlcXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2MuZGVxdWV1ZSh0aGlzLAphKX0pfSxkZWxheTpmdW5jdGlvbihhLGIpe2E9Yy5meD9jLmZ4LnNwZWVkc1thXXx8YTphO2I9Ynx8ImZ4IjtyZXR1cm4gdGhpcy5xdWV1ZShiLGZ1bmN0aW9uKCl7dmFyIGQ9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5kZXF1ZXVlKGQsYil9LGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8ImZ4IixbXSl9fSk7dmFyIHNhPS9bXG5cdF0vZyxoYT0vXHMrLyxTYT0vXHIvZyxUYT0vXig/OmhyZWZ8c3JjfHN0eWxlKSQvLFVhPS9eKD86YnV0dG9ufGlucHV0KSQvaSxWYT0vXig/OmJ1dHRvbnxpbnB1dHxvYmplY3R8c2VsZWN0fHRleHRhcmVhKSQvaSxXYT0vXmEoPzpyZWEpPyQvaSx0YT0vXig/OnJhZGlvfGNoZWNrYm94KSQvaTtjLnByb3BzPXsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIixyZWFkb25seToicmVhZE9ubHkiLG1heGxlbmd0aDoibWF4TGVuZ3RoIixjZWxsc3BhY2luZzoiY2VsbFNwYWNpbmciLHJvd3NwYW46InJvd1NwYW4iLApjb2xzcGFuOiJjb2xTcGFuIix0YWJpbmRleDoidGFiSW5kZXgiLHVzZW1hcDoidXNlTWFwIixmcmFtZWJvcmRlcjoiZnJhbWVCb3JkZXIifTtjLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIpe3JldHVybiBjLmFjY2Vzcyh0aGlzLGEsYix0cnVlLGMuYXR0cil9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2MuYXR0cih0aGlzLGEsIiIpO3RoaXMubm9kZVR5cGU9PT0xJiZ0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKX0pfSxhZGRDbGFzczpmdW5jdGlvbihhKXtpZihjLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih4KXt2YXIgcj1jKHRoaXMpO3IuYWRkQ2xhc3MoYS5jYWxsKHRoaXMseCxyLmF0dHIoImNsYXNzIikpKX0pO2lmKGEmJnR5cGVvZiBhPT09InN0cmluZyIpZm9yKHZhciBiPShhfHwiIikuc3BsaXQoaGEpLGQ9MCxlPXRoaXMubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPXRoaXNbZF07aWYoZi5ub2RlVHlwZT09PQoxKWlmKGYuY2xhc3NOYW1lKXtmb3IodmFyIGg9IiAiK2YuY2xhc3NOYW1lKyIgIixsPWYuY2xhc3NOYW1lLGs9MCxvPWIubGVuZ3RoO2s8bztrKyspaWYoaC5pbmRleE9mKCIgIitiW2tdKyIgIik8MClsKz0iICIrYltrXTtmLmNsYXNzTmFtZT1jLnRyaW0obCl9ZWxzZSBmLmNsYXNzTmFtZT1hfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXtpZihjLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihvKXt2YXIgeD1jKHRoaXMpO3gucmVtb3ZlQ2xhc3MoYS5jYWxsKHRoaXMsbyx4LmF0dHIoImNsYXNzIikpKX0pO2lmKGEmJnR5cGVvZiBhPT09InN0cmluZyJ8fGE9PT1CKWZvcih2YXIgYj0oYXx8IiIpLnNwbGl0KGhhKSxkPTAsZT10aGlzLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj10aGlzW2RdO2lmKGYubm9kZVR5cGU9PT0xJiZmLmNsYXNzTmFtZSlpZihhKXtmb3IodmFyIGg9KCIgIitmLmNsYXNzTmFtZSsiICIpLnJlcGxhY2Uoc2EsIiAiKSwKbD0wLGs9Yi5sZW5ndGg7bDxrO2wrKyloPWgucmVwbGFjZSgiICIrYltsXSsiICIsIiAiKTtmLmNsYXNzTmFtZT1jLnRyaW0oaCl9ZWxzZSBmLmNsYXNzTmFtZT0iIn1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgZD10eXBlb2YgYSxlPXR5cGVvZiBiPT09ImJvb2xlYW4iO2lmKGMuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGYpe3ZhciBoPWModGhpcyk7aC50b2dnbGVDbGFzcyhhLmNhbGwodGhpcyxmLGguYXR0cigiY2xhc3MiKSxiKSxiKX0pO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtpZihkPT09InN0cmluZyIpZm9yKHZhciBmLGg9MCxsPWModGhpcyksaz1iLG89YS5zcGxpdChoYSk7Zj1vW2grK107KXtrPWU/azohbC5oYXNDbGFzcyhmKTtsW2s/ImFkZENsYXNzIjoicmVtb3ZlQ2xhc3MiXShmKX1lbHNlIGlmKGQ9PT0idW5kZWZpbmVkInx8ZD09PSJib29sZWFuIil7dGhpcy5jbGFzc05hbWUmJmMuZGF0YSh0aGlzLAoiX19jbGFzc05hbWVfXyIsdGhpcy5jbGFzc05hbWUpO3RoaXMuY2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lfHxhPT09ZmFsc2U/IiI6Yy5kYXRhKHRoaXMsIl9fY2xhc3NOYW1lX18iKXx8IiJ9fSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe2E9IiAiK2ErIiAiO2Zvcih2YXIgYj0wLGQ9dGhpcy5sZW5ndGg7YjxkO2IrKylpZigoIiAiK3RoaXNbYl0uY2xhc3NOYW1lKyIgIikucmVwbGFjZShzYSwiICIpLmluZGV4T2YoYSk+LTEpcmV0dXJuIHRydWU7cmV0dXJuIGZhbHNlfSx2YWw6ZnVuY3Rpb24oYSl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBiPXRoaXNbMF07aWYoYil7aWYoYy5ub2RlTmFtZShiLCJvcHRpb24iKSl7dmFyIGQ9Yi5hdHRyaWJ1dGVzLnZhbHVlO3JldHVybiFkfHxkLnNwZWNpZmllZD9iLnZhbHVlOmIudGV4dH1pZihjLm5vZGVOYW1lKGIsInNlbGVjdCIpKXt2YXIgZT1iLnNlbGVjdGVkSW5kZXg7ZD1bXTt2YXIgZj1iLm9wdGlvbnM7Yj1iLnR5cGU9PT0ic2VsZWN0LW9uZSI7CmlmKGU8MClyZXR1cm4gbnVsbDt2YXIgaD1iP2U6MDtmb3IoZT1iP2UrMTpmLmxlbmd0aDtoPGU7aCsrKXt2YXIgbD1mW2hdO2lmKGwuc2VsZWN0ZWQmJihjLnN1cHBvcnQub3B0RGlzYWJsZWQ/IWwuZGlzYWJsZWQ6bC5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIik9PT1udWxsKSYmKCFsLnBhcmVudE5vZGUuZGlzYWJsZWR8fCFjLm5vZGVOYW1lKGwucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2E9YyhsKS52YWwoKTtpZihiKXJldHVybiBhO2QucHVzaChhKX19cmV0dXJuIGR9aWYodGEudGVzdChiLnR5cGUpJiYhYy5zdXBwb3J0LmNoZWNrT24pcmV0dXJuIGIuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPT09bnVsbD8ib24iOmIudmFsdWU7cmV0dXJuKGIudmFsdWV8fCIiKS5yZXBsYWNlKFNhLCIiKX1yZXR1cm4gQn12YXIgaz1jLmlzRnVuY3Rpb24oYSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihvKXt2YXIgeD1jKHRoaXMpLHI9YTtpZih0aGlzLm5vZGVUeXBlPT09MSl7aWYoaylyPQphLmNhbGwodGhpcyxvLHgudmFsKCkpO2lmKHI9PW51bGwpcj0iIjtlbHNlIGlmKHR5cGVvZiByPT09Im51bWJlciIpcis9IiI7ZWxzZSBpZihjLmlzQXJyYXkocikpcj1jLm1hcChyLGZ1bmN0aW9uKEMpe3JldHVybiBDPT1udWxsPyIiOkMrIiJ9KTtpZihjLmlzQXJyYXkocikmJnRhLnRlc3QodGhpcy50eXBlKSl0aGlzLmNoZWNrZWQ9Yy5pbkFycmF5KHgudmFsKCkscik+PTA7ZWxzZSBpZihjLm5vZGVOYW1lKHRoaXMsInNlbGVjdCIpKXt2YXIgQT1jLm1ha2VBcnJheShyKTtjKCJvcHRpb24iLHRoaXMpLmVhY2goZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGVkPWMuaW5BcnJheShjKHRoaXMpLnZhbCgpLEEpPj0wfSk7aWYoIUEubGVuZ3RoKXRoaXMuc2VsZWN0ZWRJbmRleD0tMX1lbHNlIHRoaXMudmFsdWU9cn19KX19KTtjLmV4dGVuZCh7YXR0ckZuOnt2YWw6dHJ1ZSxjc3M6dHJ1ZSxodG1sOnRydWUsdGV4dDp0cnVlLGRhdGE6dHJ1ZSx3aWR0aDp0cnVlLGhlaWdodDp0cnVlLG9mZnNldDp0cnVlfSwKYXR0cjpmdW5jdGlvbihhLGIsZCxlKXtpZighYXx8YS5ub2RlVHlwZT09PTN8fGEubm9kZVR5cGU9PT04KXJldHVybiBCO2lmKGUmJmIgaW4gYy5hdHRyRm4pcmV0dXJuIGMoYSlbYl0oZCk7ZT1hLm5vZGVUeXBlIT09MXx8IWMuaXNYTUxEb2MoYSk7dmFyIGY9ZCE9PUI7Yj1lJiZjLnByb3BzW2JdfHxiO3ZhciBoPVRhLnRlc3QoYik7aWYoKGIgaW4gYXx8YVtiXSE9PUIpJiZlJiYhaCl7aWYoZil7Yj09PSJ0eXBlIiYmVWEudGVzdChhLm5vZGVOYW1lKSYmYS5wYXJlbnROb2RlJiZjLmVycm9yKCJ0eXBlIHByb3BlcnR5IGNhbid0IGJlIGNoYW5nZWQiKTtpZihkPT09bnVsbClhLm5vZGVUeXBlPT09MSYmYS5yZW1vdmVBdHRyaWJ1dGUoYik7ZWxzZSBhW2JdPWR9aWYoYy5ub2RlTmFtZShhLCJmb3JtIikmJmEuZ2V0QXR0cmlidXRlTm9kZShiKSlyZXR1cm4gYS5nZXRBdHRyaWJ1dGVOb2RlKGIpLm5vZGVWYWx1ZTtpZihiPT09InRhYkluZGV4IilyZXR1cm4oYj1hLmdldEF0dHJpYnV0ZU5vZGUoInRhYkluZGV4IikpJiYKYi5zcGVjaWZpZWQ/Yi52YWx1ZTpWYS50ZXN0KGEubm9kZU5hbWUpfHxXYS50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDpCO3JldHVybiBhW2JdfWlmKCFjLnN1cHBvcnQuc3R5bGUmJmUmJmI9PT0ic3R5bGUiKXtpZihmKWEuc3R5bGUuY3NzVGV4dD0iIitkO3JldHVybiBhLnN0eWxlLmNzc1RleHR9ZiYmYS5zZXRBdHRyaWJ1dGUoYiwiIitkKTtpZighYS5hdHRyaWJ1dGVzW2JdJiZhLmhhc0F0dHJpYnV0ZSYmIWEuaGFzQXR0cmlidXRlKGIpKXJldHVybiBCO2E9IWMuc3VwcG9ydC5ocmVmTm9ybWFsaXplZCYmZSYmaD9hLmdldEF0dHJpYnV0ZShiLDIpOmEuZ2V0QXR0cmlidXRlKGIpO3JldHVybiBhPT09bnVsbD9COmF9fSk7dmFyIFg9L1wuKC4qKSQvLGlhPS9eKD86dGV4dGFyZWF8aW5wdXR8c2VsZWN0KSQvaSxMYT0vXC4vZyxNYT0vIC9nLFhhPS9bXlx3XHMufGBdL2csWWE9ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShYYSwiXFwkJiIpfSx1YT17Zm9jdXNpbjowLGZvY3Vzb3V0OjB9OwpjLmV2ZW50PXthZGQ6ZnVuY3Rpb24oYSxiLGQsZSl7aWYoIShhLm5vZGVUeXBlPT09M3x8YS5ub2RlVHlwZT09PTgpKXtpZihjLmlzV2luZG93KGEpJiZhIT09RSYmIWEuZnJhbWVFbGVtZW50KWE9RTtpZihkPT09ZmFsc2UpZD1VO2Vsc2UgaWYoIWQpcmV0dXJuO3ZhciBmLGg7aWYoZC5oYW5kbGVyKXtmPWQ7ZD1mLmhhbmRsZXJ9aWYoIWQuZ3VpZClkLmd1aWQ9Yy5ndWlkKys7aWYoaD1jLmRhdGEoYSkpe3ZhciBsPWEubm9kZVR5cGU/ImV2ZW50cyI6Il9fZXZlbnRzX18iLGs9aFtsXSxvPWguaGFuZGxlO2lmKHR5cGVvZiBrPT09ImZ1bmN0aW9uIil7bz1rLmhhbmRsZTtrPWsuZXZlbnRzfWVsc2UgaWYoIWspe2Eubm9kZVR5cGV8fChoW2xdPWg9ZnVuY3Rpb24oKXt9KTtoLmV2ZW50cz1rPXt9fWlmKCFvKWguaGFuZGxlPW89ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIGMhPT0idW5kZWZpbmVkIiYmIWMuZXZlbnQudHJpZ2dlcmVkP2MuZXZlbnQuaGFuZGxlLmFwcGx5KG8uZWxlbSwKYXJndW1lbnRzKTpCfTtvLmVsZW09YTtiPWIuc3BsaXQoIiAiKTtmb3IodmFyIHg9MCxyO2w9Ylt4KytdOyl7aD1mP2MuZXh0ZW5kKHt9LGYpOntoYW5kbGVyOmQsZGF0YTplfTtpZihsLmluZGV4T2YoIi4iKT4tMSl7cj1sLnNwbGl0KCIuIik7bD1yLnNoaWZ0KCk7aC5uYW1lc3BhY2U9ci5zbGljZSgwKS5zb3J0KCkuam9pbigiLiIpfWVsc2V7cj1bXTtoLm5hbWVzcGFjZT0iIn1oLnR5cGU9bDtpZighaC5ndWlkKWguZ3VpZD1kLmd1aWQ7dmFyIEE9a1tsXSxDPWMuZXZlbnQuc3BlY2lhbFtsXXx8e307aWYoIUEpe0E9a1tsXT1bXTtpZighQy5zZXR1cHx8Qy5zZXR1cC5jYWxsKGEsZSxyLG8pPT09ZmFsc2UpaWYoYS5hZGRFdmVudExpc3RlbmVyKWEuYWRkRXZlbnRMaXN0ZW5lcihsLG8sZmFsc2UpO2Vsc2UgYS5hdHRhY2hFdmVudCYmYS5hdHRhY2hFdmVudCgib24iK2wsbyl9aWYoQy5hZGQpe0MuYWRkLmNhbGwoYSxoKTtpZighaC5oYW5kbGVyLmd1aWQpaC5oYW5kbGVyLmd1aWQ9CmQuZ3VpZH1BLnB1c2goaCk7Yy5ldmVudC5nbG9iYWxbbF09dHJ1ZX1hPW51bGx9fX0sZ2xvYmFsOnt9LHJlbW92ZTpmdW5jdGlvbihhLGIsZCxlKXtpZighKGEubm9kZVR5cGU9PT0zfHxhLm5vZGVUeXBlPT09OCkpe2lmKGQ9PT1mYWxzZSlkPVU7dmFyIGYsaCxsPTAsayxvLHgscixBLEMsSj1hLm5vZGVUeXBlPyJldmVudHMiOiJfX2V2ZW50c19fIix3PWMuZGF0YShhKSxJPXcmJndbSl07aWYodyYmSSl7aWYodHlwZW9mIEk9PT0iZnVuY3Rpb24iKXt3PUk7ST1JLmV2ZW50c31pZihiJiZiLnR5cGUpe2Q9Yi5oYW5kbGVyO2I9Yi50eXBlfWlmKCFifHx0eXBlb2YgYj09PSJzdHJpbmciJiZiLmNoYXJBdCgwKT09PSIuIil7Yj1ifHwiIjtmb3IoZiBpbiBJKWMuZXZlbnQucmVtb3ZlKGEsZitiKX1lbHNle2ZvcihiPWIuc3BsaXQoIiAiKTtmPWJbbCsrXTspe3I9ZjtrPWYuaW5kZXhPZigiLiIpPDA7bz1bXTtpZighayl7bz1mLnNwbGl0KCIuIik7Zj1vLnNoaWZ0KCk7eD1SZWdFeHAoIihefFxcLikiKwpjLm1hcChvLnNsaWNlKDApLnNvcnQoKSxZYSkuam9pbigiXFwuKD86LipcXC4pPyIpKyIoXFwufCQpIil9aWYoQT1JW2ZdKWlmKGQpe3I9Yy5ldmVudC5zcGVjaWFsW2ZdfHx7fTtmb3IoaD1lfHwwO2g8QS5sZW5ndGg7aCsrKXtDPUFbaF07aWYoZC5ndWlkPT09Qy5ndWlkKXtpZihrfHx4LnRlc3QoQy5uYW1lc3BhY2UpKXtlPT1udWxsJiZBLnNwbGljZShoLS0sMSk7ci5yZW1vdmUmJnIucmVtb3ZlLmNhbGwoYSxDKX1pZihlIT1udWxsKWJyZWFrfX1pZihBLmxlbmd0aD09PTB8fGUhPW51bGwmJkEubGVuZ3RoPT09MSl7aWYoIXIudGVhcmRvd258fHIudGVhcmRvd24uY2FsbChhLG8pPT09ZmFsc2UpYy5yZW1vdmVFdmVudChhLGYsdy5oYW5kbGUpO2RlbGV0ZSBJW2ZdfX1lbHNlIGZvcihoPTA7aDxBLmxlbmd0aDtoKyspe0M9QVtoXTtpZihrfHx4LnRlc3QoQy5uYW1lc3BhY2UpKXtjLmV2ZW50LnJlbW92ZShhLHIsQy5oYW5kbGVyLGgpO0Euc3BsaWNlKGgtLSwxKX19fWlmKGMuaXNFbXB0eU9iamVjdChJKSl7aWYoYj0Kdy5oYW5kbGUpYi5lbGVtPW51bGw7ZGVsZXRlIHcuZXZlbnRzO2RlbGV0ZSB3LmhhbmRsZTtpZih0eXBlb2Ygdz09PSJmdW5jdGlvbiIpYy5yZW1vdmVEYXRhKGEsSik7ZWxzZSBjLmlzRW1wdHlPYmplY3QodykmJmMucmVtb3ZlRGF0YShhKX19fX19LHRyaWdnZXI6ZnVuY3Rpb24oYSxiLGQsZSl7dmFyIGY9YS50eXBlfHxhO2lmKCFlKXthPXR5cGVvZiBhPT09Im9iamVjdCI/YVtjLmV4cGFuZG9dP2E6Yy5leHRlbmQoYy5FdmVudChmKSxhKTpjLkV2ZW50KGYpO2lmKGYuaW5kZXhPZigiISIpPj0wKXthLnR5cGU9Zj1mLnNsaWNlKDAsLTEpO2EuZXhjbHVzaXZlPXRydWV9aWYoIWQpe2Euc3RvcFByb3BhZ2F0aW9uKCk7Yy5ldmVudC5nbG9iYWxbZl0mJmMuZWFjaChjLmNhY2hlLGZ1bmN0aW9uKCl7dGhpcy5ldmVudHMmJnRoaXMuZXZlbnRzW2ZdJiZjLmV2ZW50LnRyaWdnZXIoYSxiLHRoaXMuaGFuZGxlLmVsZW0pfSl9aWYoIWR8fGQubm9kZVR5cGU9PT0zfHxkLm5vZGVUeXBlPT09CjgpcmV0dXJuIEI7YS5yZXN1bHQ9QjthLnRhcmdldD1kO2I9Yy5tYWtlQXJyYXkoYik7Yi51bnNoaWZ0KGEpfWEuY3VycmVudFRhcmdldD1kOyhlPWQubm9kZVR5cGU/Yy5kYXRhKGQsImhhbmRsZSIpOihjLmRhdGEoZCwiX19ldmVudHNfXyIpfHx7fSkuaGFuZGxlKSYmZS5hcHBseShkLGIpO2U9ZC5wYXJlbnROb2RlfHxkLm93bmVyRG9jdW1lbnQ7dHJ5e2lmKCEoZCYmZC5ub2RlTmFtZSYmYy5ub0RhdGFbZC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkpaWYoZFsib24iK2ZdJiZkWyJvbiIrZl0uYXBwbHkoZCxiKT09PWZhbHNlKXthLnJlc3VsdD1mYWxzZTthLnByZXZlbnREZWZhdWx0KCl9fWNhdGNoKGgpe31pZighYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpJiZlKWMuZXZlbnQudHJpZ2dlcihhLGIsZSx0cnVlKTtlbHNlIGlmKCFhLmlzRGVmYXVsdFByZXZlbnRlZCgpKXt2YXIgbDtlPWEudGFyZ2V0O3ZhciBrPWYucmVwbGFjZShYLCIiKSxvPWMubm9kZU5hbWUoZSwiYSIpJiZrPT09CiJjbGljayIseD1jLmV2ZW50LnNwZWNpYWxba118fHt9O2lmKCgheC5fZGVmYXVsdHx8eC5fZGVmYXVsdC5jYWxsKGQsYSk9PT1mYWxzZSkmJiFvJiYhKGUmJmUubm9kZU5hbWUmJmMubm9EYXRhW2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pKXt0cnl7aWYoZVtrXSl7aWYobD1lWyJvbiIra10pZVsib24iK2tdPW51bGw7Yy5ldmVudC50cmlnZ2VyZWQ9dHJ1ZTtlW2tdKCl9fWNhdGNoKHIpe31pZihsKWVbIm9uIitrXT1sO2MuZXZlbnQudHJpZ2dlcmVkPWZhbHNlfX19LGhhbmRsZTpmdW5jdGlvbihhKXt2YXIgYixkLGUsZjtkPVtdO3ZhciBoPWMubWFrZUFycmF5KGFyZ3VtZW50cyk7YT1oWzBdPWMuZXZlbnQuZml4KGF8fEUuZXZlbnQpO2EuY3VycmVudFRhcmdldD10aGlzO2I9YS50eXBlLmluZGV4T2YoIi4iKTwwJiYhYS5leGNsdXNpdmU7aWYoIWIpe2U9YS50eXBlLnNwbGl0KCIuIik7YS50eXBlPWUuc2hpZnQoKTtkPWUuc2xpY2UoMCkuc29ydCgpO2U9UmVnRXhwKCIoXnxcXC4pIisKZC5qb2luKCJcXC4oPzouKlxcLik/IikrIihcXC58JCkiKX1hLm5hbWVzcGFjZT1hLm5hbWVzcGFjZXx8ZC5qb2luKCIuIik7Zj1jLmRhdGEodGhpcyx0aGlzLm5vZGVUeXBlPyJldmVudHMiOiJfX2V2ZW50c19fIik7aWYodHlwZW9mIGY9PT0iZnVuY3Rpb24iKWY9Zi5ldmVudHM7ZD0oZnx8e30pW2EudHlwZV07aWYoZiYmZCl7ZD1kLnNsaWNlKDApO2Y9MDtmb3IodmFyIGw9ZC5sZW5ndGg7ZjxsO2YrKyl7dmFyIGs9ZFtmXTtpZihifHxlLnRlc3Qoay5uYW1lc3BhY2UpKXthLmhhbmRsZXI9ay5oYW5kbGVyO2EuZGF0YT1rLmRhdGE7YS5oYW5kbGVPYmo9aztrPWsuaGFuZGxlci5hcHBseSh0aGlzLGgpO2lmKGshPT1CKXthLnJlc3VsdD1rO2lmKGs9PT1mYWxzZSl7YS5wcmV2ZW50RGVmYXVsdCgpO2Euc3RvcFByb3BhZ2F0aW9uKCl9fWlmKGEuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSlicmVha319fXJldHVybiBhLnJlc3VsdH0scHJvcHM6ImFsdEtleSBhdHRyQ2hhbmdlIGF0dHJOYW1lIGJ1YmJsZXMgYnV0dG9uIGNhbmNlbGFibGUgY2hhckNvZGUgY2xpZW50WCBjbGllbnRZIGN0cmxLZXkgY3VycmVudFRhcmdldCBkYXRhIGRldGFpbCBldmVudFBoYXNlIGZyb21FbGVtZW50IGhhbmRsZXIga2V5Q29kZSBsYXllclggbGF5ZXJZIG1ldGFLZXkgbmV3VmFsdWUgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHByZXZWYWx1ZSByZWxhdGVkTm9kZSByZWxhdGVkVGFyZ2V0IHNjcmVlblggc2NyZWVuWSBzaGlmdEtleSBzcmNFbGVtZW50IHRhcmdldCB0b0VsZW1lbnQgdmlldyB3aGVlbERlbHRhIHdoaWNoIi5zcGxpdCgiICIpLApmaXg6ZnVuY3Rpb24oYSl7aWYoYVtjLmV4cGFuZG9dKXJldHVybiBhO3ZhciBiPWE7YT1jLkV2ZW50KGIpO2Zvcih2YXIgZD10aGlzLnByb3BzLmxlbmd0aCxlO2Q7KXtlPXRoaXMucHJvcHNbLS1kXTthW2VdPWJbZV19aWYoIWEudGFyZ2V0KWEudGFyZ2V0PWEuc3JjRWxlbWVudHx8dDtpZihhLnRhcmdldC5ub2RlVHlwZT09PTMpYS50YXJnZXQ9YS50YXJnZXQucGFyZW50Tm9kZTtpZighYS5yZWxhdGVkVGFyZ2V0JiZhLmZyb21FbGVtZW50KWEucmVsYXRlZFRhcmdldD1hLmZyb21FbGVtZW50PT09YS50YXJnZXQ/YS50b0VsZW1lbnQ6YS5mcm9tRWxlbWVudDtpZihhLnBhZ2VYPT1udWxsJiZhLmNsaWVudFghPW51bGwpe2I9dC5kb2N1bWVudEVsZW1lbnQ7ZD10LmJvZHk7YS5wYWdlWD1hLmNsaWVudFgrKGImJmIuc2Nyb2xsTGVmdHx8ZCYmZC5zY3JvbGxMZWZ0fHwwKS0oYiYmYi5jbGllbnRMZWZ0fHxkJiZkLmNsaWVudExlZnR8fDApO2EucGFnZVk9YS5jbGllbnRZKyhiJiZiLnNjcm9sbFRvcHx8CmQmJmQuc2Nyb2xsVG9wfHwwKS0oYiYmYi5jbGllbnRUb3B8fGQmJmQuY2xpZW50VG9wfHwwKX1pZihhLndoaWNoPT1udWxsJiYoYS5jaGFyQ29kZSE9bnVsbHx8YS5rZXlDb2RlIT1udWxsKSlhLndoaWNoPWEuY2hhckNvZGUhPW51bGw/YS5jaGFyQ29kZTphLmtleUNvZGU7aWYoIWEubWV0YUtleSYmYS5jdHJsS2V5KWEubWV0YUtleT1hLmN0cmxLZXk7aWYoIWEud2hpY2gmJmEuYnV0dG9uIT09QilhLndoaWNoPWEuYnV0dG9uJjE/MTphLmJ1dHRvbiYyPzM6YS5idXR0b24mND8yOjA7cmV0dXJuIGF9LGd1aWQ6MUU4LHByb3h5OmMucHJveHksc3BlY2lhbDp7cmVhZHk6e3NldHVwOmMuYmluZFJlYWR5LHRlYXJkb3duOmMubm9vcH0sbGl2ZTp7YWRkOmZ1bmN0aW9uKGEpe2MuZXZlbnQuYWRkKHRoaXMsWShhLm9yaWdUeXBlLGEuc2VsZWN0b3IpLGMuZXh0ZW5kKHt9LGEse2hhbmRsZXI6S2EsZ3VpZDphLmhhbmRsZXIuZ3VpZH0pKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2MuZXZlbnQucmVtb3ZlKHRoaXMsClkoYS5vcmlnVHlwZSxhLnNlbGVjdG9yKSxhKX19LGJlZm9yZXVubG9hZDp7c2V0dXA6ZnVuY3Rpb24oYSxiLGQpe2lmKGMuaXNXaW5kb3codGhpcykpdGhpcy5vbmJlZm9yZXVubG9hZD1kfSx0ZWFyZG93bjpmdW5jdGlvbihhLGIpe2lmKHRoaXMub25iZWZvcmV1bmxvYWQ9PT1iKXRoaXMub25iZWZvcmV1bmxvYWQ9bnVsbH19fX07Yy5yZW1vdmVFdmVudD10LnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYSxiLGQpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsZCxmYWxzZSl9OmZ1bmN0aW9uKGEsYixkKXthLmRldGFjaEV2ZW50JiZhLmRldGFjaEV2ZW50KCJvbiIrYixkKX07Yy5FdmVudD1mdW5jdGlvbihhKXtpZighdGhpcy5wcmV2ZW50RGVmYXVsdClyZXR1cm4gbmV3IGMuRXZlbnQoYSk7aWYoYSYmYS50eXBlKXt0aGlzLm9yaWdpbmFsRXZlbnQ9YTt0aGlzLnR5cGU9YS50eXBlfWVsc2UgdGhpcy50eXBlPWE7dGhpcy50aW1lU3RhbXA9CmMubm93KCk7dGhpc1tjLmV4cGFuZG9dPXRydWV9O2MuRXZlbnQucHJvdG90eXBlPXtwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPWNhO3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDtpZihhKWlmKGEucHJldmVudERlZmF1bHQpYS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgYS5yZXR1cm5WYWx1ZT1mYWxzZX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1jYTt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7aWYoYSl7YS5zdG9wUHJvcGFnYXRpb24mJmEuc3RvcFByb3BhZ2F0aW9uKCk7YS5jYW5jZWxCdWJibGU9dHJ1ZX19LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9Y2E7dGhpcy5zdG9wUHJvcGFnYXRpb24oKX0saXNEZWZhdWx0UHJldmVudGVkOlUsaXNQcm9wYWdhdGlvblN0b3BwZWQ6VSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpVfTsKdmFyIHZhPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVsYXRlZFRhcmdldDt0cnl7Zm9yKDtiJiZiIT09dGhpczspYj1iLnBhcmVudE5vZGU7aWYoYiE9PXRoaXMpe2EudHlwZT1hLmRhdGE7Yy5ldmVudC5oYW5kbGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1jYXRjaChkKXt9fSx3YT1mdW5jdGlvbihhKXthLnR5cGU9YS5kYXRhO2MuZXZlbnQuaGFuZGxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07Yy5lYWNoKHttb3VzZWVudGVyOiJtb3VzZW92ZXIiLG1vdXNlbGVhdmU6Im1vdXNlb3V0In0sZnVuY3Rpb24oYSxiKXtjLmV2ZW50LnNwZWNpYWxbYV09e3NldHVwOmZ1bmN0aW9uKGQpe2MuZXZlbnQuYWRkKHRoaXMsYixkJiZkLnNlbGVjdG9yP3dhOnZhLGEpfSx0ZWFyZG93bjpmdW5jdGlvbihkKXtjLmV2ZW50LnJlbW92ZSh0aGlzLGIsZCYmZC5zZWxlY3Rvcj93YTp2YSl9fX0pO2lmKCFjLnN1cHBvcnQuc3VibWl0QnViYmxlcyljLmV2ZW50LnNwZWNpYWwuc3VibWl0PXtzZXR1cDpmdW5jdGlvbigpe2lmKHRoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PQoiZm9ybSIpe2MuZXZlbnQuYWRkKHRoaXMsImNsaWNrLnNwZWNpYWxTdWJtaXQiLGZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGQ9Yi50eXBlO2lmKChkPT09InN1Ym1pdCJ8fGQ9PT0iaW1hZ2UiKSYmYyhiKS5jbG9zZXN0KCJmb3JtIikubGVuZ3RoKXthLmxpdmVGaXJlZD1CO3JldHVybiBsYSgic3VibWl0Iix0aGlzLGFyZ3VtZW50cyl9fSk7Yy5ldmVudC5hZGQodGhpcywia2V5cHJlc3Muc3BlY2lhbFN1Ym1pdCIsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQsZD1iLnR5cGU7aWYoKGQ9PT0idGV4dCJ8fGQ9PT0icGFzc3dvcmQiKSYmYyhiKS5jbG9zZXN0KCJmb3JtIikubGVuZ3RoJiZhLmtleUNvZGU9PT0xMyl7YS5saXZlRmlyZWQ9QjtyZXR1cm4gbGEoInN1Ym1pdCIsdGhpcyxhcmd1bWVudHMpfX0pfWVsc2UgcmV0dXJuIGZhbHNlfSx0ZWFyZG93bjpmdW5jdGlvbigpe2MuZXZlbnQucmVtb3ZlKHRoaXMsIi5zcGVjaWFsU3VibWl0Iil9fTtpZighYy5zdXBwb3J0LmNoYW5nZUJ1YmJsZXMpe3ZhciBWLAp4YT1mdW5jdGlvbihhKXt2YXIgYj1hLnR5cGUsZD1hLnZhbHVlO2lmKGI9PT0icmFkaW8ifHxiPT09ImNoZWNrYm94IilkPWEuY2hlY2tlZDtlbHNlIGlmKGI9PT0ic2VsZWN0LW11bHRpcGxlIilkPWEuc2VsZWN0ZWRJbmRleD4tMT9jLm1hcChhLm9wdGlvbnMsZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2VsZWN0ZWR9KS5qb2luKCItIik6IiI7ZWxzZSBpZihhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0ic2VsZWN0IilkPWEuc2VsZWN0ZWRJbmRleDtyZXR1cm4gZH0sWj1mdW5jdGlvbihhLGIpe3ZhciBkPWEudGFyZ2V0LGUsZjtpZighKCFpYS50ZXN0KGQubm9kZU5hbWUpfHxkLnJlYWRPbmx5KSl7ZT1jLmRhdGEoZCwiX2NoYW5nZV9kYXRhIik7Zj14YShkKTtpZihhLnR5cGUhPT0iZm9jdXNvdXQifHxkLnR5cGUhPT0icmFkaW8iKWMuZGF0YShkLCJfY2hhbmdlX2RhdGEiLGYpO2lmKCEoZT09PUJ8fGY9PT1lKSlpZihlIT1udWxsfHxmKXthLnR5cGU9ImNoYW5nZSI7YS5saXZlRmlyZWQ9CkI7cmV0dXJuIGMuZXZlbnQudHJpZ2dlcihhLGIsZCl9fX07Yy5ldmVudC5zcGVjaWFsLmNoYW5nZT17ZmlsdGVyczp7Zm9jdXNvdXQ6WixiZWZvcmVkZWFjdGl2YXRlOlosY2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQsZD1iLnR5cGU7aWYoZD09PSJyYWRpbyJ8fGQ9PT0iY2hlY2tib3gifHxiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0ic2VsZWN0IilyZXR1cm4gWi5jYWxsKHRoaXMsYSl9LGtleWRvd246ZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQsZD1iLnR5cGU7aWYoYS5rZXlDb2RlPT09MTMmJmIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PSJ0ZXh0YXJlYSJ8fGEua2V5Q29kZT09PTMyJiYoZD09PSJjaGVja2JveCJ8fGQ9PT0icmFkaW8iKXx8ZD09PSJzZWxlY3QtbXVsdGlwbGUiKXJldHVybiBaLmNhbGwodGhpcyxhKX0sYmVmb3JlYWN0aXZhdGU6ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDtjLmRhdGEoYSwiX2NoYW5nZV9kYXRhIix4YShhKSl9fSxzZXR1cDpmdW5jdGlvbigpe2lmKHRoaXMudHlwZT09PQoiZmlsZSIpcmV0dXJuIGZhbHNlO2Zvcih2YXIgYSBpbiBWKWMuZXZlbnQuYWRkKHRoaXMsYSsiLnNwZWNpYWxDaGFuZ2UiLFZbYV0pO3JldHVybiBpYS50ZXN0KHRoaXMubm9kZU5hbWUpfSx0ZWFyZG93bjpmdW5jdGlvbigpe2MuZXZlbnQucmVtb3ZlKHRoaXMsIi5zcGVjaWFsQ2hhbmdlIik7cmV0dXJuIGlhLnRlc3QodGhpcy5ub2RlTmFtZSl9fTtWPWMuZXZlbnQuc3BlY2lhbC5jaGFuZ2UuZmlsdGVycztWLmZvY3VzPVYuYmVmb3JlYWN0aXZhdGV9dC5hZGRFdmVudExpc3RlbmVyJiZjLmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChlKXtlPWMuZXZlbnQuZml4KGUpO2UudHlwZT1iO3JldHVybiBjLmV2ZW50LnRyaWdnZXIoZSxudWxsLGUudGFyZ2V0KX1jLmV2ZW50LnNwZWNpYWxbYl09e3NldHVwOmZ1bmN0aW9uKCl7dWFbYl0rKz09PTAmJnQuYWRkRXZlbnRMaXN0ZW5lcihhLGQsdHJ1ZSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7LS11YVtiXT09PQowJiZ0LnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxkLHRydWUpfX19KTtjLmVhY2goWyJiaW5kIiwib25lIl0sZnVuY3Rpb24oYSxiKXtjLmZuW2JdPWZ1bmN0aW9uKGQsZSxmKXtpZih0eXBlb2YgZD09PSJvYmplY3QiKXtmb3IodmFyIGggaW4gZCl0aGlzW2JdKGgsZSxkW2hdLGYpO3JldHVybiB0aGlzfWlmKGMuaXNGdW5jdGlvbihlKXx8ZT09PWZhbHNlKXtmPWU7ZT1CfXZhciBsPWI9PT0ib25lIj9jLnByb3h5KGYsZnVuY3Rpb24obyl7Yyh0aGlzKS51bmJpbmQobyxsKTtyZXR1cm4gZi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTpmO2lmKGQ9PT0idW5sb2FkIiYmYiE9PSJvbmUiKXRoaXMub25lKGQsZSxmKTtlbHNle2g9MDtmb3IodmFyIGs9dGhpcy5sZW5ndGg7aDxrO2grKyljLmV2ZW50LmFkZCh0aGlzW2hdLGQsbCxlKX1yZXR1cm4gdGhpc319KTtjLmZuLmV4dGVuZCh7dW5iaW5kOmZ1bmN0aW9uKGEsYil7aWYodHlwZW9mIGE9PT0ib2JqZWN0IiYmIWEucHJldmVudERlZmF1bHQpZm9yKHZhciBkIGluIGEpdGhpcy51bmJpbmQoZCwKYVtkXSk7ZWxzZXtkPTA7Zm9yKHZhciBlPXRoaXMubGVuZ3RoO2Q8ZTtkKyspYy5ldmVudC5yZW1vdmUodGhpc1tkXSxhLGIpfXJldHVybiB0aGlzfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsZCxlKXtyZXR1cm4gdGhpcy5saXZlKGIsZCxlLGEpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD09PTA/dGhpcy51bmJpbmQoImxpdmUiKTp0aGlzLmRpZShiLG51bGwsZCxhKX0sdHJpZ2dlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtjLmV2ZW50LnRyaWdnZXIoYSxiLHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYil7aWYodGhpc1swXSl7dmFyIGQ9Yy5FdmVudChhKTtkLnByZXZlbnREZWZhdWx0KCk7ZC5zdG9wUHJvcGFnYXRpb24oKTtjLmV2ZW50LnRyaWdnZXIoZCxiLHRoaXNbMF0pO3JldHVybiBkLnJlc3VsdH19LHRvZ2dsZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9YXJndW1lbnRzLGQ9CjE7ZDxiLmxlbmd0aDspYy5wcm94eShhLGJbZCsrXSk7cmV0dXJuIHRoaXMuY2xpY2soYy5wcm94eShhLGZ1bmN0aW9uKGUpe3ZhciBmPShjLmRhdGEodGhpcywibGFzdFRvZ2dsZSIrYS5ndWlkKXx8MCklZDtjLmRhdGEodGhpcywibGFzdFRvZ2dsZSIrYS5ndWlkLGYrMSk7ZS5wcmV2ZW50RGVmYXVsdCgpO3JldHVybiBiW2ZdLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8ZmFsc2V9KSl9LGhvdmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubW91c2VlbnRlcihhKS5tb3VzZWxlYXZlKGJ8fGEpfX0pO3ZhciB5YT17Zm9jdXM6ImZvY3VzaW4iLGJsdXI6ImZvY3Vzb3V0Iixtb3VzZWVudGVyOiJtb3VzZW92ZXIiLG1vdXNlbGVhdmU6Im1vdXNlb3V0In07Yy5lYWNoKFsibGl2ZSIsImRpZSJdLGZ1bmN0aW9uKGEsYil7Yy5mbltiXT1mdW5jdGlvbihkLGUsZixoKXt2YXIgbCxrPTAsbyx4LHI9aHx8dGhpcy5zZWxlY3RvcjtoPWg/dGhpczpjKHRoaXMuY29udGV4dCk7aWYodHlwZW9mIGQ9PT0KIm9iamVjdCImJiFkLnByZXZlbnREZWZhdWx0KXtmb3IobCBpbiBkKWhbYl0obCxlLGRbbF0scik7cmV0dXJuIHRoaXN9aWYoYy5pc0Z1bmN0aW9uKGUpKXtmPWU7ZT1CfWZvcihkPShkfHwiIikuc3BsaXQoIiAiKTsobD1kW2srK10pIT1udWxsOyl7bz1YLmV4ZWMobCk7eD0iIjtpZihvKXt4PW9bMF07bD1sLnJlcGxhY2UoWCwiIil9aWYobD09PSJob3ZlciIpZC5wdXNoKCJtb3VzZWVudGVyIit4LCJtb3VzZWxlYXZlIit4KTtlbHNle289bDtpZihsPT09ImZvY3VzInx8bD09PSJibHVyIil7ZC5wdXNoKHlhW2xdK3gpO2wrPXh9ZWxzZSBsPSh5YVtsXXx8bCkreDtpZihiPT09ImxpdmUiKXt4PTA7Zm9yKHZhciBBPWgubGVuZ3RoO3g8QTt4KyspYy5ldmVudC5hZGQoaFt4XSwibGl2ZS4iK1kobCxyKSx7ZGF0YTplLHNlbGVjdG9yOnIsaGFuZGxlcjpmLG9yaWdUeXBlOmwsb3JpZ0hhbmRsZXI6ZixwcmVUeXBlOm99KX1lbHNlIGgudW5iaW5kKCJsaXZlLiIrWShsLHIpLGYpfX1yZXR1cm4gdGhpc319KTsKYy5lYWNoKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7Yy5mbltiXT1mdW5jdGlvbihkLGUpe2lmKGU9PW51bGwpe2U9ZDtkPW51bGx9cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLmJpbmQoYixkLGUpOnRoaXMudHJpZ2dlcihiKX07aWYoYy5hdHRyRm4pYy5hdHRyRm5bYl09dHJ1ZX0pO0UuYXR0YWNoRXZlbnQmJiFFLmFkZEV2ZW50TGlzdGVuZXImJmMoRSkuYmluZCgidW5sb2FkIixmdW5jdGlvbigpe2Zvcih2YXIgYSBpbiBjLmNhY2hlKWlmKGMuY2FjaGVbYV0uaGFuZGxlKXRyeXtjLmV2ZW50LnJlbW92ZShjLmNhY2hlW2FdLmhhbmRsZS5lbGVtKX1jYXRjaChiKXt9fSk7CihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoZyxpLG4sbSxwLHEpe3A9MDtmb3IodmFyIHU9bS5sZW5ndGg7cDx1O3ArKyl7dmFyIHk9bVtwXTtpZih5KXt2YXIgRj1mYWxzZTtmb3IoeT15W2ddO3k7KXtpZih5LnNpemNhY2hlPT09bil7Rj1tW3kuc2l6c2V0XTticmVha31pZih5Lm5vZGVUeXBlPT09MSYmIXEpe3kuc2l6Y2FjaGU9bjt5LnNpenNldD1wfWlmKHkubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWkpe0Y9eTticmVha315PXlbZ119bVtwXT1GfX19ZnVuY3Rpb24gYihnLGksbixtLHAscSl7cD0wO2Zvcih2YXIgdT1tLmxlbmd0aDtwPHU7cCsrKXt2YXIgeT1tW3BdO2lmKHkpe3ZhciBGPWZhbHNlO2Zvcih5PXlbZ107eTspe2lmKHkuc2l6Y2FjaGU9PT1uKXtGPW1beS5zaXpzZXRdO2JyZWFrfWlmKHkubm9kZVR5cGU9PT0xKXtpZighcSl7eS5zaXpjYWNoZT1uO3kuc2l6c2V0PXB9aWYodHlwZW9mIGkhPT0ic3RyaW5nIil7aWYoeT09PWkpe0Y9dHJ1ZTticmVha319ZWxzZSBpZihrLmZpbHRlcihpLApbeV0pLmxlbmd0aD4wKXtGPXk7YnJlYWt9fXk9eVtnXX1tW3BdPUZ9fX12YXIgZD0vKCg/OlwoKD86XChbXigpXStcKXxbXigpXSspK1wpfFxbKD86XFtbXlxbXF1dKlxdfFsnIl1bXiciXSpbJyJdfFteXFtcXSciXSspK1xdfFxcLnxbXiA+K34sKFxbXFxdKykrfFs+K35dKShccyosXHMqKT8oKD86LnxccnxcbikqKS9nLGU9MCxmPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsaD1mYWxzZSxsPXRydWU7WzAsMF0uc29ydChmdW5jdGlvbigpe2w9ZmFsc2U7cmV0dXJuIDB9KTt2YXIgaz1mdW5jdGlvbihnLGksbixtKXtuPW58fFtdO3ZhciBwPWk9aXx8dDtpZihpLm5vZGVUeXBlIT09MSYmaS5ub2RlVHlwZSE9PTkpcmV0dXJuW107aWYoIWd8fHR5cGVvZiBnIT09InN0cmluZyIpcmV0dXJuIG47dmFyIHEsdSx5LEYsTSxOPXRydWUsTz1rLmlzWE1MKGkpLEQ9W10sUj1nO2Rve2QuZXhlYygiIik7aWYocT1kLmV4ZWMoUikpe1I9cVszXTtELnB1c2gocVsxXSk7aWYocVsyXSl7Rj1xWzNdOwpicmVha319fXdoaWxlKHEpO2lmKEQubGVuZ3RoPjEmJnguZXhlYyhnKSlpZihELmxlbmd0aD09PTImJm8ucmVsYXRpdmVbRFswXV0pdT1MKERbMF0rRFsxXSxpKTtlbHNlIGZvcih1PW8ucmVsYXRpdmVbRFswXV0/W2ldOmsoRC5zaGlmdCgpLGkpO0QubGVuZ3RoOyl7Zz1ELnNoaWZ0KCk7aWYoby5yZWxhdGl2ZVtnXSlnKz1ELnNoaWZ0KCk7dT1MKGcsdSl9ZWxzZXtpZighbSYmRC5sZW5ndGg+MSYmaS5ub2RlVHlwZT09PTkmJiFPJiZvLm1hdGNoLklELnRlc3QoRFswXSkmJiFvLm1hdGNoLklELnRlc3QoRFtELmxlbmd0aC0xXSkpe3E9ay5maW5kKEQuc2hpZnQoKSxpLE8pO2k9cS5leHByP2suZmlsdGVyKHEuZXhwcixxLnNldClbMF06cS5zZXRbMF19aWYoaSl7cT1tP3tleHByOkQucG9wKCksc2V0OkMobSl9OmsuZmluZChELnBvcCgpLEQubGVuZ3RoPT09MSYmKERbMF09PT0ifiJ8fERbMF09PT0iKyIpJiZpLnBhcmVudE5vZGU/aS5wYXJlbnROb2RlOmksTyk7dT1xLmV4cHI/ay5maWx0ZXIocS5leHByLApxLnNldCk6cS5zZXQ7aWYoRC5sZW5ndGg+MCl5PUModSk7ZWxzZSBOPWZhbHNlO2Zvcig7RC5sZW5ndGg7KXtxPU09RC5wb3AoKTtpZihvLnJlbGF0aXZlW01dKXE9RC5wb3AoKTtlbHNlIE09IiI7aWYocT09bnVsbClxPWk7by5yZWxhdGl2ZVtNXSh5LHEsTyl9fWVsc2UgeT1bXX15fHwoeT11KTt5fHxrLmVycm9yKE18fGcpO2lmKGYuY2FsbCh5KT09PSJbb2JqZWN0IEFycmF5XSIpaWYoTilpZihpJiZpLm5vZGVUeXBlPT09MSlmb3IoZz0wO3lbZ10hPW51bGw7ZysrKXtpZih5W2ddJiYoeVtnXT09PXRydWV8fHlbZ10ubm9kZVR5cGU9PT0xJiZrLmNvbnRhaW5zKGkseVtnXSkpKW4ucHVzaCh1W2ddKX1lbHNlIGZvcihnPTA7eVtnXSE9bnVsbDtnKyspeVtnXSYmeVtnXS5ub2RlVHlwZT09PTEmJm4ucHVzaCh1W2ddKTtlbHNlIG4ucHVzaC5hcHBseShuLHkpO2Vsc2UgQyh5LG4pO2lmKEYpe2soRixwLG4sbSk7ay51bmlxdWVTb3J0KG4pfXJldHVybiBufTtrLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oZyl7aWYodyl7aD0KbDtnLnNvcnQodyk7aWYoaClmb3IodmFyIGk9MTtpPGcubGVuZ3RoO2krKylnW2ldPT09Z1tpLTFdJiZnLnNwbGljZShpLS0sMSl9cmV0dXJuIGd9O2subWF0Y2hlcz1mdW5jdGlvbihnLGkpe3JldHVybiBrKGcsbnVsbCxudWxsLGkpfTtrLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihnLGkpe3JldHVybiBrKGksbnVsbCxudWxsLFtnXSkubGVuZ3RoPjB9O2suZmluZD1mdW5jdGlvbihnLGksbil7dmFyIG07aWYoIWcpcmV0dXJuW107Zm9yKHZhciBwPTAscT1vLm9yZGVyLmxlbmd0aDtwPHE7cCsrKXt2YXIgdSx5PW8ub3JkZXJbcF07aWYodT1vLmxlZnRNYXRjaFt5XS5leGVjKGcpKXt2YXIgRj11WzFdO3Uuc3BsaWNlKDEsMSk7aWYoRi5zdWJzdHIoRi5sZW5ndGgtMSkhPT0iXFwiKXt1WzFdPSh1WzFdfHwiIikucmVwbGFjZSgvXFwvZywiIik7bT1vLmZpbmRbeV0odSxpLG4pO2lmKG0hPW51bGwpe2c9Zy5yZXBsYWNlKG8ubWF0Y2hbeV0sIiIpO2JyZWFrfX19fW18fChtPWkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSk7CnJldHVybntzZXQ6bSxleHByOmd9fTtrLmZpbHRlcj1mdW5jdGlvbihnLGksbixtKXtmb3IodmFyIHAscSx1PWcseT1bXSxGPWksTT1pJiZpWzBdJiZrLmlzWE1MKGlbMF0pO2cmJmkubGVuZ3RoOyl7Zm9yKHZhciBOIGluIG8uZmlsdGVyKWlmKChwPW8ubGVmdE1hdGNoW05dLmV4ZWMoZykpIT1udWxsJiZwWzJdKXt2YXIgTyxELFI9by5maWx0ZXJbTl07RD1wWzFdO3E9ZmFsc2U7cC5zcGxpY2UoMSwxKTtpZihELnN1YnN0cihELmxlbmd0aC0xKSE9PSJcXCIpe2lmKEY9PT15KXk9W107aWYoby5wcmVGaWx0ZXJbTl0paWYocD1vLnByZUZpbHRlcltOXShwLEYsbix5LG0sTSkpe2lmKHA9PT10cnVlKWNvbnRpbnVlfWVsc2UgcT1PPXRydWU7aWYocClmb3IodmFyIGo9MDsoRD1GW2pdKSE9bnVsbDtqKyspaWYoRCl7Tz1SKEQscCxqLEYpO3ZhciBzPW1eISFPO2lmKG4mJk8hPW51bGwpaWYocylxPXRydWU7ZWxzZSBGW2pdPWZhbHNlO2Vsc2UgaWYocyl7eS5wdXNoKEQpO3E9dHJ1ZX19aWYoTyE9PQpCKXtufHwoRj15KTtnPWcucmVwbGFjZShvLm1hdGNoW05dLCIiKTtpZighcSlyZXR1cm5bXTticmVha319fWlmKGc9PT11KWlmKHE9PW51bGwpay5lcnJvcihnKTtlbHNlIGJyZWFrO3U9Z31yZXR1cm4gRn07ay5lcnJvcj1mdW5jdGlvbihnKXt0aHJvdyJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiK2c7fTt2YXIgbz1rLnNlbGVjdG9ycz17b3JkZXI6WyJJRCIsIk5BTUUiLCJUQUciXSxtYXRjaDp7SUQ6LyMoKD86W1x3XHUwMGMwLVx1RkZGRlwtXXxcXC4pKykvLENMQVNTOi9cLigoPzpbXHdcdTAwYzAtXHVGRkZGXC1dfFxcLikrKS8sTkFNRTovXFtuYW1lPVsnIl0qKCg/Oltcd1x1MDBjMC1cdUZGRkZcLV18XFwuKSspWyciXSpcXS8sQVRUUjovXFtccyooKD86W1x3XHUwMGMwLVx1RkZGRlwtXXxcXC4pKylccyooPzooXFM/PSlccyooWyciXSopKC4qPylcM3wpXHMqXF0vLFRBRzovXigoPzpbXHdcdTAwYzAtXHVGRkZGXCpcLV18XFwuKSspLyxDSElMRDovOihvbmx5fG50aHxsYXN0fGZpcnN0KS1jaGlsZCg/OlwoKGV2ZW58b2RkfFtcZG4rXC1dKilcKSk/LywKUE9TOi86KG50aHxlcXxndHxsdHxmaXJzdHxsYXN0fGV2ZW58b2RkKSg/OlwoKFxkKilcKSk/KD89W15cLV18JCkvLFBTRVVETzovOigoPzpbXHdcdTAwYzAtXHVGRkZGXC1dfFxcLikrKSg/OlwoKFsnIl0/KSgoPzpcKFteXCldK1wpfFteXChcKV0qKSspXDJcKSk/L30sbGVmdE1hdGNoOnt9LGF0dHJNYXA6eyJjbGFzcyI6ImNsYXNzTmFtZSIsImZvciI6Imh0bWxGb3IifSxhdHRySGFuZGxlOntocmVmOmZ1bmN0aW9uKGcpe3JldHVybiBnLmdldEF0dHJpYnV0ZSgiaHJlZiIpfX0scmVsYXRpdmU6eyIrIjpmdW5jdGlvbihnLGkpe3ZhciBuPXR5cGVvZiBpPT09InN0cmluZyIsbT1uJiYhL1xXLy50ZXN0KGkpO249biYmIW07aWYobSlpPWkudG9Mb3dlckNhc2UoKTttPTA7Zm9yKHZhciBwPWcubGVuZ3RoLHE7bTxwO20rKylpZihxPWdbbV0pe2Zvcig7KHE9cS5wcmV2aW91c1NpYmxpbmcpJiZxLm5vZGVUeXBlIT09MTspO2dbbV09bnx8cSYmcS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Cmk/cXx8ZmFsc2U6cT09PWl9biYmay5maWx0ZXIoaSxnLHRydWUpfSwiPiI6ZnVuY3Rpb24oZyxpKXt2YXIgbixtPXR5cGVvZiBpPT09InN0cmluZyIscD0wLHE9Zy5sZW5ndGg7aWYobSYmIS9cVy8udGVzdChpKSlmb3IoaT1pLnRvTG93ZXJDYXNlKCk7cDxxO3ArKyl7aWYobj1nW3BdKXtuPW4ucGFyZW50Tm9kZTtnW3BdPW4ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWk/bjpmYWxzZX19ZWxzZXtmb3IoO3A8cTtwKyspaWYobj1nW3BdKWdbcF09bT9uLnBhcmVudE5vZGU6bi5wYXJlbnROb2RlPT09aTttJiZrLmZpbHRlcihpLGcsdHJ1ZSl9fSwiIjpmdW5jdGlvbihnLGksbil7dmFyIG0scD1lKysscT1iO2lmKHR5cGVvZiBpPT09InN0cmluZyImJiEvXFcvLnRlc3QoaSkpe209aT1pLnRvTG93ZXJDYXNlKCk7cT1hfXEoInBhcmVudE5vZGUiLGkscCxnLG0sbil9LCJ+IjpmdW5jdGlvbihnLGksbil7dmFyIG0scD1lKysscT1iO2lmKHR5cGVvZiBpPT09InN0cmluZyImJiEvXFcvLnRlc3QoaSkpe209Cmk9aS50b0xvd2VyQ2FzZSgpO3E9YX1xKCJwcmV2aW91c1NpYmxpbmciLGkscCxnLG0sbil9fSxmaW5kOntJRDpmdW5jdGlvbihnLGksbil7aWYodHlwZW9mIGkuZ2V0RWxlbWVudEJ5SWQhPT0idW5kZWZpbmVkIiYmIW4pcmV0dXJuKGc9aS5nZXRFbGVtZW50QnlJZChnWzFdKSkmJmcucGFyZW50Tm9kZT9bZ106W119LE5BTUU6ZnVuY3Rpb24oZyxpKXtpZih0eXBlb2YgaS5nZXRFbGVtZW50c0J5TmFtZSE9PSJ1bmRlZmluZWQiKXtmb3IodmFyIG49W10sbT1pLmdldEVsZW1lbnRzQnlOYW1lKGdbMV0pLHA9MCxxPW0ubGVuZ3RoO3A8cTtwKyspbVtwXS5nZXRBdHRyaWJ1dGUoIm5hbWUiKT09PWdbMV0mJm4ucHVzaChtW3BdKTtyZXR1cm4gbi5sZW5ndGg9PT0wP251bGw6bn19LFRBRzpmdW5jdGlvbihnLGkpe3JldHVybiBpLmdldEVsZW1lbnRzQnlUYWdOYW1lKGdbMV0pfX0scHJlRmlsdGVyOntDTEFTUzpmdW5jdGlvbihnLGksbixtLHAscSl7Zz0iICIrZ1sxXS5yZXBsYWNlKC9cXC9nLAoiIikrIiAiO2lmKHEpcmV0dXJuIGc7cT0wO2Zvcih2YXIgdTsodT1pW3FdKSE9bnVsbDtxKyspaWYodSlpZihwXih1LmNsYXNzTmFtZSYmKCIgIit1LmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoL1tcdFxuXS9nLCIgIikuaW5kZXhPZihnKT49MCkpbnx8bS5wdXNoKHUpO2Vsc2UgaWYobilpW3FdPWZhbHNlO3JldHVybiBmYWxzZX0sSUQ6ZnVuY3Rpb24oZyl7cmV0dXJuIGdbMV0ucmVwbGFjZSgvXFwvZywiIil9LFRBRzpmdW5jdGlvbihnKXtyZXR1cm4gZ1sxXS50b0xvd2VyQ2FzZSgpfSxDSElMRDpmdW5jdGlvbihnKXtpZihnWzFdPT09Im50aCIpe3ZhciBpPS8oLT8pKFxkKiluKCg/OlwrfC0pP1xkKikvLmV4ZWMoZ1syXT09PSJldmVuIiYmIjJuInx8Z1syXT09PSJvZGQiJiYiMm4rMSJ8fCEvXEQvLnRlc3QoZ1syXSkmJiIwbisiK2dbMl18fGdbMl0pO2dbMl09aVsxXSsoaVsyXXx8MSktMDtnWzNdPWlbM10tMH1nWzBdPWUrKztyZXR1cm4gZ30sQVRUUjpmdW5jdGlvbihnLGksbiwKbSxwLHEpe2k9Z1sxXS5yZXBsYWNlKC9cXC9nLCIiKTtpZighcSYmby5hdHRyTWFwW2ldKWdbMV09by5hdHRyTWFwW2ldO2lmKGdbMl09PT0ifj0iKWdbNF09IiAiK2dbNF0rIiAiO3JldHVybiBnfSxQU0VVRE86ZnVuY3Rpb24oZyxpLG4sbSxwKXtpZihnWzFdPT09Im5vdCIpaWYoKGQuZXhlYyhnWzNdKXx8IiIpLmxlbmd0aD4xfHwvXlx3Ly50ZXN0KGdbM10pKWdbM109ayhnWzNdLG51bGwsbnVsbCxpKTtlbHNle2c9ay5maWx0ZXIoZ1szXSxpLG4sdHJ1ZV5wKTtufHxtLnB1c2guYXBwbHkobSxnKTtyZXR1cm4gZmFsc2V9ZWxzZSBpZihvLm1hdGNoLlBPUy50ZXN0KGdbMF0pfHxvLm1hdGNoLkNISUxELnRlc3QoZ1swXSkpcmV0dXJuIHRydWU7cmV0dXJuIGd9LFBPUzpmdW5jdGlvbihnKXtnLnVuc2hpZnQodHJ1ZSk7cmV0dXJuIGd9fSxmaWx0ZXJzOntlbmFibGVkOmZ1bmN0aW9uKGcpe3JldHVybiBnLmRpc2FibGVkPT09ZmFsc2UmJmcudHlwZSE9PSJoaWRkZW4ifSxkaXNhYmxlZDpmdW5jdGlvbihnKXtyZXR1cm4gZy5kaXNhYmxlZD09PQp0cnVlfSxjaGVja2VkOmZ1bmN0aW9uKGcpe3JldHVybiBnLmNoZWNrZWQ9PT10cnVlfSxzZWxlY3RlZDpmdW5jdGlvbihnKXtyZXR1cm4gZy5zZWxlY3RlZD09PXRydWV9LHBhcmVudDpmdW5jdGlvbihnKXtyZXR1cm4hIWcuZmlyc3RDaGlsZH0sZW1wdHk6ZnVuY3Rpb24oZyl7cmV0dXJuIWcuZmlyc3RDaGlsZH0saGFzOmZ1bmN0aW9uKGcsaSxuKXtyZXR1cm4hIWsoblszXSxnKS5sZW5ndGh9LGhlYWRlcjpmdW5jdGlvbihnKXtyZXR1cm4vaFxkL2kudGVzdChnLm5vZGVOYW1lKX0sdGV4dDpmdW5jdGlvbihnKXtyZXR1cm4idGV4dCI9PT1nLnR5cGV9LHJhZGlvOmZ1bmN0aW9uKGcpe3JldHVybiJyYWRpbyI9PT1nLnR5cGV9LGNoZWNrYm94OmZ1bmN0aW9uKGcpe3JldHVybiJjaGVja2JveCI9PT1nLnR5cGV9LGZpbGU6ZnVuY3Rpb24oZyl7cmV0dXJuImZpbGUiPT09Zy50eXBlfSxwYXNzd29yZDpmdW5jdGlvbihnKXtyZXR1cm4icGFzc3dvcmQiPT09Zy50eXBlfSxzdWJtaXQ6ZnVuY3Rpb24oZyl7cmV0dXJuInN1Ym1pdCI9PT0KZy50eXBlfSxpbWFnZTpmdW5jdGlvbihnKXtyZXR1cm4iaW1hZ2UiPT09Zy50eXBlfSxyZXNldDpmdW5jdGlvbihnKXtyZXR1cm4icmVzZXQiPT09Zy50eXBlfSxidXR0b246ZnVuY3Rpb24oZyl7cmV0dXJuImJ1dHRvbiI9PT1nLnR5cGV8fGcubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJidXR0b24ifSxpbnB1dDpmdW5jdGlvbihnKXtyZXR1cm4vaW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbi9pLnRlc3QoZy5ub2RlTmFtZSl9fSxzZXRGaWx0ZXJzOntmaXJzdDpmdW5jdGlvbihnLGkpe3JldHVybiBpPT09MH0sbGFzdDpmdW5jdGlvbihnLGksbixtKXtyZXR1cm4gaT09PW0ubGVuZ3RoLTF9LGV2ZW46ZnVuY3Rpb24oZyxpKXtyZXR1cm4gaSUyPT09MH0sb2RkOmZ1bmN0aW9uKGcsaSl7cmV0dXJuIGklMj09PTF9LGx0OmZ1bmN0aW9uKGcsaSxuKXtyZXR1cm4gaTxuWzNdLTB9LGd0OmZ1bmN0aW9uKGcsaSxuKXtyZXR1cm4gaT5uWzNdLTB9LG50aDpmdW5jdGlvbihnLGksbil7cmV0dXJuIG5bM10tCjA9PT1pfSxlcTpmdW5jdGlvbihnLGksbil7cmV0dXJuIG5bM10tMD09PWl9fSxmaWx0ZXI6e1BTRVVETzpmdW5jdGlvbihnLGksbixtKXt2YXIgcD1pWzFdLHE9by5maWx0ZXJzW3BdO2lmKHEpcmV0dXJuIHEoZyxuLGksbSk7ZWxzZSBpZihwPT09ImNvbnRhaW5zIilyZXR1cm4oZy50ZXh0Q29udGVudHx8Zy5pbm5lclRleHR8fGsuZ2V0VGV4dChbZ10pfHwiIikuaW5kZXhPZihpWzNdKT49MDtlbHNlIGlmKHA9PT0ibm90Iil7aT1pWzNdO249MDtmb3IobT1pLmxlbmd0aDtuPG07bisrKWlmKGlbbl09PT1nKXJldHVybiBmYWxzZTtyZXR1cm4gdHJ1ZX1lbHNlIGsuZXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrcCl9LENISUxEOmZ1bmN0aW9uKGcsaSl7dmFyIG49aVsxXSxtPWc7c3dpdGNoKG4pe2Nhc2UgIm9ubHkiOmNhc2UgImZpcnN0Ijpmb3IoO209bS5wcmV2aW91c1NpYmxpbmc7KWlmKG0ubm9kZVR5cGU9PT0xKXJldHVybiBmYWxzZTtpZihuPT09CiJmaXJzdCIpcmV0dXJuIHRydWU7bT1nO2Nhc2UgImxhc3QiOmZvcig7bT1tLm5leHRTaWJsaW5nOylpZihtLm5vZGVUeXBlPT09MSlyZXR1cm4gZmFsc2U7cmV0dXJuIHRydWU7Y2FzZSAibnRoIjpuPWlbMl07dmFyIHA9aVszXTtpZihuPT09MSYmcD09PTApcmV0dXJuIHRydWU7dmFyIHE9aVswXSx1PWcucGFyZW50Tm9kZTtpZih1JiYodS5zaXpjYWNoZSE9PXF8fCFnLm5vZGVJbmRleCkpe3ZhciB5PTA7Zm9yKG09dS5maXJzdENoaWxkO207bT1tLm5leHRTaWJsaW5nKWlmKG0ubm9kZVR5cGU9PT0xKW0ubm9kZUluZGV4PSsreTt1LnNpemNhY2hlPXF9bT1nLm5vZGVJbmRleC1wO3JldHVybiBuPT09MD9tPT09MDptJW49PT0wJiZtL24+PTB9fSxJRDpmdW5jdGlvbihnLGkpe3JldHVybiBnLm5vZGVUeXBlPT09MSYmZy5nZXRBdHRyaWJ1dGUoImlkIik9PT1pfSxUQUc6ZnVuY3Rpb24oZyxpKXtyZXR1cm4gaT09PSIqIiYmZy5ub2RlVHlwZT09PTF8fGcubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PQppfSxDTEFTUzpmdW5jdGlvbihnLGkpe3JldHVybigiICIrKGcuY2xhc3NOYW1lfHxnLmdldEF0dHJpYnV0ZSgiY2xhc3MiKSkrIiAiKS5pbmRleE9mKGkpPi0xfSxBVFRSOmZ1bmN0aW9uKGcsaSl7dmFyIG49aVsxXTtuPW8uYXR0ckhhbmRsZVtuXT9vLmF0dHJIYW5kbGVbbl0oZyk6Z1tuXSE9bnVsbD9nW25dOmcuZ2V0QXR0cmlidXRlKG4pO3ZhciBtPW4rIiIscD1pWzJdLHE9aVs0XTtyZXR1cm4gbj09bnVsbD9wPT09IiE9IjpwPT09Ij0iP209PT1xOnA9PT0iKj0iP20uaW5kZXhPZihxKT49MDpwPT09In49Ij8oIiAiK20rIiAiKS5pbmRleE9mKHEpPj0wOiFxP20mJm4hPT1mYWxzZTpwPT09IiE9Ij9tIT09cTpwPT09Il49Ij9tLmluZGV4T2YocSk9PT0wOnA9PT0iJD0iP20uc3Vic3RyKG0ubGVuZ3RoLXEubGVuZ3RoKT09PXE6cD09PSJ8PSI/bT09PXF8fG0uc3Vic3RyKDAscS5sZW5ndGgrMSk9PT1xKyItIjpmYWxzZX0sUE9TOmZ1bmN0aW9uKGcsaSxuLG0pe3ZhciBwPW8uc2V0RmlsdGVyc1tpWzJdXTsKaWYocClyZXR1cm4gcChnLG4saSxtKX19fSx4PW8ubWF0Y2guUE9TLHI9ZnVuY3Rpb24oZyxpKXtyZXR1cm4iXFwiKyhpLTArMSl9LEE7Zm9yKEEgaW4gby5tYXRjaCl7by5tYXRjaFtBXT1SZWdFeHAoby5tYXRjaFtBXS5zb3VyY2UrLyg/IVteXFtdKlxdKSg/IVteXChdKlwpKS8uc291cmNlKTtvLmxlZnRNYXRjaFtBXT1SZWdFeHAoLyheKD86LnxccnxcbikqPykvLnNvdXJjZStvLm1hdGNoW0FdLnNvdXJjZS5yZXBsYWNlKC9cXChcZCspL2cscikpfXZhciBDPWZ1bmN0aW9uKGcsaSl7Zz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChnLDApO2lmKGkpe2kucHVzaC5hcHBseShpLGcpO3JldHVybiBpfXJldHVybiBnfTt0cnl7QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodC5kb2N1bWVudEVsZW1lbnQuY2hpbGROb2RlcywwKX1jYXRjaChKKXtDPWZ1bmN0aW9uKGcsaSl7dmFyIG49MCxtPWl8fFtdO2lmKGYuY2FsbChnKT09PSJbb2JqZWN0IEFycmF5XSIpQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkobSwKZyk7ZWxzZSBpZih0eXBlb2YgZy5sZW5ndGg9PT0ibnVtYmVyIilmb3IodmFyIHA9Zy5sZW5ndGg7bjxwO24rKyltLnB1c2goZ1tuXSk7ZWxzZSBmb3IoO2dbbl07bisrKW0ucHVzaChnW25dKTtyZXR1cm4gbX19dmFyIHcsSTtpZih0LmRvY3VtZW50RWxlbWVudC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbil3PWZ1bmN0aW9uKGcsaSl7aWYoZz09PWkpe2g9dHJ1ZTtyZXR1cm4gMH1pZighZy5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbnx8IWkuY29tcGFyZURvY3VtZW50UG9zaXRpb24pcmV0dXJuIGcuY29tcGFyZURvY3VtZW50UG9zaXRpb24/LTE6MTtyZXR1cm4gZy5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihpKSY0Py0xOjF9O2Vsc2V7dz1mdW5jdGlvbihnLGkpe3ZhciBuLG0scD1bXSxxPVtdO249Zy5wYXJlbnROb2RlO209aS5wYXJlbnROb2RlO3ZhciB1PW47aWYoZz09PWkpe2g9dHJ1ZTtyZXR1cm4gMH1lbHNlIGlmKG49PT1tKXJldHVybiBJKGcsaSk7ZWxzZSBpZihuKXtpZighbSlyZXR1cm4gMX1lbHNlIHJldHVybi0xOwpmb3IoO3U7KXtwLnVuc2hpZnQodSk7dT11LnBhcmVudE5vZGV9Zm9yKHU9bTt1Oyl7cS51bnNoaWZ0KHUpO3U9dS5wYXJlbnROb2RlfW49cC5sZW5ndGg7bT1xLmxlbmd0aDtmb3IodT0wO3U8biYmdTxtO3UrKylpZihwW3VdIT09cVt1XSlyZXR1cm4gSShwW3VdLHFbdV0pO3JldHVybiB1PT09bj9JKGcscVt1XSwtMSk6SShwW3VdLGksMSl9O0k9ZnVuY3Rpb24oZyxpLG4pe2lmKGc9PT1pKXJldHVybiBuO2ZvcihnPWcubmV4dFNpYmxpbmc7Zzspe2lmKGc9PT1pKXJldHVybi0xO2c9Zy5uZXh0U2libGluZ31yZXR1cm4gMX19ay5nZXRUZXh0PWZ1bmN0aW9uKGcpe2Zvcih2YXIgaT0iIixuLG09MDtnW21dO20rKyl7bj1nW21dO2lmKG4ubm9kZVR5cGU9PT0zfHxuLm5vZGVUeXBlPT09NClpKz1uLm5vZGVWYWx1ZTtlbHNlIGlmKG4ubm9kZVR5cGUhPT04KWkrPWsuZ2V0VGV4dChuLmNoaWxkTm9kZXMpfXJldHVybiBpfTsoZnVuY3Rpb24oKXt2YXIgZz10LmNyZWF0ZUVsZW1lbnQoImRpdiIpLAppPSJzY3JpcHQiKyhuZXcgRGF0ZSkuZ2V0VGltZSgpLG49dC5kb2N1bWVudEVsZW1lbnQ7Zy5pbm5lckhUTUw9IjxhIG5hbWU9JyIraSsiJy8+IjtuLmluc2VydEJlZm9yZShnLG4uZmlyc3RDaGlsZCk7aWYodC5nZXRFbGVtZW50QnlJZChpKSl7by5maW5kLklEPWZ1bmN0aW9uKG0scCxxKXtpZih0eXBlb2YgcC5nZXRFbGVtZW50QnlJZCE9PSJ1bmRlZmluZWQiJiYhcSlyZXR1cm4ocD1wLmdldEVsZW1lbnRCeUlkKG1bMV0pKT9wLmlkPT09bVsxXXx8dHlwZW9mIHAuZ2V0QXR0cmlidXRlTm9kZSE9PSJ1bmRlZmluZWQiJiZwLmdldEF0dHJpYnV0ZU5vZGUoImlkIikubm9kZVZhbHVlPT09bVsxXT9bcF06QjpbXX07by5maWx0ZXIuSUQ9ZnVuY3Rpb24obSxwKXt2YXIgcT10eXBlb2YgbS5nZXRBdHRyaWJ1dGVOb2RlIT09InVuZGVmaW5lZCImJm0uZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gbS5ub2RlVHlwZT09PTEmJnEmJnEubm9kZVZhbHVlPT09cH19bi5yZW1vdmVDaGlsZChnKTsKbj1nPW51bGx9KSgpOyhmdW5jdGlvbigpe3ZhciBnPXQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zy5hcHBlbmRDaGlsZCh0LmNyZWF0ZUNvbW1lbnQoIiIpKTtpZihnLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RoPjApby5maW5kLlRBRz1mdW5jdGlvbihpLG4pe3ZhciBtPW4uZ2V0RWxlbWVudHNCeVRhZ05hbWUoaVsxXSk7aWYoaVsxXT09PSIqIil7Zm9yKHZhciBwPVtdLHE9MDttW3FdO3ErKyltW3FdLm5vZGVUeXBlPT09MSYmcC5wdXNoKG1bcV0pO209cH1yZXR1cm4gbX07Zy5pbm5lckhUTUw9IjxhIGhyZWY9JyMnPjwvYT4iO2lmKGcuZmlyc3RDaGlsZCYmdHlwZW9mIGcuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUhPT0idW5kZWZpbmVkIiYmZy5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpIT09IiMiKW8uYXR0ckhhbmRsZS5ocmVmPWZ1bmN0aW9uKGkpe3JldHVybiBpLmdldEF0dHJpYnV0ZSgiaHJlZiIsMil9O2c9bnVsbH0pKCk7dC5xdWVyeVNlbGVjdG9yQWxsJiYKZnVuY3Rpb24oKXt2YXIgZz1rLGk9dC5jcmVhdGVFbGVtZW50KCJkaXYiKTtpLmlubmVySFRNTD0iPHAgY2xhc3M9J1RFU1QnPjwvcD4iO2lmKCEoaS5xdWVyeVNlbGVjdG9yQWxsJiZpLnF1ZXJ5U2VsZWN0b3JBbGwoIi5URVNUIikubGVuZ3RoPT09MCkpe2s9ZnVuY3Rpb24obSxwLHEsdSl7cD1wfHx0O209bS5yZXBsYWNlKC9cPVxzKihbXiciXF1dKilccypcXS9nLCI9JyQxJ10iKTtpZighdSYmIWsuaXNYTUwocCkpaWYocC5ub2RlVHlwZT09PTkpdHJ5e3JldHVybiBDKHAucXVlcnlTZWxlY3RvckFsbChtKSxxKX1jYXRjaCh5KXt9ZWxzZSBpZihwLm5vZGVUeXBlPT09MSYmcC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09Im9iamVjdCIpe3ZhciBGPXAuZ2V0QXR0cmlidXRlKCJpZCIpLE09Rnx8Il9fc2l6emxlX18iO0Z8fHAuc2V0QXR0cmlidXRlKCJpZCIsTSk7dHJ5e3JldHVybiBDKHAucXVlcnlTZWxlY3RvckFsbCgiIyIrTSsiICIrbSkscSl9Y2F0Y2goTil7fWZpbmFsbHl7Rnx8CnAucmVtb3ZlQXR0cmlidXRlKCJpZCIpfX1yZXR1cm4gZyhtLHAscSx1KX07Zm9yKHZhciBuIGluIGcpa1tuXT1nW25dO2k9bnVsbH19KCk7KGZ1bmN0aW9uKCl7dmFyIGc9dC5kb2N1bWVudEVsZW1lbnQsaT1nLm1hdGNoZXNTZWxlY3Rvcnx8Zy5tb3pNYXRjaGVzU2VsZWN0b3J8fGcud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxnLm1zTWF0Y2hlc1NlbGVjdG9yLG49ZmFsc2U7dHJ5e2kuY2FsbCh0LmRvY3VtZW50RWxlbWVudCwiW3Rlc3QhPScnXTpzaXp6bGUiKX1jYXRjaChtKXtuPXRydWV9aWYoaSlrLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihwLHEpe3E9cS5yZXBsYWNlKC9cPVxzKihbXiciXF1dKilccypcXS9nLCI9JyQxJ10iKTtpZighay5pc1hNTChwKSl0cnl7aWYobnx8IW8ubWF0Y2guUFNFVURPLnRlc3QocSkmJiEvIT0vLnRlc3QocSkpcmV0dXJuIGkuY2FsbChwLHEpfWNhdGNoKHUpe31yZXR1cm4gayhxLG51bGwsbnVsbCxbcF0pLmxlbmd0aD4wfX0pKCk7KGZ1bmN0aW9uKCl7dmFyIGc9CnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zy5pbm5lckhUTUw9IjxkaXYgY2xhc3M9J3Rlc3QgZSc+PC9kaXY+PGRpdiBjbGFzcz0ndGVzdCc+PC9kaXY+IjtpZighKCFnLmdldEVsZW1lbnRzQnlDbGFzc05hbWV8fGcuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZSIpLmxlbmd0aD09PTApKXtnLmxhc3RDaGlsZC5jbGFzc05hbWU9ImUiO2lmKGcuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZSIpLmxlbmd0aCE9PTEpe28ub3JkZXIuc3BsaWNlKDEsMCwiQ0xBU1MiKTtvLmZpbmQuQ0xBU1M9ZnVuY3Rpb24oaSxuLG0pe2lmKHR5cGVvZiBuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUhPT0idW5kZWZpbmVkIiYmIW0pcmV0dXJuIG4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShpWzFdKX07Zz1udWxsfX19KSgpO2suY29udGFpbnM9dC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnM/ZnVuY3Rpb24oZyxpKXtyZXR1cm4gZyE9PWkmJihnLmNvbnRhaW5zP2cuY29udGFpbnMoaSk6dHJ1ZSl9OnQuZG9jdW1lbnRFbGVtZW50LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uPwpmdW5jdGlvbihnLGkpe3JldHVybiEhKGcuY29tcGFyZURvY3VtZW50UG9zaXRpb24oaSkmMTYpfTpmdW5jdGlvbigpe3JldHVybiBmYWxzZX07ay5pc1hNTD1mdW5jdGlvbihnKXtyZXR1cm4oZz0oZz9nLm93bmVyRG9jdW1lbnR8fGc6MCkuZG9jdW1lbnRFbGVtZW50KT9nLm5vZGVOYW1lIT09IkhUTUwiOmZhbHNlfTt2YXIgTD1mdW5jdGlvbihnLGkpe2Zvcih2YXIgbixtPVtdLHA9IiIscT1pLm5vZGVUeXBlP1tpXTppO249by5tYXRjaC5QU0VVRE8uZXhlYyhnKTspe3ArPW5bMF07Zz1nLnJlcGxhY2Uoby5tYXRjaC5QU0VVRE8sIiIpfWc9by5yZWxhdGl2ZVtnXT9nKyIqIjpnO249MDtmb3IodmFyIHU9cS5sZW5ndGg7bjx1O24rKylrKGcscVtuXSxtKTtyZXR1cm4gay5maWx0ZXIocCxtKX07Yy5maW5kPWs7Yy5leHByPWsuc2VsZWN0b3JzO2MuZXhwclsiOiJdPWMuZXhwci5maWx0ZXJzO2MudW5pcXVlPWsudW5pcXVlU29ydDtjLnRleHQ9ay5nZXRUZXh0O2MuaXNYTUxEb2M9ay5pc1hNTDsKYy5jb250YWlucz1rLmNvbnRhaW5zfSkoKTt2YXIgWmE9L1VudGlsJC8sJGE9L14oPzpwYXJlbnRzfHByZXZVbnRpbHxwcmV2QWxsKS8sYWI9LywvLE5hPS9eLlteOiNcW1wuLF0qJC8sYmI9QXJyYXkucHJvdG90eXBlLnNsaWNlLGNiPWMuZXhwci5tYXRjaC5QT1M7Yy5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMucHVzaFN0YWNrKCIiLCJmaW5kIixhKSxkPTAsZT0wLGY9dGhpcy5sZW5ndGg7ZTxmO2UrKyl7ZD1iLmxlbmd0aDtjLmZpbmQoYSx0aGlzW2VdLGIpO2lmKGU+MClmb3IodmFyIGg9ZDtoPGIubGVuZ3RoO2grKylmb3IodmFyIGw9MDtsPGQ7bCsrKWlmKGJbbF09PT1iW2hdKXtiLnNwbGljZShoLS0sMSk7YnJlYWt9fXJldHVybiBifSxoYXM6ZnVuY3Rpb24oYSl7dmFyIGI9YyhhKTtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2Q8ZTtkKyspaWYoYy5jb250YWlucyh0aGlzLGJbZF0pKXJldHVybiB0cnVlfSl9LApub3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG1hKHRoaXMsYSxmYWxzZSksIm5vdCIsYSl9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobWEodGhpcyxhLHRydWUpLCJmaWx0ZXIiLGEpfSxpczpmdW5jdGlvbihhKXtyZXR1cm4hIWEmJmMuZmlsdGVyKGEsdGhpcykubGVuZ3RoPjB9LGNsb3Nlc3Q6ZnVuY3Rpb24oYSxiKXt2YXIgZD1bXSxlLGYsaD10aGlzWzBdO2lmKGMuaXNBcnJheShhKSl7dmFyIGwsaz17fSxvPTE7aWYoaCYmYS5sZW5ndGgpe2U9MDtmb3IoZj1hLmxlbmd0aDtlPGY7ZSsrKXtsPWFbZV07a1tsXXx8KGtbbF09Yy5leHByLm1hdGNoLlBPUy50ZXN0KGwpP2MobCxifHx0aGlzLmNvbnRleHQpOmwpfWZvcig7aCYmaC5vd25lckRvY3VtZW50JiZoIT09Yjspe2ZvcihsIGluIGspe2U9a1tsXTtpZihlLmpxdWVyeT9lLmluZGV4KGgpPi0xOmMoaCkuaXMoZSkpZC5wdXNoKHtzZWxlY3RvcjpsLGVsZW06aCxsZXZlbDpvfSl9aD0KaC5wYXJlbnROb2RlO28rK319cmV0dXJuIGR9bD1jYi50ZXN0KGEpP2MoYSxifHx0aGlzLmNvbnRleHQpOm51bGw7ZT0wO2ZvcihmPXRoaXMubGVuZ3RoO2U8ZjtlKyspZm9yKGg9dGhpc1tlXTtoOylpZihsP2wuaW5kZXgoaCk+LTE6Yy5maW5kLm1hdGNoZXNTZWxlY3RvcihoLGEpKXtkLnB1c2goaCk7YnJlYWt9ZWxzZXtoPWgucGFyZW50Tm9kZTtpZighaHx8IWgub3duZXJEb2N1bWVudHx8aD09PWIpYnJlYWt9ZD1kLmxlbmd0aD4xP2MudW5pcXVlKGQpOmQ7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQsImNsb3Nlc3QiLGEpfSxpbmRleDpmdW5jdGlvbihhKXtpZighYXx8dHlwZW9mIGE9PT0ic3RyaW5nIilyZXR1cm4gYy5pbkFycmF5KHRoaXNbMF0sYT9jKGEpOnRoaXMucGFyZW50KCkuY2hpbGRyZW4oKSk7cmV0dXJuIGMuaW5BcnJheShhLmpxdWVyeT9hWzBdOmEsdGhpcyl9LGFkZDpmdW5jdGlvbihhLGIpe3ZhciBkPXR5cGVvZiBhPT09InN0cmluZyI/YyhhLGJ8fHRoaXMuY29udGV4dCk6CmMubWFrZUFycmF5KGEpLGU9Yy5tZXJnZSh0aGlzLmdldCgpLGQpO3JldHVybiB0aGlzLnB1c2hTdGFjayghZFswXXx8IWRbMF0ucGFyZW50Tm9kZXx8ZFswXS5wYXJlbnROb2RlLm5vZGVUeXBlPT09MTF8fCFlWzBdfHwhZVswXS5wYXJlbnROb2RlfHxlWzBdLnBhcmVudE5vZGUubm9kZVR5cGU9PT0xMT9lOmMudW5pcXVlKGUpKX0sYW5kU2VsZjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFkZCh0aGlzLnByZXZPYmplY3QpfX0pO2MuZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybihhPWEucGFyZW50Tm9kZSkmJmEubm9kZVR5cGUhPT0xMT9hOm51bGx9LHBhcmVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGMuZGlyKGEsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYy5kaXIoYSwicGFyZW50Tm9kZSIsZCl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGMubnRoKGEsMiwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gYy5udGgoYSwKMiwicHJldmlvdXNTaWJsaW5nIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIGMuZGlyKGEsIm5leHRTaWJsaW5nIil9LHByZXZBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIGMuZGlyKGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjLmRpcihhLCJuZXh0U2libGluZyIsZCl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGMuZGlyKGEsInByZXZpb3VzU2libGluZyIsZCl9LHNpYmxpbmdzOmZ1bmN0aW9uKGEpe3JldHVybiBjLnNpYmxpbmcoYS5wYXJlbnROb2RlLmZpcnN0Q2hpbGQsYSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3JldHVybiBjLnNpYmxpbmcoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGMubm9kZU5hbWUoYSwiaWZyYW1lIik/YS5jb250ZW50RG9jdW1lbnR8fGEuY29udGVudFdpbmRvdy5kb2N1bWVudDpjLm1ha2VBcnJheShhLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oYSwKYil7Yy5mblthXT1mdW5jdGlvbihkLGUpe3ZhciBmPWMubWFwKHRoaXMsYixkKTtaYS50ZXN0KGEpfHwoZT1kKTtpZihlJiZ0eXBlb2YgZT09PSJzdHJpbmciKWY9Yy5maWx0ZXIoZSxmKTtmPXRoaXMubGVuZ3RoPjE/Yy51bmlxdWUoZik6ZjtpZigodGhpcy5sZW5ndGg+MXx8YWIudGVzdChlKSkmJiRhLnRlc3QoYSkpZj1mLnJldmVyc2UoKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZixhLGJiLmNhbGwoYXJndW1lbnRzKS5qb2luKCIsIikpfX0pO2MuZXh0ZW5kKHtmaWx0ZXI6ZnVuY3Rpb24oYSxiLGQpe2lmKGQpYT0iOm5vdCgiK2ErIikiO3JldHVybiBiLmxlbmd0aD09PTE/Yy5maW5kLm1hdGNoZXNTZWxlY3RvcihiWzBdLGEpP1tiWzBdXTpbXTpjLmZpbmQubWF0Y2hlcyhhLGIpfSxkaXI6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPVtdO2ZvcihhPWFbYl07YSYmYS5ub2RlVHlwZSE9PTkmJihkPT09Qnx8YS5ub2RlVHlwZSE9PTF8fCFjKGEpLmlzKGQpKTspe2Eubm9kZVR5cGU9PT0xJiYKZS5wdXNoKGEpO2E9YVtiXX1yZXR1cm4gZX0sbnRoOmZ1bmN0aW9uKGEsYixkKXtiPWJ8fDE7Zm9yKHZhciBlPTA7YTthPWFbZF0paWYoYS5ub2RlVHlwZT09PTEmJisrZT09PWIpYnJlYWs7cmV0dXJuIGF9LHNpYmxpbmc6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGQ9W107YTthPWEubmV4dFNpYmxpbmcpYS5ub2RlVHlwZT09PTEmJmEhPT1iJiZkLnB1c2goYSk7cmV0dXJuIGR9fSk7dmFyIHphPS8galF1ZXJ5XGQrPSIoPzpcZCt8bnVsbCkiL2csJD0vXlxzKy8sQWE9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1x3Ol0rKVtePl0qKVwvPi9pZyxCYT0vPChbXHc6XSspLyxkYj0vPHRib2R5L2ksZWI9Lzx8JiM/XHcrOy8sQ2E9LzwoPzpzY3JpcHR8b2JqZWN0fGVtYmVkfG9wdGlvbnxzdHlsZSkvaSxEYT0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSxmYj0vXD0oW149Iic+XHNdK1wvKT4vZyxQPXtvcHRpb246WzEsCiI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwiPC9zZWxlY3Q+Il0sbGVnZW5kOlsxLCI8ZmllbGRzZXQ+IiwiPC9maWVsZHNldD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sdHI6WzIsIjx0YWJsZT48dGJvZHk+IiwiPC90Ym9keT48L3RhYmxlPiJdLHRkOlszLCI8dGFibGU+PHRib2R5Pjx0cj4iLCI8L3RyPjwvdGJvZHk+PC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLGFyZWE6WzEsIjxtYXA+IiwiPC9tYXA+Il0sX2RlZmF1bHQ6WzAsIiIsIiJdfTtQLm9wdGdyb3VwPVAub3B0aW9uO1AudGJvZHk9UC50Zm9vdD1QLmNvbGdyb3VwPVAuY2FwdGlvbj1QLnRoZWFkO1AudGg9UC50ZDtpZighYy5zdXBwb3J0Lmh0bWxTZXJpYWxpemUpUC5fZGVmYXVsdD1bMSwiZGl2PGRpdj4iLCI8L2Rpdj4iXTtjLmZuLmV4dGVuZCh7dGV4dDpmdW5jdGlvbihhKXtpZihjLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXt2YXIgZD0KYyh0aGlzKTtkLnRleHQoYS5jYWxsKHRoaXMsYixkLnRleHQoKSkpfSk7aWYodHlwZW9mIGEhPT0ib2JqZWN0IiYmYSE9PUIpcmV0dXJuIHRoaXMuZW1wdHkoKS5hcHBlbmQoKHRoaXNbMF0mJnRoaXNbMF0ub3duZXJEb2N1bWVudHx8dCkuY3JlYXRlVGV4dE5vZGUoYSkpO3JldHVybiBjLnRleHQodGhpcyl9LHdyYXBBbGw6ZnVuY3Rpb24oYSl7aWYoYy5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oZCl7Yyh0aGlzKS53cmFwQWxsKGEuY2FsbCh0aGlzLGQpKX0pO2lmKHRoaXNbMF0pe3ZhciBiPWMoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKHRydWUpO3RoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSk7Yi5tYXAoZnVuY3Rpb24oKXtmb3IodmFyIGQ9dGhpcztkLmZpcnN0Q2hpbGQmJmQuZmlyc3RDaGlsZC5ub2RlVHlwZT09PTE7KWQ9ZC5maXJzdENoaWxkO3JldHVybiBkfSkuYXBwZW5kKHRoaXMpfXJldHVybiB0aGlzfSwKd3JhcElubmVyOmZ1bmN0aW9uKGEpe2lmKGMuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe2ModGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX0pO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1jKHRoaXMpLGQ9Yi5jb250ZW50cygpO2QubGVuZ3RoP2Qud3JhcEFsbChhKTpiLmFwcGVuZChhKX0pfSx3cmFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtjKHRoaXMpLndyYXBBbGwoYSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe2Mubm9kZU5hbWUodGhpcywiYm9keSIpfHxjKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLHRydWUsZnVuY3Rpb24oYSl7dGhpcy5ub2RlVHlwZT09PTEmJnRoaXMuYXBwZW5kQ2hpbGQoYSl9KX0sCnByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsdHJ1ZSxmdW5jdGlvbihhKXt0aGlzLm5vZGVUeXBlPT09MSYmdGhpcy5pbnNlcnRCZWZvcmUoYSx0aGlzLmZpcnN0Q2hpbGQpfSl9LGJlZm9yZTpmdW5jdGlvbigpe2lmKHRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZSlyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZmFsc2UsZnVuY3Rpb24oYil7dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiLHRoaXMpfSk7ZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoKXt2YXIgYT1jKGFyZ3VtZW50c1swXSk7YS5wdXNoLmFwcGx5KGEsdGhpcy50b0FycmF5KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhhLCJiZWZvcmUiLGFyZ3VtZW50cyl9fSxhZnRlcjpmdW5jdGlvbigpe2lmKHRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZSlyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZmFsc2UsZnVuY3Rpb24oYil7dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiLAp0aGlzLm5leHRTaWJsaW5nKX0pO2Vsc2UgaWYoYXJndW1lbnRzLmxlbmd0aCl7dmFyIGE9dGhpcy5wdXNoU3RhY2sodGhpcywiYWZ0ZXIiLGFyZ3VtZW50cyk7YS5wdXNoLmFwcGx5KGEsYyhhcmd1bWVudHNbMF0pLnRvQXJyYXkoKSk7cmV0dXJuIGF9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGQ9MCxlOyhlPXRoaXNbZF0pIT1udWxsO2QrKylpZighYXx8Yy5maWx0ZXIoYSxbZV0pLmxlbmd0aCl7aWYoIWImJmUubm9kZVR5cGU9PT0xKXtjLmNsZWFuRGF0YShlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikpO2MuY2xlYW5EYXRhKFtlXSl9ZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSl9cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYjsoYj10aGlzW2FdKSE9bnVsbDthKyspZm9yKGIubm9kZVR5cGU9PT0xJiZjLmNsZWFuRGF0YShiLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikpO2IuZmlyc3RDaGlsZDspYi5yZW1vdmVDaGlsZChiLmZpcnN0Q2hpbGQpOwpyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5tYXAoZnVuY3Rpb24oKXtpZighYy5zdXBwb3J0Lm5vQ2xvbmVFdmVudCYmIWMuaXNYTUxEb2ModGhpcykpe3ZhciBkPXRoaXMub3V0ZXJIVE1MLGU9dGhpcy5vd25lckRvY3VtZW50O2lmKCFkKXtkPWUuY3JlYXRlRWxlbWVudCgiZGl2Iik7ZC5hcHBlbmRDaGlsZCh0aGlzLmNsb25lTm9kZSh0cnVlKSk7ZD1kLmlubmVySFRNTH1yZXR1cm4gYy5jbGVhbihbZC5yZXBsYWNlKHphLCIiKS5yZXBsYWNlKGZiLCc9IiQxIj4nKS5yZXBsYWNlKCQsIiIpXSxlKVswXX1lbHNlIHJldHVybiB0aGlzLmNsb25lTm9kZSh0cnVlKX0pO2lmKGE9PT10cnVlKXtuYSh0aGlzLGIpO25hKHRoaXMuZmluZCgiKiIpLGIuZmluZCgiKiIpKX1yZXR1cm4gYn0saHRtbDpmdW5jdGlvbihhKXtpZihhPT09QilyZXR1cm4gdGhpc1swXSYmdGhpc1swXS5ub2RlVHlwZT09PTE/dGhpc1swXS5pbm5lckhUTUwucmVwbGFjZSh6YSwiIik6bnVsbDsKZWxzZSBpZih0eXBlb2YgYT09PSJzdHJpbmciJiYhQ2EudGVzdChhKSYmKGMuc3VwcG9ydC5sZWFkaW5nV2hpdGVzcGFjZXx8ISQudGVzdChhKSkmJiFQWyhCYS5leGVjKGEpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7YT1hLnJlcGxhY2UoQWEsIjwkMT48LyQyPiIpO3RyeXtmb3IodmFyIGI9MCxkPXRoaXMubGVuZ3RoO2I8ZDtiKyspaWYodGhpc1tiXS5ub2RlVHlwZT09PTEpe2MuY2xlYW5EYXRhKHRoaXNbYl0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSk7dGhpc1tiXS5pbm5lckhUTUw9YX19Y2F0Y2goZSl7dGhpcy5lbXB0eSgpLmFwcGVuZChhKX19ZWxzZSBjLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGYpe3ZhciBoPWModGhpcyk7aC5odG1sKGEuY2FsbCh0aGlzLGYsaC5odG1sKCkpKX0pOnRoaXMuZW1wdHkoKS5hcHBlbmQoYSk7cmV0dXJuIHRoaXN9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKGEpe2lmKHRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZSl7aWYoYy5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7dmFyIGQ9CmModGhpcyksZT1kLmh0bWwoKTtkLnJlcGxhY2VXaXRoKGEuY2FsbCh0aGlzLGIsZSkpfSk7aWYodHlwZW9mIGEhPT0ic3RyaW5nIilhPWMoYSkuZGV0YWNoKCk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPXRoaXMubmV4dFNpYmxpbmcsZD10aGlzLnBhcmVudE5vZGU7Yyh0aGlzKS5yZW1vdmUoKTtiP2MoYikuYmVmb3JlKGEpOmMoZCkuYXBwZW5kKGEpfSl9ZWxzZSByZXR1cm4gdGhpcy5wdXNoU3RhY2soYyhjLmlzRnVuY3Rpb24oYSk/YSgpOmEpLCJyZXBsYWNlV2l0aCIsYSl9LGRldGFjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZW1vdmUoYSx0cnVlKX0sZG9tTWFuaXA6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlLGYsaCxsPWFbMF0saz1bXTtpZighYy5zdXBwb3J0LmNoZWNrQ2xvbmUmJmFyZ3VtZW50cy5sZW5ndGg9PT0zJiZ0eXBlb2YgbD09PSJzdHJpbmciJiZEYS50ZXN0KGwpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtjKHRoaXMpLmRvbU1hbmlwKGEsCmIsZCx0cnVlKX0pO2lmKGMuaXNGdW5jdGlvbihsKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHgpe3ZhciByPWModGhpcyk7YVswXT1sLmNhbGwodGhpcyx4LGI/ci5odG1sKCk6Qik7ci5kb21NYW5pcChhLGIsZCl9KTtpZih0aGlzWzBdKXtlPWwmJmwucGFyZW50Tm9kZTtlPWMuc3VwcG9ydC5wYXJlbnROb2RlJiZlJiZlLm5vZGVUeXBlPT09MTEmJmUuY2hpbGROb2Rlcy5sZW5ndGg9PT10aGlzLmxlbmd0aD97ZnJhZ21lbnQ6ZX06Yy5idWlsZEZyYWdtZW50KGEsdGhpcyxrKTtoPWUuZnJhZ21lbnQ7aWYoZj1oLmNoaWxkTm9kZXMubGVuZ3RoPT09MT9oPWguZmlyc3RDaGlsZDpoLmZpcnN0Q2hpbGQpe2I9YiYmYy5ub2RlTmFtZShmLCJ0ciIpO2Y9MDtmb3IodmFyIG89dGhpcy5sZW5ndGg7ZjxvO2YrKylkLmNhbGwoYj9jLm5vZGVOYW1lKHRoaXNbZl0sInRhYmxlIik/dGhpc1tmXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKVswXXx8dGhpc1tmXS5hcHBlbmRDaGlsZCh0aGlzW2ZdLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGJvZHkiKSk6CnRoaXNbZl06dGhpc1tmXSxmPjB8fGUuY2FjaGVhYmxlfHx0aGlzLmxlbmd0aD4xP2guY2xvbmVOb2RlKHRydWUpOmgpfWsubGVuZ3RoJiZjLmVhY2goayxPYSl9cmV0dXJuIHRoaXN9fSk7Yy5idWlsZEZyYWdtZW50PWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmLGg7Yj1iJiZiWzBdP2JbMF0ub3duZXJEb2N1bWVudHx8YlswXTp0O2lmKGEubGVuZ3RoPT09MSYmdHlwZW9mIGFbMF09PT0ic3RyaW5nIiYmYVswXS5sZW5ndGg8NTEyJiZiPT09dCYmIUNhLnRlc3QoYVswXSkmJihjLnN1cHBvcnQuY2hlY2tDbG9uZXx8IURhLnRlc3QoYVswXSkpKXtmPXRydWU7aWYoaD1jLmZyYWdtZW50c1thWzBdXSlpZihoIT09MSllPWh9aWYoIWUpe2U9Yi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Yy5jbGVhbihhLGIsZSxkKX1pZihmKWMuZnJhZ21lbnRzW2FbMF1dPWg/ZToxO3JldHVybntmcmFnbWVudDplLGNhY2hlYWJsZTpmfX07Yy5mcmFnbWVudHM9e307Yy5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIiwKcHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGEsYil7Yy5mblthXT1mdW5jdGlvbihkKXt2YXIgZT1bXTtkPWMoZCk7dmFyIGY9dGhpcy5sZW5ndGg9PT0xJiZ0aGlzWzBdLnBhcmVudE5vZGU7aWYoZiYmZi5ub2RlVHlwZT09PTExJiZmLmNoaWxkTm9kZXMubGVuZ3RoPT09MSYmZC5sZW5ndGg9PT0xKXtkW2JdKHRoaXNbMF0pO3JldHVybiB0aGlzfWVsc2V7Zj0wO2Zvcih2YXIgaD1kLmxlbmd0aDtmPGg7ZisrKXt2YXIgbD0oZj4wP3RoaXMuY2xvbmUodHJ1ZSk6dGhpcykuZ2V0KCk7YyhkW2ZdKVtiXShsKTtlPWUuY29uY2F0KGwpfXJldHVybiB0aGlzLnB1c2hTdGFjayhlLGEsZC5zZWxlY3Rvcil9fX0pO2MuZXh0ZW5kKHtjbGVhbjpmdW5jdGlvbihhLGIsZCxlKXtiPWJ8fHQ7aWYodHlwZW9mIGIuY3JlYXRlRWxlbWVudD09PSJ1bmRlZmluZWQiKWI9Yi5vd25lckRvY3VtZW50fHwKYlswXSYmYlswXS5vd25lckRvY3VtZW50fHx0O2Zvcih2YXIgZj1bXSxoPTAsbDsobD1hW2hdKSE9bnVsbDtoKyspe2lmKHR5cGVvZiBsPT09Im51bWJlciIpbCs9IiI7aWYobCl7aWYodHlwZW9mIGw9PT0ic3RyaW5nIiYmIWViLnRlc3QobCkpbD1iLmNyZWF0ZVRleHROb2RlKGwpO2Vsc2UgaWYodHlwZW9mIGw9PT0ic3RyaW5nIil7bD1sLnJlcGxhY2UoQWEsIjwkMT48LyQyPiIpO3ZhciBrPShCYS5leGVjKGwpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLG89UFtrXXx8UC5fZGVmYXVsdCx4PW9bMF0scj1iLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2ZvcihyLmlubmVySFRNTD1vWzFdK2wrb1syXTt4LS07KXI9ci5sYXN0Q2hpbGQ7aWYoIWMuc3VwcG9ydC50Ym9keSl7eD1kYi50ZXN0KGwpO2s9az09PSJ0YWJsZSImJiF4P3IuZmlyc3RDaGlsZCYmci5maXJzdENoaWxkLmNoaWxkTm9kZXM6b1sxXT09PSI8dGFibGU+IiYmIXg/ci5jaGlsZE5vZGVzOltdO2ZvcihvPWsubGVuZ3RoLQoxO28+PTA7LS1vKWMubm9kZU5hbWUoa1tvXSwidGJvZHkiKSYmIWtbb10uY2hpbGROb2Rlcy5sZW5ndGgmJmtbb10ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChrW29dKX0hYy5zdXBwb3J0LmxlYWRpbmdXaGl0ZXNwYWNlJiYkLnRlc3QobCkmJnIuaW5zZXJ0QmVmb3JlKGIuY3JlYXRlVGV4dE5vZGUoJC5leGVjKGwpWzBdKSxyLmZpcnN0Q2hpbGQpO2w9ci5jaGlsZE5vZGVzfWlmKGwubm9kZVR5cGUpZi5wdXNoKGwpO2Vsc2UgZj1jLm1lcmdlKGYsbCl9fWlmKGQpZm9yKGg9MDtmW2hdO2grKylpZihlJiZjLm5vZGVOYW1lKGZbaF0sInNjcmlwdCIpJiYoIWZbaF0udHlwZXx8ZltoXS50eXBlLnRvTG93ZXJDYXNlKCk9PT0idGV4dC9qYXZhc2NyaXB0IikpZS5wdXNoKGZbaF0ucGFyZW50Tm9kZT9mW2hdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZltoXSk6ZltoXSk7ZWxzZXtmW2hdLm5vZGVUeXBlPT09MSYmZi5zcGxpY2UuYXBwbHkoZixbaCsxLDBdLmNvbmNhdChjLm1ha2VBcnJheShmW2hdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKSkpKTsKZC5hcHBlbmRDaGlsZChmW2hdKX1yZXR1cm4gZn0sY2xlYW5EYXRhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixkLGU9Yy5jYWNoZSxmPWMuZXZlbnQuc3BlY2lhbCxoPWMuc3VwcG9ydC5kZWxldGVFeHBhbmRvLGw9MCxrOyhrPWFbbF0pIT1udWxsO2wrKylpZighKGsubm9kZU5hbWUmJmMubm9EYXRhW2subm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pKWlmKGQ9a1tjLmV4cGFuZG9dKXtpZigoYj1lW2RdKSYmYi5ldmVudHMpZm9yKHZhciBvIGluIGIuZXZlbnRzKWZbb10/Yy5ldmVudC5yZW1vdmUoayxvKTpjLnJlbW92ZUV2ZW50KGssbyxiLmhhbmRsZSk7aWYoaClkZWxldGUga1tjLmV4cGFuZG9dO2Vsc2Ugay5yZW1vdmVBdHRyaWJ1dGUmJmsucmVtb3ZlQXR0cmlidXRlKGMuZXhwYW5kbyk7ZGVsZXRlIGVbZF19fX0pO3ZhciBFYT0vYWxwaGFcKFteKV0qXCkvaSxnYj0vb3BhY2l0eT0oW14pXSopLyxoYj0vLShbYS16XSkvaWcsaWI9LyhbQS1aXSkvZyxGYT0vXi0/XGQrKD86cHgpPyQvaSwKamI9L14tP1xkLyxrYj17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sUGE9WyJMZWZ0IiwiUmlnaHQiXSxRYT1bIlRvcCIsIkJvdHRvbSJdLFcsR2EsYWEsbGI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTtjLmZuLmNzcz1mdW5jdGlvbihhLGIpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0yJiZiPT09QilyZXR1cm4gdGhpcztyZXR1cm4gYy5hY2Nlc3ModGhpcyxhLGIsdHJ1ZSxmdW5jdGlvbihkLGUsZil7cmV0dXJuIGYhPT1CP2Muc3R5bGUoZCxlLGYpOmMuY3NzKGQsZSl9KX07Yy5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgZD1XKGEsIm9wYWNpdHkiLCJvcGFjaXR5Iik7cmV0dXJuIGQ9PT0iIj8iMSI6ZH1lbHNlIHJldHVybiBhLnN0eWxlLm9wYWNpdHl9fX0sY3NzTnVtYmVyOnt6SW5kZXg6dHJ1ZSxmb250V2VpZ2h0OnRydWUsb3BhY2l0eTp0cnVlLAp6b29tOnRydWUsbGluZUhlaWdodDp0cnVlfSxjc3NQcm9wczp7ImZsb2F0IjpjLnN1cHBvcnQuY3NzRmxvYXQ/ImNzc0Zsb2F0Ijoic3R5bGVGbG9hdCJ9LHN0eWxlOmZ1bmN0aW9uKGEsYixkLGUpe2lmKCEoIWF8fGEubm9kZVR5cGU9PT0zfHxhLm5vZGVUeXBlPT09OHx8IWEuc3R5bGUpKXt2YXIgZixoPWMuY2FtZWxDYXNlKGIpLGw9YS5zdHlsZSxrPWMuY3NzSG9va3NbaF07Yj1jLmNzc1Byb3BzW2hdfHxoO2lmKGQhPT1CKXtpZighKHR5cGVvZiBkPT09Im51bWJlciImJmlzTmFOKGQpfHxkPT1udWxsKSl7aWYodHlwZW9mIGQ9PT0ibnVtYmVyIiYmIWMuY3NzTnVtYmVyW2hdKWQrPSJweCI7aWYoIWt8fCEoInNldCJpbiBrKXx8KGQ9ay5zZXQoYSxkKSkhPT1CKXRyeXtsW2JdPWR9Y2F0Y2gobyl7fX19ZWxzZXtpZihrJiYiZ2V0ImluIGsmJihmPWsuZ2V0KGEsZmFsc2UsZSkpIT09QilyZXR1cm4gZjtyZXR1cm4gbFtiXX19fSxjc3M6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlLGY9Yy5jYW1lbENhc2UoYiksCmg9Yy5jc3NIb29rc1tmXTtiPWMuY3NzUHJvcHNbZl18fGY7aWYoaCYmImdldCJpbiBoJiYoZT1oLmdldChhLHRydWUsZCkpIT09QilyZXR1cm4gZTtlbHNlIGlmKFcpcmV0dXJuIFcoYSxiLGYpfSxzd2FwOmZ1bmN0aW9uKGEsYixkKXt2YXIgZT17fSxmO2ZvcihmIGluIGIpe2VbZl09YS5zdHlsZVtmXTthLnN0eWxlW2ZdPWJbZl19ZC5jYWxsKGEpO2ZvcihmIGluIGIpYS5zdHlsZVtmXT1lW2ZdfSxjYW1lbENhc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShoYixsYil9fSk7Yy5jdXJDU1M9Yy5jc3M7Yy5lYWNoKFsiaGVpZ2h0Iiwid2lkdGgiXSxmdW5jdGlvbihhLGIpe2MuY3NzSG9va3NbYl09e2dldDpmdW5jdGlvbihkLGUsZil7dmFyIGg7aWYoZSl7aWYoZC5vZmZzZXRXaWR0aCE9PTApaD1vYShkLGIsZik7ZWxzZSBjLnN3YXAoZCxrYixmdW5jdGlvbigpe2g9b2EoZCxiLGYpfSk7aWYoaDw9MCl7aD1XKGQsYixiKTtpZihoPT09IjBweCImJmFhKWg9YWEoZCxiLGIpOwppZihoIT1udWxsKXJldHVybiBoPT09IiJ8fGg9PT0iYXV0byI/IjBweCI6aH1pZihoPDB8fGg9PW51bGwpe2g9ZC5zdHlsZVtiXTtyZXR1cm4gaD09PSIifHxoPT09ImF1dG8iPyIwcHgiOmh9cmV0dXJuIHR5cGVvZiBoPT09InN0cmluZyI/aDpoKyJweCJ9fSxzZXQ6ZnVuY3Rpb24oZCxlKXtpZihGYS50ZXN0KGUpKXtlPXBhcnNlRmxvYXQoZSk7aWYoZT49MClyZXR1cm4gZSsicHgifWVsc2UgcmV0dXJuIGV9fX0pO2lmKCFjLnN1cHBvcnQub3BhY2l0eSljLmNzc0hvb2tzLm9wYWNpdHk9e2dldDpmdW5jdGlvbihhLGIpe3JldHVybiBnYi50ZXN0KChiJiZhLmN1cnJlbnRTdHlsZT9hLmN1cnJlbnRTdHlsZS5maWx0ZXI6YS5zdHlsZS5maWx0ZXIpfHwiIik/cGFyc2VGbG9hdChSZWdFeHAuJDEpLzEwMCsiIjpiPyIxIjoiIn0sc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGQ9YS5zdHlsZTtkLnpvb209MTt2YXIgZT1jLmlzTmFOKGIpPyIiOiJhbHBoYShvcGFjaXR5PSIrYioxMDArIikiLGY9CmQuZmlsdGVyfHwiIjtkLmZpbHRlcj1FYS50ZXN0KGYpP2YucmVwbGFjZShFYSxlKTpkLmZpbHRlcisiICIrZX19O2lmKHQuZGVmYXVsdFZpZXcmJnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSlHYT1mdW5jdGlvbihhLGIsZCl7dmFyIGU7ZD1kLnJlcGxhY2UoaWIsIi0kMSIpLnRvTG93ZXJDYXNlKCk7aWYoIShiPWEub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldykpcmV0dXJuIEI7aWYoYj1iLmdldENvbXB1dGVkU3R5bGUoYSxudWxsKSl7ZT1iLmdldFByb3BlcnR5VmFsdWUoZCk7aWYoZT09PSIiJiYhYy5jb250YWlucyhhLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGEpKWU9Yy5zdHlsZShhLGQpfXJldHVybiBlfTtpZih0LmRvY3VtZW50RWxlbWVudC5jdXJyZW50U3R5bGUpYWE9ZnVuY3Rpb24oYSxiKXt2YXIgZCxlLGY9YS5jdXJyZW50U3R5bGUmJmEuY3VycmVudFN0eWxlW2JdLGg9YS5zdHlsZTtpZighRmEudGVzdChmKSYmamIudGVzdChmKSl7ZD1oLmxlZnQ7CmU9YS5ydW50aW1lU3R5bGUubGVmdDthLnJ1bnRpbWVTdHlsZS5sZWZ0PWEuY3VycmVudFN0eWxlLmxlZnQ7aC5sZWZ0PWI9PT0iZm9udFNpemUiPyIxZW0iOmZ8fDA7Zj1oLnBpeGVsTGVmdCsicHgiO2gubGVmdD1kO2EucnVudGltZVN0eWxlLmxlZnQ9ZX1yZXR1cm4gZj09PSIiPyJhdXRvIjpmfTtXPUdhfHxhYTtpZihjLmV4cHImJmMuZXhwci5maWx0ZXJzKXtjLmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oYSl7dmFyIGI9YS5vZmZzZXRIZWlnaHQ7cmV0dXJuIGEub2Zmc2V0V2lkdGg9PT0wJiZiPT09MHx8IWMuc3VwcG9ydC5yZWxpYWJsZUhpZGRlbk9mZnNldHMmJihhLnN0eWxlLmRpc3BsYXl8fGMuY3NzKGEsImRpc3BsYXkiKSk9PT0ibm9uZSJ9O2MuZXhwci5maWx0ZXJzLnZpc2libGU9ZnVuY3Rpb24oYSl7cmV0dXJuIWMuZXhwci5maWx0ZXJzLmhpZGRlbihhKX19dmFyIG1iPWMubm93KCksbmI9LzxzY3JpcHRcYltePF0qKD86KD8hPFwvc2NyaXB0Pik8W148XSopKjxcL3NjcmlwdD4vZ2ksCm9iPS9eKD86c2VsZWN0fHRleHRhcmVhKS9pLHBiPS9eKD86Y29sb3J8ZGF0ZXxkYXRldGltZXxlbWFpbHxoaWRkZW58bW9udGh8bnVtYmVyfHBhc3N3b3JkfHJhbmdlfHNlYXJjaHx0ZWx8dGV4dHx0aW1lfHVybHx3ZWVrKSQvaSxxYj0vXig/OkdFVHxIRUFEKSQvLFJhPS9cW1xdJC8sVD0vXD1cPygmfCQpLyxqYT0vXD8vLHJiPS8oWz8mXSlfPVteJl0qLyxzYj0vXihcdys6KT9cL1wvKFteXC8/I10rKS8sdGI9LyUyMC9nLHViPS8jLiokLyxIYT1jLmZuLmxvYWQ7Yy5mbi5leHRlbmQoe2xvYWQ6ZnVuY3Rpb24oYSxiLGQpe2lmKHR5cGVvZiBhIT09InN0cmluZyImJkhhKXJldHVybiBIYS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZWxzZSBpZighdGhpcy5sZW5ndGgpcmV0dXJuIHRoaXM7dmFyIGU9YS5pbmRleE9mKCIgIik7aWYoZT49MCl7dmFyIGY9YS5zbGljZShlLGEubGVuZ3RoKTthPWEuc2xpY2UoMCxlKX1lPSJHRVQiO2lmKGIpaWYoYy5pc0Z1bmN0aW9uKGIpKXtkPWI7Yj1udWxsfWVsc2UgaWYodHlwZW9mIGI9PT0KIm9iamVjdCIpe2I9Yy5wYXJhbShiLGMuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsKTtlPSJQT1NUIn12YXIgaD10aGlzO2MuYWpheCh7dXJsOmEsdHlwZTplLGRhdGFUeXBlOiJodG1sIixkYXRhOmIsY29tcGxldGU6ZnVuY3Rpb24obCxrKXtpZihrPT09InN1Y2Nlc3MifHxrPT09Im5vdG1vZGlmaWVkIiloLmh0bWwoZj9jKCI8ZGl2PiIpLmFwcGVuZChsLnJlc3BvbnNlVGV4dC5yZXBsYWNlKG5iLCIiKSkuZmluZChmKTpsLnJlc3BvbnNlVGV4dCk7ZCYmaC5lYWNoKGQsW2wucmVzcG9uc2VUZXh0LGssbF0pfX0pO3JldHVybiB0aGlzfSxzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gYy5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnRzP2MubWFrZUFycmF5KHRoaXMuZWxlbWVudHMpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lJiYKIXRoaXMuZGlzYWJsZWQmJih0aGlzLmNoZWNrZWR8fG9iLnRlc3QodGhpcy5ub2RlTmFtZSl8fHBiLnRlc3QodGhpcy50eXBlKSl9KS5tYXAoZnVuY3Rpb24oYSxiKXt2YXIgZD1jKHRoaXMpLnZhbCgpO3JldHVybiBkPT1udWxsP251bGw6Yy5pc0FycmF5KGQpP2MubWFwKGQsZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmV9fSk6e25hbWU6Yi5uYW1lLHZhbHVlOmR9fSkuZ2V0KCl9fSk7Yy5lYWNoKCJhamF4U3RhcnQgYWpheFN0b3AgYWpheENvbXBsZXRlIGFqYXhFcnJvciBhamF4U3VjY2VzcyBhamF4U2VuZCIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe2MuZm5bYl09ZnVuY3Rpb24oZCl7cmV0dXJuIHRoaXMuYmluZChiLGQpfX0pO2MuZXh0ZW5kKHtnZXQ6ZnVuY3Rpb24oYSxiLGQsZSl7aWYoYy5pc0Z1bmN0aW9uKGIpKXtlPWV8fGQ7ZD1iO2I9bnVsbH1yZXR1cm4gYy5hamF4KHt0eXBlOiJHRVQiLHVybDphLGRhdGE6YixzdWNjZXNzOmQsZGF0YVR5cGU6ZX0pfSwKZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGMuZ2V0KGEsbnVsbCxiLCJzY3JpcHQiKX0sZ2V0SlNPTjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGMuZ2V0KGEsYixkLCJqc29uIil9LHBvc3Q6ZnVuY3Rpb24oYSxiLGQsZSl7aWYoYy5pc0Z1bmN0aW9uKGIpKXtlPWV8fGQ7ZD1iO2I9e319cmV0dXJuIGMuYWpheCh7dHlwZToiUE9TVCIsdXJsOmEsZGF0YTpiLHN1Y2Nlc3M6ZCxkYXRhVHlwZTplfSl9LGFqYXhTZXR1cDpmdW5jdGlvbihhKXtjLmV4dGVuZChjLmFqYXhTZXR0aW5ncyxhKX0sYWpheFNldHRpbmdzOnt1cmw6bG9jYXRpb24uaHJlZixnbG9iYWw6dHJ1ZSx0eXBlOiJHRVQiLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLHByb2Nlc3NEYXRhOnRydWUsYXN5bmM6dHJ1ZSx4aHI6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEUuWE1MSHR0cFJlcXVlc3R9LGFjY2VwdHM6e3htbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsaHRtbDoidGV4dC9odG1sIiwKc2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCIsdGV4dDoidGV4dC9wbGFpbiIsX2RlZmF1bHQ6IiovKiJ9fSxhamF4OmZ1bmN0aW9uKGEpe3ZhciBiPWMuZXh0ZW5kKHRydWUse30sYy5hamF4U2V0dGluZ3MsYSksZCxlLGYsaD1iLnR5cGUudG9VcHBlckNhc2UoKSxsPXFiLnRlc3QoaCk7Yi51cmw9Yi51cmwucmVwbGFjZSh1YiwiIik7Yi5jb250ZXh0PWEmJmEuY29udGV4dCE9bnVsbD9hLmNvbnRleHQ6YjtpZihiLmRhdGEmJmIucHJvY2Vzc0RhdGEmJnR5cGVvZiBiLmRhdGEhPT0ic3RyaW5nIiliLmRhdGE9Yy5wYXJhbShiLmRhdGEsYi50cmFkaXRpb25hbCk7aWYoYi5kYXRhVHlwZT09PSJqc29ucCIpe2lmKGg9PT0iR0VUIilULnRlc3QoYi51cmwpfHwoYi51cmwrPShqYS50ZXN0KGIudXJsKT8iJiI6Ij8iKSsoYi5qc29ucHx8ImNhbGxiYWNrIikrIj0/Iik7ZWxzZSBpZighYi5kYXRhfHwKIVQudGVzdChiLmRhdGEpKWIuZGF0YT0oYi5kYXRhP2IuZGF0YSsiJiI6IiIpKyhiLmpzb25wfHwiY2FsbGJhY2siKSsiPT8iO2IuZGF0YVR5cGU9Impzb24ifWlmKGIuZGF0YVR5cGU9PT0ianNvbiImJihiLmRhdGEmJlQudGVzdChiLmRhdGEpfHxULnRlc3QoYi51cmwpKSl7ZD1iLmpzb25wQ2FsbGJhY2t8fCJqc29ucCIrbWIrKztpZihiLmRhdGEpYi5kYXRhPShiLmRhdGErIiIpLnJlcGxhY2UoVCwiPSIrZCsiJDEiKTtiLnVybD1iLnVybC5yZXBsYWNlKFQsIj0iK2QrIiQxIik7Yi5kYXRhVHlwZT0ic2NyaXB0Ijt2YXIgaz1FW2RdO0VbZF09ZnVuY3Rpb24obSl7aWYoYy5pc0Z1bmN0aW9uKGspKWsobSk7ZWxzZXtFW2RdPUI7dHJ5e2RlbGV0ZSBFW2RdfWNhdGNoKHApe319Zj1tO2MuaGFuZGxlU3VjY2VzcyhiLHcsZSxmKTtjLmhhbmRsZUNvbXBsZXRlKGIsdyxlLGYpO3ImJnIucmVtb3ZlQ2hpbGQoQSl9fWlmKGIuZGF0YVR5cGU9PT0ic2NyaXB0IiYmYi5jYWNoZT09PW51bGwpYi5jYWNoZT0KZmFsc2U7aWYoYi5jYWNoZT09PWZhbHNlJiZsKXt2YXIgbz1jLm5vdygpLHg9Yi51cmwucmVwbGFjZShyYiwiJDFfPSIrbyk7Yi51cmw9eCsoeD09PWIudXJsPyhqYS50ZXN0KGIudXJsKT8iJiI6Ij8iKSsiXz0iK286IiIpfWlmKGIuZGF0YSYmbCliLnVybCs9KGphLnRlc3QoYi51cmwpPyImIjoiPyIpK2IuZGF0YTtiLmdsb2JhbCYmYy5hY3RpdmUrKz09PTAmJmMuZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0Iik7bz0obz1zYi5leGVjKGIudXJsKSkmJihvWzFdJiZvWzFdLnRvTG93ZXJDYXNlKCkhPT1sb2NhdGlvbi5wcm90b2NvbHx8b1syXS50b0xvd2VyQ2FzZSgpIT09bG9jYXRpb24uaG9zdCk7aWYoYi5kYXRhVHlwZT09PSJzY3JpcHQiJiZoPT09IkdFVCImJm8pe3ZhciByPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXXx8dC5kb2N1bWVudEVsZW1lbnQsQT10LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2lmKGIuc2NyaXB0Q2hhcnNldClBLmNoYXJzZXQ9Yi5zY3JpcHRDaGFyc2V0OwpBLnNyYz1iLnVybDtpZighZCl7dmFyIEM9ZmFsc2U7QS5vbmxvYWQ9QS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZighQyYmKCF0aGlzLnJlYWR5U3RhdGV8fHRoaXMucmVhZHlTdGF0ZT09PSJsb2FkZWQifHx0aGlzLnJlYWR5U3RhdGU9PT0iY29tcGxldGUiKSl7Qz10cnVlO2MuaGFuZGxlU3VjY2VzcyhiLHcsZSxmKTtjLmhhbmRsZUNvbXBsZXRlKGIsdyxlLGYpO0Eub25sb2FkPUEub25yZWFkeXN0YXRlY2hhbmdlPW51bGw7ciYmQS5wYXJlbnROb2RlJiZyLnJlbW92ZUNoaWxkKEEpfX19ci5pbnNlcnRCZWZvcmUoQSxyLmZpcnN0Q2hpbGQpO3JldHVybiBCfXZhciBKPWZhbHNlLHc9Yi54aHIoKTtpZih3KXtiLnVzZXJuYW1lP3cub3BlbihoLGIudXJsLGIuYXN5bmMsYi51c2VybmFtZSxiLnBhc3N3b3JkKTp3Lm9wZW4oaCxiLnVybCxiLmFzeW5jKTt0cnl7aWYoYi5kYXRhIT1udWxsJiYhbHx8YSYmYS5jb250ZW50VHlwZSl3LnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsCmIuY29udGVudFR5cGUpO2lmKGIuaWZNb2RpZmllZCl7Yy5sYXN0TW9kaWZpZWRbYi51cmxdJiZ3LnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIixjLmxhc3RNb2RpZmllZFtiLnVybF0pO2MuZXRhZ1tiLnVybF0mJncuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsYy5ldGFnW2IudXJsXSl9b3x8dy5zZXRSZXF1ZXN0SGVhZGVyKCJYLVJlcXVlc3RlZC1XaXRoIiwiWE1MSHR0cFJlcXVlc3QiKTt3LnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsYi5kYXRhVHlwZSYmYi5hY2NlcHRzW2IuZGF0YVR5cGVdP2IuYWNjZXB0c1tiLmRhdGFUeXBlXSsiLCAqLyo7IHE9MC4wMSI6Yi5hY2NlcHRzLl9kZWZhdWx0KX1jYXRjaChJKXt9aWYoYi5iZWZvcmVTZW5kJiZiLmJlZm9yZVNlbmQuY2FsbChiLmNvbnRleHQsdyxiKT09PWZhbHNlKXtiLmdsb2JhbCYmYy5hY3RpdmUtLT09PTEmJmMuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKTt3LmFib3J0KCk7cmV0dXJuIGZhbHNlfWIuZ2xvYmFsJiYKYy50cmlnZ2VyR2xvYmFsKGIsImFqYXhTZW5kIixbdyxiXSk7dmFyIEw9dy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24obSl7aWYoIXd8fHcucmVhZHlTdGF0ZT09PTB8fG09PT0iYWJvcnQiKXtKfHxjLmhhbmRsZUNvbXBsZXRlKGIsdyxlLGYpO0o9dHJ1ZTtpZih3KXcub25yZWFkeXN0YXRlY2hhbmdlPWMubm9vcH1lbHNlIGlmKCFKJiZ3JiYody5yZWFkeVN0YXRlPT09NHx8bT09PSJ0aW1lb3V0Iikpe0o9dHJ1ZTt3Lm9ucmVhZHlzdGF0ZWNoYW5nZT1jLm5vb3A7ZT1tPT09InRpbWVvdXQiPyJ0aW1lb3V0IjohYy5odHRwU3VjY2Vzcyh3KT8iZXJyb3IiOmIuaWZNb2RpZmllZCYmYy5odHRwTm90TW9kaWZpZWQodyxiLnVybCk/Im5vdG1vZGlmaWVkIjoic3VjY2VzcyI7dmFyIHA7aWYoZT09PSJzdWNjZXNzIil0cnl7Zj1jLmh0dHBEYXRhKHcsYi5kYXRhVHlwZSxiKX1jYXRjaChxKXtlPSJwYXJzZXJlcnJvciI7cD1xfWlmKGU9PT0ic3VjY2VzcyJ8fGU9PT0ibm90bW9kaWZpZWQiKWR8fApjLmhhbmRsZVN1Y2Nlc3MoYix3LGUsZik7ZWxzZSBjLmhhbmRsZUVycm9yKGIsdyxlLHApO2R8fGMuaGFuZGxlQ29tcGxldGUoYix3LGUsZik7bT09PSJ0aW1lb3V0IiYmdy5hYm9ydCgpO2lmKGIuYXN5bmMpdz1udWxsfX07dHJ5e3ZhciBnPXcuYWJvcnQ7dy5hYm9ydD1mdW5jdGlvbigpe3cmJkZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsLmNhbGwoZyx3KTtMKCJhYm9ydCIpfX1jYXRjaChpKXt9Yi5hc3luYyYmYi50aW1lb3V0PjAmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt3JiYhSiYmTCgidGltZW91dCIpfSxiLnRpbWVvdXQpO3RyeXt3LnNlbmQobHx8Yi5kYXRhPT1udWxsP251bGw6Yi5kYXRhKX1jYXRjaChuKXtjLmhhbmRsZUVycm9yKGIsdyxudWxsLG4pO2MuaGFuZGxlQ29tcGxldGUoYix3LGUsZil9Yi5hc3luY3x8TCgpO3JldHVybiB3fX0scGFyYW06ZnVuY3Rpb24oYSxiKXt2YXIgZD1bXSxlPWZ1bmN0aW9uKGgsbCl7bD1jLmlzRnVuY3Rpb24obCk/bCgpOmw7ZFtkLmxlbmd0aF09CmVuY29kZVVSSUNvbXBvbmVudChoKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGwpfTtpZihiPT09QiliPWMuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsO2lmKGMuaXNBcnJheShhKXx8YS5qcXVlcnkpYy5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKHZhciBmIGluIGEpZGEoZixhW2ZdLGIsZSk7cmV0dXJuIGQuam9pbigiJiIpLnJlcGxhY2UodGIsIisiKX19KTtjLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30saGFuZGxlRXJyb3I6ZnVuY3Rpb24oYSxiLGQsZSl7YS5lcnJvciYmYS5lcnJvci5jYWxsKGEuY29udGV4dCxiLGQsZSk7YS5nbG9iYWwmJmMudHJpZ2dlckdsb2JhbChhLCJhamF4RXJyb3IiLFtiLGEsZV0pfSxoYW5kbGVTdWNjZXNzOmZ1bmN0aW9uKGEsYixkLGUpe2Euc3VjY2VzcyYmYS5zdWNjZXNzLmNhbGwoYS5jb250ZXh0LGUsZCxiKTthLmdsb2JhbCYmYy50cmlnZ2VyR2xvYmFsKGEsImFqYXhTdWNjZXNzIiwKW2IsYV0pfSxoYW5kbGVDb21wbGV0ZTpmdW5jdGlvbihhLGIsZCl7YS5jb21wbGV0ZSYmYS5jb21wbGV0ZS5jYWxsKGEuY29udGV4dCxiLGQpO2EuZ2xvYmFsJiZjLnRyaWdnZXJHbG9iYWwoYSwiYWpheENvbXBsZXRlIixbYixhXSk7YS5nbG9iYWwmJmMuYWN0aXZlLS09PT0xJiZjLmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIil9LHRyaWdnZXJHbG9iYWw6ZnVuY3Rpb24oYSxiLGQpeyhhLmNvbnRleHQmJmEuY29udGV4dC51cmw9PW51bGw/YyhhLmNvbnRleHQpOmMuZXZlbnQpLnRyaWdnZXIoYixkKX0saHR0cFN1Y2Nlc3M6ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiFhLnN0YXR1cyYmbG9jYXRpb24ucHJvdG9jb2w9PT0iZmlsZToifHxhLnN0YXR1cz49MjAwJiZhLnN0YXR1czwzMDB8fGEuc3RhdHVzPT09MzA0fHxhLnN0YXR1cz09PTEyMjN9Y2F0Y2goYil7fXJldHVybiBmYWxzZX0saHR0cE5vdE1vZGlmaWVkOmZ1bmN0aW9uKGEsYil7dmFyIGQ9YS5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLAplPWEuZ2V0UmVzcG9uc2VIZWFkZXIoIkV0YWciKTtpZihkKWMubGFzdE1vZGlmaWVkW2JdPWQ7aWYoZSljLmV0YWdbYl09ZTtyZXR1cm4gYS5zdGF0dXM9PT0zMDR9LGh0dHBEYXRhOmZ1bmN0aW9uKGEsYixkKXt2YXIgZT1hLmdldFJlc3BvbnNlSGVhZGVyKCJjb250ZW50LXR5cGUiKXx8IiIsZj1iPT09InhtbCJ8fCFiJiZlLmluZGV4T2YoInhtbCIpPj0wO2E9Zj9hLnJlc3BvbnNlWE1MOmEucmVzcG9uc2VUZXh0O2YmJmEuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lPT09InBhcnNlcmVycm9yIiYmYy5lcnJvcigicGFyc2VyZXJyb3IiKTtpZihkJiZkLmRhdGFGaWx0ZXIpYT1kLmRhdGFGaWx0ZXIoYSxiKTtpZih0eXBlb2YgYT09PSJzdHJpbmciKWlmKGI9PT0ianNvbiJ8fCFiJiZlLmluZGV4T2YoImpzb24iKT49MClhPWMucGFyc2VKU09OKGEpO2Vsc2UgaWYoYj09PSJzY3JpcHQifHwhYiYmZS5pbmRleE9mKCJqYXZhc2NyaXB0Iik+PTApYy5nbG9iYWxFdmFsKGEpO3JldHVybiBhfX0pOwppZihFLkFjdGl2ZVhPYmplY3QpYy5hamF4U2V0dGluZ3MueGhyPWZ1bmN0aW9uKCl7aWYoRS5sb2NhdGlvbi5wcm90b2NvbCE9PSJmaWxlOiIpdHJ5e3JldHVybiBuZXcgRS5YTUxIdHRwUmVxdWVzdH1jYXRjaChhKXt9dHJ5e3JldHVybiBuZXcgRS5BY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MSFRUUCIpfWNhdGNoKGIpe319O2Muc3VwcG9ydC5hamF4PSEhYy5hamF4U2V0dGluZ3MueGhyKCk7dmFyIGVhPXt9LHZiPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyx3Yj0vXihbK1wtXT0pPyhbXGQrLlwtXSspKC4qKSQvLGJhLHBhPVtbImhlaWdodCIsIm1hcmdpblRvcCIsIm1hcmdpbkJvdHRvbSIsInBhZGRpbmdUb3AiLCJwYWRkaW5nQm90dG9tIl0sWyJ3aWR0aCIsIm1hcmdpbkxlZnQiLCJtYXJnaW5SaWdodCIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0Il0sWyJvcGFjaXR5Il1dO2MuZm4uZXh0ZW5kKHtzaG93OmZ1bmN0aW9uKGEsYixkKXtpZihhfHxhPT09MClyZXR1cm4gdGhpcy5hbmltYXRlKFMoInNob3ciLAozKSxhLGIsZCk7ZWxzZXtkPTA7Zm9yKHZhciBlPXRoaXMubGVuZ3RoO2Q8ZTtkKyspe2E9dGhpc1tkXTtiPWEuc3R5bGUuZGlzcGxheTtpZighYy5kYXRhKGEsIm9sZGRpc3BsYXkiKSYmYj09PSJub25lIiliPWEuc3R5bGUuZGlzcGxheT0iIjtiPT09IiImJmMuY3NzKGEsImRpc3BsYXkiKT09PSJub25lIiYmYy5kYXRhKGEsIm9sZGRpc3BsYXkiLHFhKGEubm9kZU5hbWUpKX1mb3IoZD0wO2Q8ZTtkKyspe2E9dGhpc1tkXTtiPWEuc3R5bGUuZGlzcGxheTtpZihiPT09IiJ8fGI9PT0ibm9uZSIpYS5zdHlsZS5kaXNwbGF5PWMuZGF0YShhLCJvbGRkaXNwbGF5Iil8fCIifXJldHVybiB0aGlzfX0saGlkZTpmdW5jdGlvbihhLGIsZCl7aWYoYXx8YT09PTApcmV0dXJuIHRoaXMuYW5pbWF0ZShTKCJoaWRlIiwzKSxhLGIsZCk7ZWxzZXthPTA7Zm9yKGI9dGhpcy5sZW5ndGg7YTxiO2ErKyl7ZD1jLmNzcyh0aGlzW2FdLCJkaXNwbGF5Iik7ZCE9PSJub25lIiYmYy5kYXRhKHRoaXNbYV0sIm9sZGRpc3BsYXkiLApkKX1mb3IoYT0wO2E8YjthKyspdGhpc1thXS5zdHlsZS5kaXNwbGF5PSJub25lIjtyZXR1cm4gdGhpc319LF90b2dnbGU6Yy5mbi50b2dnbGUsdG9nZ2xlOmZ1bmN0aW9uKGEsYixkKXt2YXIgZT10eXBlb2YgYT09PSJib29sZWFuIjtpZihjLmlzRnVuY3Rpb24oYSkmJmMuaXNGdW5jdGlvbihiKSl0aGlzLl90b2dnbGUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2Vsc2UgYT09bnVsbHx8ZT90aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZj1lP2E6Yyh0aGlzKS5pcygiOmhpZGRlbiIpO2ModGhpcylbZj8ic2hvdyI6ImhpZGUiXSgpfSk6dGhpcy5hbmltYXRlKFMoInRvZ2dsZSIsMyksYSxiLGQpO3JldHVybiB0aGlzfSxmYWRlVG86ZnVuY3Rpb24oYSxiLGQsZSl7cmV0dXJuIHRoaXMuZmlsdGVyKCI6aGlkZGVuIikuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTpifSxhLGQsZSl9LGFuaW1hdGU6ZnVuY3Rpb24oYSxiLGQsZSl7dmFyIGY9Yy5zcGVlZChiLApkLGUpO2lmKGMuaXNFbXB0eU9iamVjdChhKSlyZXR1cm4gdGhpcy5lYWNoKGYuY29tcGxldGUpO3JldHVybiB0aGlzW2YucXVldWU9PT1mYWxzZT8iZWFjaCI6InF1ZXVlIl0oZnVuY3Rpb24oKXt2YXIgaD1jLmV4dGVuZCh7fSxmKSxsLGs9dGhpcy5ub2RlVHlwZT09PTEsbz1rJiZjKHRoaXMpLmlzKCI6aGlkZGVuIikseD10aGlzO2ZvcihsIGluIGEpe3ZhciByPWMuY2FtZWxDYXNlKGwpO2lmKGwhPT1yKXthW3JdPWFbbF07ZGVsZXRlIGFbbF07bD1yfWlmKGFbbF09PT0iaGlkZSImJm98fGFbbF09PT0ic2hvdyImJiFvKXJldHVybiBoLmNvbXBsZXRlLmNhbGwodGhpcyk7aWYoayYmKGw9PT0iaGVpZ2h0Inx8bD09PSJ3aWR0aCIpKXtoLm92ZXJmbG93PVt0aGlzLnN0eWxlLm92ZXJmbG93LHRoaXMuc3R5bGUub3ZlcmZsb3dYLHRoaXMuc3R5bGUub3ZlcmZsb3dZXTtpZihjLmNzcyh0aGlzLCJkaXNwbGF5Iik9PT0iaW5saW5lIiYmYy5jc3ModGhpcywiZmxvYXQiKT09PSJub25lIilpZihjLnN1cHBvcnQuaW5saW5lQmxvY2tOZWVkc0xheW91dClpZihxYSh0aGlzLm5vZGVOYW1lKT09PQoiaW5saW5lIil0aGlzLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayI7ZWxzZXt0aGlzLnN0eWxlLmRpc3BsYXk9ImlubGluZSI7dGhpcy5zdHlsZS56b29tPTF9ZWxzZSB0aGlzLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayJ9aWYoYy5pc0FycmF5KGFbbF0pKXsoaC5zcGVjaWFsRWFzaW5nPWguc3BlY2lhbEVhc2luZ3x8e30pW2xdPWFbbF1bMV07YVtsXT1hW2xdWzBdfX1pZihoLm92ZXJmbG93IT1udWxsKXRoaXMuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiI7aC5jdXJBbmltPWMuZXh0ZW5kKHt9LGEpO2MuZWFjaChhLGZ1bmN0aW9uKEEsQyl7dmFyIEo9bmV3IGMuZngoeCxoLEEpO2lmKHZiLnRlc3QoQykpSltDPT09InRvZ2dsZSI/bz8ic2hvdyI6ImhpZGUiOkNdKGEpO2Vsc2V7dmFyIHc9d2IuZXhlYyhDKSxJPUouY3VyKCl8fDA7aWYodyl7dmFyIEw9cGFyc2VGbG9hdCh3WzJdKSxnPXdbM118fCJweCI7aWYoZyE9PSJweCIpe2Muc3R5bGUoeCxBLChMfHwxKStnKTtJPShMfHwKMSkvSi5jdXIoKSpJO2Muc3R5bGUoeCxBLEkrZyl9aWYod1sxXSlMPSh3WzFdPT09Ii09Ij8tMToxKSpMK0k7Si5jdXN0b20oSSxMLGcpfWVsc2UgSi5jdXN0b20oSSxDLCIiKX19KTtyZXR1cm4gdHJ1ZX0pfSxzdG9wOmZ1bmN0aW9uKGEsYil7dmFyIGQ9Yy50aW1lcnM7YSYmdGhpcy5xdWV1ZShbXSk7dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPWQubGVuZ3RoLTE7ZT49MDtlLS0paWYoZFtlXS5lbGVtPT09dGhpcyl7YiYmZFtlXSh0cnVlKTtkLnNwbGljZShlLDEpfX0pO2J8fHRoaXMuZGVxdWV1ZSgpO3JldHVybiB0aGlzfX0pO2MuZWFjaCh7c2xpZGVEb3duOlMoInNob3ciLDEpLHNsaWRlVXA6UygiaGlkZSIsMSksc2xpZGVUb2dnbGU6UygidG9nZ2xlIiwxKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGEsYil7Yy5mblthXT1mdW5jdGlvbihkLGUsZil7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLApkLGUsZil9fSk7Yy5leHRlbmQoe3NwZWVkOmZ1bmN0aW9uKGEsYixkKXt2YXIgZT1hJiZ0eXBlb2YgYT09PSJvYmplY3QiP2MuZXh0ZW5kKHt9LGEpOntjb21wbGV0ZTpkfHwhZCYmYnx8Yy5pc0Z1bmN0aW9uKGEpJiZhLGR1cmF0aW9uOmEsZWFzaW5nOmQmJmJ8fGImJiFjLmlzRnVuY3Rpb24oYikmJmJ9O2UuZHVyYXRpb249Yy5meC5vZmY/MDp0eXBlb2YgZS5kdXJhdGlvbj09PSJudW1iZXIiP2UuZHVyYXRpb246ZS5kdXJhdGlvbiBpbiBjLmZ4LnNwZWVkcz9jLmZ4LnNwZWVkc1tlLmR1cmF0aW9uXTpjLmZ4LnNwZWVkcy5fZGVmYXVsdDtlLm9sZD1lLmNvbXBsZXRlO2UuY29tcGxldGU9ZnVuY3Rpb24oKXtlLnF1ZXVlIT09ZmFsc2UmJmModGhpcykuZGVxdWV1ZSgpO2MuaXNGdW5jdGlvbihlLm9sZCkmJmUub2xkLmNhbGwodGhpcyl9O3JldHVybiBlfSxlYXNpbmc6e2xpbmVhcjpmdW5jdGlvbihhLGIsZCxlKXtyZXR1cm4gZCtlKmF9LHN3aW5nOmZ1bmN0aW9uKGEsYixkLGUpe3JldHVybigtTWF0aC5jb3MoYSoKTWF0aC5QSSkvMiswLjUpKmUrZH19LHRpbWVyczpbXSxmeDpmdW5jdGlvbihhLGIsZCl7dGhpcy5vcHRpb25zPWI7dGhpcy5lbGVtPWE7dGhpcy5wcm9wPWQ7aWYoIWIub3JpZyliLm9yaWc9e319fSk7Yy5meC5wcm90b3R5cGU9e3VwZGF0ZTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKTsoYy5meC5zdGVwW3RoaXMucHJvcF18fGMuZnguc3RlcC5fZGVmYXVsdCkodGhpcyl9LGN1cjpmdW5jdGlvbigpe2lmKHRoaXMuZWxlbVt0aGlzLnByb3BdIT1udWxsJiYoIXRoaXMuZWxlbS5zdHlsZXx8dGhpcy5lbGVtLnN0eWxlW3RoaXMucHJvcF09PW51bGwpKXJldHVybiB0aGlzLmVsZW1bdGhpcy5wcm9wXTt2YXIgYT1wYXJzZUZsb2F0KGMuY3NzKHRoaXMuZWxlbSx0aGlzLnByb3ApKTtyZXR1cm4gYSYmYT4tMUU0P2E6MH0sY3VzdG9tOmZ1bmN0aW9uKGEsYixkKXtmdW5jdGlvbiBlKGwpe3JldHVybiBmLnN0ZXAobCl9CnZhciBmPXRoaXMsaD1jLmZ4O3RoaXMuc3RhcnRUaW1lPWMubm93KCk7dGhpcy5zdGFydD1hO3RoaXMuZW5kPWI7dGhpcy51bml0PWR8fHRoaXMudW5pdHx8InB4Ijt0aGlzLm5vdz10aGlzLnN0YXJ0O3RoaXMucG9zPXRoaXMuc3RhdGU9MDtlLmVsZW09dGhpcy5lbGVtO2lmKGUoKSYmYy50aW1lcnMucHVzaChlKSYmIWJhKWJhPXNldEludGVydmFsKGgudGljayxoLmludGVydmFsKX0sc2hvdzpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5vcmlnW3RoaXMucHJvcF09Yy5zdHlsZSh0aGlzLmVsZW0sdGhpcy5wcm9wKTt0aGlzLm9wdGlvbnMuc2hvdz10cnVlO3RoaXMuY3VzdG9tKHRoaXMucHJvcD09PSJ3aWR0aCJ8fHRoaXMucHJvcD09PSJoZWlnaHQiPzE6MCx0aGlzLmN1cigpKTtjKHRoaXMuZWxlbSkuc2hvdygpfSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLm9yaWdbdGhpcy5wcm9wXT1jLnN0eWxlKHRoaXMuZWxlbSx0aGlzLnByb3ApO3RoaXMub3B0aW9ucy5oaWRlPXRydWU7CnRoaXMuY3VzdG9tKHRoaXMuY3VyKCksMCl9LHN0ZXA6ZnVuY3Rpb24oYSl7dmFyIGI9Yy5ub3coKSxkPXRydWU7aWYoYXx8Yj49dGhpcy5vcHRpb25zLmR1cmF0aW9uK3RoaXMuc3RhcnRUaW1lKXt0aGlzLm5vdz10aGlzLmVuZDt0aGlzLnBvcz10aGlzLnN0YXRlPTE7dGhpcy51cGRhdGUoKTt0aGlzLm9wdGlvbnMuY3VyQW5pbVt0aGlzLnByb3BdPXRydWU7Zm9yKHZhciBlIGluIHRoaXMub3B0aW9ucy5jdXJBbmltKWlmKHRoaXMub3B0aW9ucy5jdXJBbmltW2VdIT09dHJ1ZSlkPWZhbHNlO2lmKGQpe2lmKHRoaXMub3B0aW9ucy5vdmVyZmxvdyE9bnVsbCYmIWMuc3VwcG9ydC5zaHJpbmtXcmFwQmxvY2tzKXt2YXIgZj10aGlzLmVsZW0saD10aGlzLm9wdGlvbnM7Yy5lYWNoKFsiIiwiWCIsIlkiXSxmdW5jdGlvbihrLG8pe2Yuc3R5bGVbIm92ZXJmbG93IitvXT1oLm92ZXJmbG93W2tdfSl9dGhpcy5vcHRpb25zLmhpZGUmJmModGhpcy5lbGVtKS5oaWRlKCk7aWYodGhpcy5vcHRpb25zLmhpZGV8fAp0aGlzLm9wdGlvbnMuc2hvdylmb3IodmFyIGwgaW4gdGhpcy5vcHRpb25zLmN1ckFuaW0pYy5zdHlsZSh0aGlzLmVsZW0sbCx0aGlzLm9wdGlvbnMub3JpZ1tsXSk7dGhpcy5vcHRpb25zLmNvbXBsZXRlLmNhbGwodGhpcy5lbGVtKX1yZXR1cm4gZmFsc2V9ZWxzZXthPWItdGhpcy5zdGFydFRpbWU7dGhpcy5zdGF0ZT1hL3RoaXMub3B0aW9ucy5kdXJhdGlvbjtiPXRoaXMub3B0aW9ucy5lYXNpbmd8fChjLmVhc2luZy5zd2luZz8ic3dpbmciOiJsaW5lYXIiKTt0aGlzLnBvcz1jLmVhc2luZ1t0aGlzLm9wdGlvbnMuc3BlY2lhbEVhc2luZyYmdGhpcy5vcHRpb25zLnNwZWNpYWxFYXNpbmdbdGhpcy5wcm9wXXx8Yl0odGhpcy5zdGF0ZSxhLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pO3RoaXMubm93PXRoaXMuc3RhcnQrKHRoaXMuZW5kLXRoaXMuc3RhcnQpKnRoaXMucG9zO3RoaXMudXBkYXRlKCl9cmV0dXJuIHRydWV9fTtjLmV4dGVuZChjLmZ4LHt0aWNrOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPQpjLnRpbWVycyxiPTA7YjxhLmxlbmd0aDtiKyspYVtiXSgpfHxhLnNwbGljZShiLS0sMSk7YS5sZW5ndGh8fGMuZnguc3RvcCgpfSxpbnRlcnZhbDoxMyxzdG9wOmZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChiYSk7YmE9bnVsbH0sc3BlZWRzOntzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LHN0ZXA6e29wYWNpdHk6ZnVuY3Rpb24oYSl7Yy5zdHlsZShhLmVsZW0sIm9wYWNpdHkiLGEubm93KX0sX2RlZmF1bHQ6ZnVuY3Rpb24oYSl7aWYoYS5lbGVtLnN0eWxlJiZhLmVsZW0uc3R5bGVbYS5wcm9wXSE9bnVsbClhLmVsZW0uc3R5bGVbYS5wcm9wXT0oYS5wcm9wPT09IndpZHRoInx8YS5wcm9wPT09ImhlaWdodCI/TWF0aC5tYXgoMCxhLm5vdyk6YS5ub3cpK2EudW5pdDtlbHNlIGEuZWxlbVthLnByb3BdPWEubm93fX19KTtpZihjLmV4cHImJmMuZXhwci5maWx0ZXJzKWMuZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGEpe3JldHVybiBjLmdyZXAoYy50aW1lcnMsZnVuY3Rpb24oYil7cmV0dXJuIGE9PT0KYi5lbGVtfSkubGVuZ3RofTt2YXIgeGI9L150KD86YWJsZXxkfGgpJC9pLElhPS9eKD86Ym9keXxodG1sKSQvaTtjLmZuLm9mZnNldD0iZ2V0Qm91bmRpbmdDbGllbnRSZWN0ImluIHQuZG9jdW1lbnRFbGVtZW50P2Z1bmN0aW9uKGEpe3ZhciBiPXRoaXNbMF0sZDtpZihhKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24obCl7Yy5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsYSxsKX0pO2lmKCFifHwhYi5vd25lckRvY3VtZW50KXJldHVybiBudWxsO2lmKGI9PT1iLm93bmVyRG9jdW1lbnQuYm9keSlyZXR1cm4gYy5vZmZzZXQuYm9keU9mZnNldChiKTt0cnl7ZD1iLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWNhdGNoKGUpe312YXIgZj1iLm93bmVyRG9jdW1lbnQsaD1mLmRvY3VtZW50RWxlbWVudDtpZighZHx8IWMuY29udGFpbnMoaCxiKSlyZXR1cm4gZHx8e3RvcDowLGxlZnQ6MH07Yj1mLmJvZHk7Zj1mYShmKTtyZXR1cm57dG9wOmQudG9wKyhmLnBhZ2VZT2Zmc2V0fHxjLnN1cHBvcnQuYm94TW9kZWwmJgpoLnNjcm9sbFRvcHx8Yi5zY3JvbGxUb3ApLShoLmNsaWVudFRvcHx8Yi5jbGllbnRUb3B8fDApLGxlZnQ6ZC5sZWZ0KyhmLnBhZ2VYT2Zmc2V0fHxjLnN1cHBvcnQuYm94TW9kZWwmJmguc2Nyb2xsTGVmdHx8Yi5zY3JvbGxMZWZ0KS0oaC5jbGllbnRMZWZ0fHxiLmNsaWVudExlZnR8fDApfX06ZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXTtpZihhKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oeCl7Yy5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsYSx4KX0pO2lmKCFifHwhYi5vd25lckRvY3VtZW50KXJldHVybiBudWxsO2lmKGI9PT1iLm93bmVyRG9jdW1lbnQuYm9keSlyZXR1cm4gYy5vZmZzZXQuYm9keU9mZnNldChiKTtjLm9mZnNldC5pbml0aWFsaXplKCk7dmFyIGQsZT1iLm9mZnNldFBhcmVudCxmPWIub3duZXJEb2N1bWVudCxoPWYuZG9jdW1lbnRFbGVtZW50LGw9Zi5ib2R5O2Q9KGY9Zi5kZWZhdWx0Vmlldyk/Zi5nZXRDb21wdXRlZFN0eWxlKGIsbnVsbCk6Yi5jdXJyZW50U3R5bGU7CmZvcih2YXIgaz1iLm9mZnNldFRvcCxvPWIub2Zmc2V0TGVmdDsoYj1iLnBhcmVudE5vZGUpJiZiIT09bCYmYiE9PWg7KXtpZihjLm9mZnNldC5zdXBwb3J0c0ZpeGVkUG9zaXRpb24mJmQucG9zaXRpb249PT0iZml4ZWQiKWJyZWFrO2Q9Zj9mLmdldENvbXB1dGVkU3R5bGUoYixudWxsKTpiLmN1cnJlbnRTdHlsZTtrLT1iLnNjcm9sbFRvcDtvLT1iLnNjcm9sbExlZnQ7aWYoYj09PWUpe2srPWIub2Zmc2V0VG9wO28rPWIub2Zmc2V0TGVmdDtpZihjLm9mZnNldC5kb2VzTm90QWRkQm9yZGVyJiYhKGMub2Zmc2V0LmRvZXNBZGRCb3JkZXJGb3JUYWJsZUFuZENlbGxzJiZ4Yi50ZXN0KGIubm9kZU5hbWUpKSl7ays9cGFyc2VGbG9hdChkLmJvcmRlclRvcFdpZHRoKXx8MDtvKz1wYXJzZUZsb2F0KGQuYm9yZGVyTGVmdFdpZHRoKXx8MH1lPWIub2Zmc2V0UGFyZW50fWlmKGMub2Zmc2V0LnN1YnRyYWN0c0JvcmRlckZvck92ZXJmbG93Tm90VmlzaWJsZSYmZC5vdmVyZmxvdyE9PSJ2aXNpYmxlIil7ays9CnBhcnNlRmxvYXQoZC5ib3JkZXJUb3BXaWR0aCl8fDA7bys9cGFyc2VGbG9hdChkLmJvcmRlckxlZnRXaWR0aCl8fDB9ZD1kfWlmKGQucG9zaXRpb249PT0icmVsYXRpdmUifHxkLnBvc2l0aW9uPT09InN0YXRpYyIpe2srPWwub2Zmc2V0VG9wO28rPWwub2Zmc2V0TGVmdH1pZihjLm9mZnNldC5zdXBwb3J0c0ZpeGVkUG9zaXRpb24mJmQucG9zaXRpb249PT0iZml4ZWQiKXtrKz1NYXRoLm1heChoLnNjcm9sbFRvcCxsLnNjcm9sbFRvcCk7bys9TWF0aC5tYXgoaC5zY3JvbGxMZWZ0LGwuc2Nyb2xsTGVmdCl9cmV0dXJue3RvcDprLGxlZnQ6b319O2Mub2Zmc2V0PXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dC5ib2R5LGI9dC5jcmVhdGVFbGVtZW50KCJkaXYiKSxkLGUsZixoPXBhcnNlRmxvYXQoYy5jc3MoYSwibWFyZ2luVG9wIikpfHwwO2MuZXh0ZW5kKGIuc3R5bGUse3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdG9wOjAsbGVmdDowLG1hcmdpbjowLGJvcmRlcjowLHdpZHRoOiIxcHgiLApoZWlnaHQ6IjFweCIsdmlzaWJpbGl0eToiaGlkZGVuIn0pO2IuaW5uZXJIVE1MPSI8ZGl2IHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7bWFyZ2luOjA7Ym9yZGVyOjVweCBzb2xpZCAjMDAwO3BhZGRpbmc6MDt3aWR0aDoxcHg7aGVpZ2h0OjFweDsnPjxkaXY+PC9kaXY+PC9kaXY+PHRhYmxlIHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7bWFyZ2luOjA7Ym9yZGVyOjVweCBzb2xpZCAjMDAwO3BhZGRpbmc6MDt3aWR0aDoxcHg7aGVpZ2h0OjFweDsnIGNlbGxwYWRkaW5nPScwJyBjZWxsc3BhY2luZz0nMCc+PHRyPjx0ZD48L3RkPjwvdHI+PC90YWJsZT4iO2EuaW5zZXJ0QmVmb3JlKGIsYS5maXJzdENoaWxkKTtkPWIuZmlyc3RDaGlsZDtlPWQuZmlyc3RDaGlsZDtmPWQubmV4dFNpYmxpbmcuZmlyc3RDaGlsZC5maXJzdENoaWxkO3RoaXMuZG9lc05vdEFkZEJvcmRlcj1lLm9mZnNldFRvcCE9PTU7dGhpcy5kb2VzQWRkQm9yZGVyRm9yVGFibGVBbmRDZWxscz0KZi5vZmZzZXRUb3A9PT01O2Uuc3R5bGUucG9zaXRpb249ImZpeGVkIjtlLnN0eWxlLnRvcD0iMjBweCI7dGhpcy5zdXBwb3J0c0ZpeGVkUG9zaXRpb249ZS5vZmZzZXRUb3A9PT0yMHx8ZS5vZmZzZXRUb3A9PT0xNTtlLnN0eWxlLnBvc2l0aW9uPWUuc3R5bGUudG9wPSIiO2Quc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiI7ZC5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiO3RoaXMuc3VidHJhY3RzQm9yZGVyRm9yT3ZlcmZsb3dOb3RWaXNpYmxlPWUub2Zmc2V0VG9wPT09LTU7dGhpcy5kb2VzTm90SW5jbHVkZU1hcmdpbkluQm9keU9mZnNldD1hLm9mZnNldFRvcCE9PWg7YS5yZW1vdmVDaGlsZChiKTtjLm9mZnNldC5pbml0aWFsaXplPWMubm9vcH0sYm9keU9mZnNldDpmdW5jdGlvbihhKXt2YXIgYj1hLm9mZnNldFRvcCxkPWEub2Zmc2V0TGVmdDtjLm9mZnNldC5pbml0aWFsaXplKCk7aWYoYy5vZmZzZXQuZG9lc05vdEluY2x1ZGVNYXJnaW5JbkJvZHlPZmZzZXQpe2IrPXBhcnNlRmxvYXQoYy5jc3MoYSwKIm1hcmdpblRvcCIpKXx8MDtkKz1wYXJzZUZsb2F0KGMuY3NzKGEsIm1hcmdpbkxlZnQiKSl8fDB9cmV0dXJue3RvcDpiLGxlZnQ6ZH19LHNldE9mZnNldDpmdW5jdGlvbihhLGIsZCl7dmFyIGU9Yy5jc3MoYSwicG9zaXRpb24iKTtpZihlPT09InN0YXRpYyIpYS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiO3ZhciBmPWMoYSksaD1mLm9mZnNldCgpLGw9Yy5jc3MoYSwidG9wIiksaz1jLmNzcyhhLCJsZWZ0Iiksbz1lPT09ImFic29sdXRlIiYmYy5pbkFycmF5KCJhdXRvIixbbCxrXSk+LTE7ZT17fTt2YXIgeD17fTtpZihvKXg9Zi5wb3NpdGlvbigpO2w9bz94LnRvcDpwYXJzZUludChsLDEwKXx8MDtrPW8/eC5sZWZ0OnBhcnNlSW50KGssMTApfHwwO2lmKGMuaXNGdW5jdGlvbihiKSliPWIuY2FsbChhLGQsaCk7aWYoYi50b3AhPW51bGwpZS50b3A9Yi50b3AtaC50b3ArbDtpZihiLmxlZnQhPW51bGwpZS5sZWZ0PWIubGVmdC1oLmxlZnQrazsidXNpbmciaW4gYj9iLnVzaW5nLmNhbGwoYSwKZSk6Zi5jc3MoZSl9fTtjLmZuLmV4dGVuZCh7cG9zaXRpb246ZnVuY3Rpb24oKXtpZighdGhpc1swXSlyZXR1cm4gbnVsbDt2YXIgYT10aGlzWzBdLGI9dGhpcy5vZmZzZXRQYXJlbnQoKSxkPXRoaXMub2Zmc2V0KCksZT1JYS50ZXN0KGJbMF0ubm9kZU5hbWUpP3t0b3A6MCxsZWZ0OjB9OmIub2Zmc2V0KCk7ZC50b3AtPXBhcnNlRmxvYXQoYy5jc3MoYSwibWFyZ2luVG9wIikpfHwwO2QubGVmdC09cGFyc2VGbG9hdChjLmNzcyhhLCJtYXJnaW5MZWZ0IikpfHwwO2UudG9wKz1wYXJzZUZsb2F0KGMuY3NzKGJbMF0sImJvcmRlclRvcFdpZHRoIikpfHwwO2UubGVmdCs9cGFyc2VGbG9hdChjLmNzcyhiWzBdLCJib3JkZXJMZWZ0V2lkdGgiKSl8fDA7cmV0dXJue3RvcDpkLnRvcC1lLnRvcCxsZWZ0OmQubGVmdC1lLmxlZnR9fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5vZmZzZXRQYXJlbnR8fHQuYm9keTthJiYhSWEudGVzdChhLm5vZGVOYW1lKSYmCmMuY3NzKGEsInBvc2l0aW9uIik9PT0ic3RhdGljIjspYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYX0pfX0pO2MuZWFjaChbIkxlZnQiLCJUb3AiXSxmdW5jdGlvbihhLGIpe3ZhciBkPSJzY3JvbGwiK2I7Yy5mbltkXT1mdW5jdGlvbihlKXt2YXIgZj10aGlzWzBdLGg7aWYoIWYpcmV0dXJuIG51bGw7aWYoZSE9PUIpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKGg9ZmEodGhpcykpaC5zY3JvbGxUbyghYT9lOmMoaCkuc2Nyb2xsTGVmdCgpLGE/ZTpjKGgpLnNjcm9sbFRvcCgpKTtlbHNlIHRoaXNbZF09ZX0pO2Vsc2UgcmV0dXJuKGg9ZmEoZikpPyJwYWdlWE9mZnNldCJpbiBoP2hbYT8icGFnZVlPZmZzZXQiOiJwYWdlWE9mZnNldCJdOmMuc3VwcG9ydC5ib3hNb2RlbCYmaC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbZF18fGguZG9jdW1lbnQuYm9keVtkXTpmW2RdfX0pO2MuZWFjaChbIkhlaWdodCIsIldpZHRoIl0sZnVuY3Rpb24oYSxiKXt2YXIgZD1iLnRvTG93ZXJDYXNlKCk7CmMuZm5bImlubmVyIitiXT1mdW5jdGlvbigpe3JldHVybiB0aGlzWzBdP3BhcnNlRmxvYXQoYy5jc3ModGhpc1swXSxkLCJwYWRkaW5nIikpOm51bGx9O2MuZm5bIm91dGVyIitiXT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpc1swXT9wYXJzZUZsb2F0KGMuY3NzKHRoaXNbMF0sZCxlPyJtYXJnaW4iOiJib3JkZXIiKSk6bnVsbH07Yy5mbltkXT1mdW5jdGlvbihlKXt2YXIgZj10aGlzWzBdO2lmKCFmKXJldHVybiBlPT1udWxsP251bGw6dGhpcztpZihjLmlzRnVuY3Rpb24oZSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihsKXt2YXIgaz1jKHRoaXMpO2tbZF0oZS5jYWxsKHRoaXMsbCxrW2RdKCkpKX0pO2lmKGMuaXNXaW5kb3coZikpcmV0dXJuIGYuZG9jdW1lbnQuY29tcGF0TW9kZT09PSJDU1MxQ29tcGF0IiYmZi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYl18fGYuZG9jdW1lbnQuYm9keVsiY2xpZW50IitiXTtlbHNlIGlmKGYubm9kZVR5cGU9PT05KXJldHVybiBNYXRoLm1heChmLmRvY3VtZW50RWxlbWVudFsiY2xpZW50IisKYl0sZi5ib2R5WyJzY3JvbGwiK2JdLGYuZG9jdW1lbnRFbGVtZW50WyJzY3JvbGwiK2JdLGYuYm9keVsib2Zmc2V0IitiXSxmLmRvY3VtZW50RWxlbWVudFsib2Zmc2V0IitiXSk7ZWxzZSBpZihlPT09Qil7Zj1jLmNzcyhmLGQpO3ZhciBoPXBhcnNlRmxvYXQoZik7cmV0dXJuIGMuaXNOYU4oaCk/ZjpofWVsc2UgcmV0dXJuIHRoaXMuY3NzKGQsdHlwZW9mIGU9PT0ic3RyaW5nIj9lOmUrInB4Iil9fSl9KSh3aW5kb3cpOwoKPC9zY3JpcHQ+CjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4KJChsb2FkSnNGdWxsc2NyZWVuKTsKPC9zY3JpcHQ+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+CmJvZHkgeyBmb250LWZhbWlseTogVmVyZGFuYSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjsgfQpoMSwgaDIsIGgzIHsgZm9udC1mYW1pbHk6IHNlcmlmOyB9CiNpbWcxLCAjaW1nMiB7IG1hcmdpbjogMCB9Cmh0bWwsYm9keXsKICAgIG1hcmdpbjowOwogICAgaGVpZ2h0OjEwMCU7Cn0KaW1newogIGRpc3BsYXk6YmxvY2s7CiAgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsKICBvYmplY3QtZml0OiBjb250YWluOwp9Cjwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CjxpbWcgb25jbGljaz0ic3dBc3BlY3QoKSIgaWQ9ImltZzEiIHNyYz0iL2dldD8xIiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyB6LWluZGV4OiAtMTsgd2lkdGg6IDU5NXB4OyBib3JkZXI6bm9uZTtiYWNrZ3JvdW5kOm5vbmU7Ij4KPGltZyBvbmNsaWNrPSJzd0FzcGVjdCgpIiBpZD0iaW1nMiIgc3JjPSIvZ2V0PzIiIHN0eWxlPSJwb3NpdGlvbjogYWJzb2x1dGU7IHotaW5kZXg6IC0xOyB3aWR0aDogNTk1cHg7IGJvcmRlcjpub25lO2JhY2tncm91bmQ6bm9uZTsiPgo8L2JvZHk+PC9odG1sPgoKCgo=";
    }
}
